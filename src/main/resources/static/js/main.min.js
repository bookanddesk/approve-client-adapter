/* Zepto v1.2.0 - zepto event ajax form ie - zeptojs.com/license */

//     Zepto.js
//     (c) 2010-2016 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.

/**
 * mOxie - multi-runtime File API & XMLHttpRequest L2 Polyfill
 * v1.2.1
 *
 * Copyright 2013, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2014-05-14
 */

/**
 * Plupload - multi-runtime File Uploader
 * v2.1.2
 *
 * Copyright 2013, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2014-05-14
 */

define("md5",["require"],function(e){var t=function(e,t){return e<<t|e>>>32-t},i=function(e,t){var i,n,a,s,r;return a=2147483648&e,s=2147483648&t,i=1073741824&e,n=1073741824&t,r=(1073741823&e)+(1073741823&t),i&n?2147483648^r^a^s:i|n?1073741824&r?3221225472^r^a^s:1073741824^r^a^s:r^a^s},n=function(e,t,i){return e&t|~e&i},a=function(e,t,i){return e&i|t&~i},s=function(e,t,i){return e^t^i},r=function(e,t,i){return t^(e|~i)},o=function(e,a,s,r,o,l,c){return e=i(e,i(i(n(a,s,r),o),c)),i(t(e,l),a)},l=function(e,n,s,r,o,l,c){return e=i(e,i(i(a(n,s,r),o),c)),i(t(e,l),n)},c=function(e,n,a,r,o,l,c){return e=i(e,i(i(s(n,a,r),o),c)),i(t(e,l),n)},p=function(e,n,a,s,o,l,c){return e=i(e,i(i(r(n,a,s),o),c)),i(t(e,l),n)},d=function(e){for(var t,i=e.length,n=i+8,a=(n-n%64)/64,s=16*(a+1),r=Array(s-1),o=0,l=0;l<i;)t=(l-l%4)/4,o=l%4*8,r[t]=r[t]|e.charCodeAt(l)<<o,l++;return t=(l-l%4)/4,o=l%4*8,r[t]=r[t]|128<<o,r[s-2]=i<<3,r[s-1]=i>>>29,r},h=function(e){var t,i,n="",a="";for(i=0;i<=3;i++)t=e>>>8*i&255,a="0"+t.toString(16),n+=a.substr(a.length-2,2);return n},u=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t};return function(e){var t,n,a,s,r,f,g,m,y,v=Array();for(e=u(e),v=d(e),f=1732584193,g=4023233417,m=2562383102,y=271733878,t=0;t<v.length;t+=16)n=f,a=g,s=m,r=y,f=o(f,g,m,y,v[t+0],7,3614090360),y=o(y,f,g,m,v[t+1],12,3905402710),m=o(m,y,f,g,v[t+2],17,606105819),g=o(g,m,y,f,v[t+3],22,3250441966),f=o(f,g,m,y,v[t+4],7,4118548399),y=o(y,f,g,m,v[t+5],12,1200080426),m=o(m,y,f,g,v[t+6],17,2821735955),g=o(g,m,y,f,v[t+7],22,4249261313),f=o(f,g,m,y,v[t+8],7,1770035416),y=o(y,f,g,m,v[t+9],12,2336552879),m=o(m,y,f,g,v[t+10],17,4294925233),g=o(g,m,y,f,v[t+11],22,2304563134),f=o(f,g,m,y,v[t+12],7,1804603682),y=o(y,f,g,m,v[t+13],12,4254626195),m=o(m,y,f,g,v[t+14],17,2792965006),g=o(g,m,y,f,v[t+15],22,1236535329),f=l(f,g,m,y,v[t+1],5,4129170786),y=l(y,f,g,m,v[t+6],9,3225465664),m=l(m,y,f,g,v[t+11],14,643717713),g=l(g,m,y,f,v[t+0],20,3921069994),f=l(f,g,m,y,v[t+5],5,3593408605),y=l(y,f,g,m,v[t+10],9,38016083),m=l(m,y,f,g,v[t+15],14,3634488961),g=l(g,m,y,f,v[t+4],20,3889429448),f=l(f,g,m,y,v[t+9],5,568446438),y=l(y,f,g,m,v[t+14],9,3275163606),m=l(m,y,f,g,v[t+3],14,4107603335),g=l(g,m,y,f,v[t+8],20,1163531501),f=l(f,g,m,y,v[t+13],5,2850285829),y=l(y,f,g,m,v[t+2],9,4243563512),m=l(m,y,f,g,v[t+7],14,1735328473),g=l(g,m,y,f,v[t+12],20,2368359562),f=c(f,g,m,y,v[t+5],4,4294588738),y=c(y,f,g,m,v[t+8],11,2272392833),m=c(m,y,f,g,v[t+11],16,1839030562),g=c(g,m,y,f,v[t+14],23,4259657740),f=c(f,g,m,y,v[t+1],4,2763975236),y=c(y,f,g,m,v[t+4],11,1272893353),m=c(m,y,f,g,v[t+7],16,4139469664),g=c(g,m,y,f,v[t+10],23,3200236656),f=c(f,g,m,y,v[t+13],4,681279174),y=c(y,f,g,m,v[t+0],11,3936430074),m=c(m,y,f,g,v[t+3],16,3572445317),g=c(g,m,y,f,v[t+6],23,76029189),f=c(f,g,m,y,v[t+9],4,3654602809),y=c(y,f,g,m,v[t+12],11,3873151461),m=c(m,y,f,g,v[t+15],16,530742520),g=c(g,m,y,f,v[t+2],23,3299628645),f=p(f,g,m,y,v[t+0],6,4096336452),y=p(y,f,g,m,v[t+7],10,1126891415),m=p(m,y,f,g,v[t+14],15,2878612391),g=p(g,m,y,f,v[t+5],21,4237533241),f=p(f,g,m,y,v[t+12],6,1700485571),y=p(y,f,g,m,v[t+3],10,2399980690),m=p(m,y,f,g,v[t+10],15,4293915773),g=p(g,m,y,f,v[t+1],21,2240044497),f=p(f,g,m,y,v[t+8],6,1873313359),y=p(y,f,g,m,v[t+15],10,4264355552),m=p(m,y,f,g,v[t+6],15,2734768916),g=p(g,m,y,f,v[t+13],21,1309151649),f=p(f,g,m,y,v[t+4],6,4149444226),y=p(y,f,g,m,v[t+11],10,3174756917),m=p(m,y,f,g,v[t+2],15,718787259),g=p(g,m,y,f,v[t+9],21,3951481745),f=i(f,n),g=i(g,a),m=i(m,s),y=i(y,r);return(h(f)+h(g)+h(m)+h(y)).toLowerCase()}}),define("utils",["md5"],function(e){function t(e){return"%"==e.substring(e.length-1)||"auto"==e}function i(e,t){e=parseInt(e);var i=t.width/w.baseSize.width;return i=i>1.5?1.5:i,t.width>1e3&&(i=1),parseInt(i*e)}function n(e,t){e=parseInt(e);var i=t.height/w.baseSize.height;return i=i>1.5?1.5:i,parseInt(i*e)}function a(e,t,a,s,r,o){if(1===s){if("fontSize"==e||"font-size"==e||"line-height"==e||"lineHeight"==e){t=parseInt(t);var l=r.width/w.baseSize.width;return l=l>1.5?1.5:l,r.width>1e3&&(l=1),l=l<1?1:l,parseInt(l*t)}return"width"==e||"left"==e||"right"==e||"maxWidth"==e||"marginLeft"==e||"marginRight"==e||"max-width"==e||"minWidth"==e||"min-width"==e?i(t,r):"top"==e||"marginBottom"==e||"marginTop"==e||"bottom"==e||"maxHeight"==e||"max-height"==e||"minHeight"==e||"min-height"==e?n(t,r):i(t,r)}return 0===a||2===a?n(t,r):i(t,r)}function s(e,i,n,s){var r=[];if(i.length>1&&i.length<4||"padding"==e||"margin"==e)if(1==i.length){var o=i[0];i=[o,o,o,o]}else i[2]?i[3]||(i[3]=i[1]):(i[2]=i[0],i[3]=i[1]);for(var l=0,c=i.length;l<c;l++){var p=i[l];t(p)||(p=a(e,p,l,c,n,s)+"px"),r.push(p)}return r.join(" ")}var r,o,l,c,p,d={},h={},u={},f={w:!0,borderRadius:!0,maxHeight:!0,lineHeight:!0,"line-height":!0,"max-height":!0,maxWidth:!0,"max-width":!0,minWidth:!0,"min-width":!0,minHeight:!0,"min-height":!0,fs:!0,top:!0,left:!0,right:!0,bottom:!0,fontSize:!0,"font-size":!0,width:!0,height:!0,padding:!0,paddingTop:!0,paddingRight:!0,paddingLeft:!0,paddingBottom:!0,"padding-bottom":!0,"padding-top":!0,"padding-left":!0,"padding-right":!0,margin:!0,marginTop:!0,marginRight:!0,marginLeft:!0,marginBottom:!0,"margin-bottom":!0,"margin-top":!0,"margin-left":!0,"margin-right":!0},g={flexShrink:"yy-fs-",flexDirection:"yy-fd-","flex-direction":"yy-fd-","flex-shrink":"yy-fs-",justifyContent:"yy-jc-","justify-content":"yy-jc-","align-items":"yy-ai-",alignItems:"yy-ai-",alignContent:"yy-ac-","align-content":"yy-ac-",alignSelf:"yy-as-","align-self":"yy-as-","flex-wrap":"yy-fw-",flexWrap:"yy-fw-",flex:"yy-flex-"},m=null,y=null,v={},w={isSupportFlexWrap:function(){return c||(c=document.createElement("p"),p=c.style.flexWrap||c.style.webkitFlexWrap,p=""===p),p},fontSize:function(e){return v[e.toString()]||(v[e.toString()]=this.getRealWidth(e)),v[e.toString()]},fontSize12:function(){return y||(y=this.getRealWidth(12)),y},fontSize13:function(){return r||(r=this.getRealWidth(13)),r},fontSize14:function(){return o||(o=this.getRealWidth(14)),o},fontSize15:function(){return l||(l=this.getRealWidth(15)),l},AutoResizeImage:function(e,t,i,n){var a=new Image;a.src=i.src,a.onload=function(){var s,r,o=1,l=a.width,c=a.height;if(r=e/l,s=t/c,0===e&&0===t?o=1:0===e?s<1&&(o=s):0===t?r<1&&(o=r):(r<1||s<1)&&(o=r<=s?r:s),"1"===n){o<1&&(l>=c?(l="auto",c="100%"):(l="100%",c="auto"));var p={w:"100%"===l||"auto"===l?l:l+"px",h:"100%"===c||"auto"===c?c:c+"px"};i.style.width=p.w,i.style.height=p.h}else o<1&&(l*=o,c*=o),i.height=c,i.width=l}},getImgBg:function(t){if((t=t||"")in u)return u[t];var i=e(t).charAt(0).toLowerCase(),n=["#29d4ff","#1594ff","#ffa92f","#b587fa","#06cf86","#fa6771","#73d51c","#8991ff"],a=n["abcdefghijklmnopqrstuvwxyz0123456789".indexOf(i)%n.length];return u[t]=a,a},getImgTitle:function(e){try{return e=e||"",/[\u4e00-\u9fa5]/.test(e)?e.substr(-2):e.substr(0,2)}catch(t){return e}},deviceInfo:function(){if(void 0!==this._deviceInfo)return this._deviceInfo;var e=navigator.userAgent,t=e.indexOf("Android")>-1||e.indexOf("Adr")>-1,i=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return this._deviceInfo={isAndroid:t,isIOS:i},this._deviceInfo},getPicSize:function(e,t,i,n){var a,s,r=1;return s=e/i,a=t/n,0===e&&0===t?r=1:0===e?a<1&&(r=a):0===t?s<1&&(r=s):(s<1||a<1)&&(r=s<=a?s:a),r<1&&(i>=n?(i="auto",n="100%"):(i="100%",n="auto")),{w:"100%"===i||"auto"===i?i:i+"px",h:"100%"===n||"auto"===n?n:n+"px"}},convertStrToDate:function(e){if(!e)return new Date;var t=e.split(" "),i=t[0],n=t[1]||"",a=n.split(":"),s=i.split("-");return 3!=s.length&&(s=i.split("/")),3!=s.length?new Date:n?new Date(s[0],parseInt(s[1])-1,s[2],a[0]||0,a[1]||0,a[2]||0):new Date(s[0],parseInt(s[1])-1,s[2])},getPreMonth:function(e){var t=this.getDateInfo(e);return new Date(t.year,t.month-1,0)},getCurMonthFirstDay:function(e){e=this.convertToDate(e);var t=this.getDateInfo(e);return new Date(t.year,t.month-1,1)},getPreYear:function(e){var t=this.getDateInfo(e);return new Date(t.year-1,t.month-1,1)},setDateToYear:function(e,t){var i=this.getDateInfo(e);return new Date(t,i.month-1,1)},setMonthToDate:function(e,t){t=parseInt(t);var i=this.getDateInfo(e);return new Date(i.year,t-1,1)},getNextYear:function(e){var t=this.getDateInfo(e);return new Date(t.year+1,t.month-1,1)},getNextMonth:function(e){var t=this.getDateInfo(e);return new Date(t.year,t.month+1,0)},getMonthFirstDayWhicDayInWeek:function(e){return e=this.convertToDate(e),new Date(e.getFullYear(),e.getMonth(),1).getDay()},getDateWhichDayInWeek:function(e){return e=this.convertToDate(e),e.getDay()},timestampToDate:function(e){return e?(10===e.length&&(e*=1e3),new Date(parseInt(e))):new Date},ConvertDateToStr:function(e,t){e=this.convertToDate(e);var i=this.getDateInfo(e);return i.month=i.month<10?"0"+i.month:i.month,i.day=i.day<10?"0"+i.day:i.day,i.min=i.min<10?"0"+i.min:i.min,i.second=i.second<10?"0"+i.second:i.second,i.hour=i.hour<10?"0"+i.hour:i.hour,"yyyy-MM-dd"==t?i.year+"-"+i.month+"-"+i.day:"yyyy-MM"==t?i.year+"-"+i.month:"yyyy-mm"==t?i.year+"-"+i.month:"yyyy-MM-dd hh:mm:ss"==t?i.year+"-"+i.month+"-"+i.day+" "+i.hour+":"+i.min+":"+i.second:"yyyy-mm-dd hh:mm"==t?i.year+"-"+i.month+"-"+i.day+" "+i.hour+":"+i.min:"MM-dd hh:mm"==t?i.month+"-"+i.day+" "+i.hour+":"+i.min:"hh:mm"==t?i.hour+":"+i.min:"hh:mm:ss"==t?i.hour+":"+i.min+":"+i.second:"MM-dd week"==t?i.month+"-"+i.day+" "+i.week:"yyyy-MM-dd weekFullStr"==t?i.year+"-"+i.month+"-"+i.day+" "+i.weekFullStr:"yyyy-MM-dd week"==t?i.year+"-"+i.month+"-"+i.day+" "+i.week:"yyyy-MM-dd hh:mm"==t?i.year+"-"+i.month+"-"+i.day+" "+i.hour+":"+i.min:"yyyy年MM月dd日"==t?("0"===i.month[0]&&(i.month=i.month[1]),"0"===i.day[0]&&(i.day=i.day[1]),i.year+"年"+i.month+"月"+i.day+"日"):"yyyy-mm-dd(c)"==t?("0"===i.month[0]&&(i.month=i.month[1]),"0"===i.day[0]&&(i.day=i.day[1]),i.year+"年"+i.month+"月"+i.day+"日"):"all"===t?{"yyyy-MM-dd":i.year+"-"+i.month+"-"+i.day,"yyyy年MM月dd日":i.year+"年"+i.month+"月"+i.day+"日"}:i.year+"-"+i.month+"-"+i.day},getMonthDayCount:function(e){return e=this.convertToDate(e),new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},convertToDate:function(e){try{if(e instanceof Date)return e;if(!isNaN(e))return this.timestampToDate(e);if("string"==typeof e)return this.convertStrToDate(e)}catch(e){return new Date}return new Date},_processtime:function(e){return e<10?"0"+e:e},weekArr:["日","一","二","三","四","五","六"],getDateInfo:function(e){e=this.convertToDate(e);var t=e.getMonth()+1,i=e.getDate(),n=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),r=e.getDay(),o=e.getTime();return{year:e.getFullYear(),month:t,weekStr:this.weekArr[r],week:this.weekArr[r],weekFullStr:"星期"+this.weekArr[r],monthStr:this._processtime(t),day:i,dayStr:this._processtime(i),hour:n,hourStr:this._processtime(n),min:a,minStr:this._processtime(a),second:s,secondStr:this._processtime(s),timestamp:o}},viewport:{width:null,height:null},getUrl:function(e){if(e.indexOf("http")>=0||e.indexOf("https")>=0)return e;var t=this.appConfig.host;return t||console.error("请在app.js中指定host属性"),t=$.trim(t),e=$.trim(e),"/"==t.substring(t.length-1)&&(t=t.substring(0,t.length-1)),"/"==e.substring(0,1)&&(e=e.substring(1)),t+"/"+e},createStyleSheet:function(e,t){if(!document.getElementById(e)){var i=document.createElement("style");i.type="text/css",i.id=e,i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i)}},timestampToDateInfo:function(e){var t;try{e=parseFloat(e),t=new Date(e)}catch(e){t=new Date}return this.getDateInfo(t)},timestampToTimeStr:function(e,t){e=+new Date(e);var i="";try{e=parseFloat(e);var n=new Date(e),a=new Date,s=a.getTime(),r=this.getDateInfo(n),o=this.getDateInfo(a);s=parseInt((s-e)/1e3);var l;s<10?i=this.getLanguageText("justNow"):10<s&&s<60?i=s+this.getLanguageText("fewSec"):s<3600&&s>=60?(l=Math.floor(s/60),i=l+this.getLanguageText("fewMin")):i=o.year===r.year&&o.day===r.day&&o.month===r.month?this.getLanguageText("today")+r.hourStr+":"+r.minStr:t?o.year===r.year?r.monthStr+"."+r.dayStr:r.year+"."+r.monthStr+"."+r.dayStr:o.year===r.year?r.monthStr+"-"+r.dayStr+" "+r.hourStr+":"+r.minStr:r.year+"-"+r.monthStr+"-"+r.dayStr+" "+r.hourStr+":"+r.minStr}catch(e){}return i},getLanguageText:function(e){for(var t,i=window.navigator.userAgent.split(" "),n=navigator.language||"zh-CN",a=0;a<i.length;a++)i[a].indexOf("youZoneLanguage=")>-1&&(n=i[a].split("=")[1]);return"tw"==n.toLowerCase()&&(n="zh-CN"),n=/^zh/.test(n)?"zh-CN":/^en/.test(n)?"en":/^es/.test(n)?"es":n,t="zh-CN"===n?{justNow:"刚刚",today:"今天",fewSec:"秒前",fewMin:"分钟前",example:"例：情况属实，予以同意",cancel:"取消",confirm:"确定",reset:"重置",searchTitle:"搜索标题",search:"搜索",pullToRefresh:"下拉刷新",releaseToUpdate:"释放更新",loading:"正在加载",showDone:"已显示所有数据",NetworkError:"网络异常",reLoading:"重新加载",networkerrorLoading:"网络异常,尝试再次下拉刷新",type:"  类型  ",button:"按钮",pleaseSelect:"请选择",Monday:"一",TuesDay:"二",Wednesday:"三",Thursday:"四",Friday:"五",Saturday:"六",Sunday:"日",Month:"月"}:{justNow:"Now",today:"Today",fewSec:" Secs ago",fewMin:" Mins ago",example:"For example: I agree with it,please execute!",cancel:"Cancel",confirm:"Confirm",reset:"Reset",searchTitle:"Title Searching",search:"Search",pullToRefresh:"Pull to Refresh",releaseToUpdate:"Release to Update",loading:"Loading",showDone:"All Data Displayed",NetworkError:"Network error",reLoading:"ReLoading",networkerrorLoading:"Network exception, try to pull down again refresh",type:"  Type  ",button:"Button",pleaseSelect:"Select",Monday:"Mon",TuesDay:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat",Sunday:"Sun",Month:"Month"},t[e]},_isBadAndroid:null,isBadAndroid:function(){if(null!==this._isBadAndroid)return this._isBadAndroid;var e=window.navigator.appVersion;if(/Android/.test(e)&&!/Chrome\/\d/.test(e)){var t=e.match(/Safari\/(\d+.\d)/);t&&"object"==typeof t&&t.length>=2?this._isBadAndroid=parseFloat(t[1])<535.19:this._isBadAndroid=!0}else this._isBadAndroid=!1;return this._isBadAndroid},processHTMLMethod2:function(e){var t=$("<div></div>");t.html(e);var i=t.find("img"),n=t.html();return i.replaceWith(""),{originalText:n,imageDoms:i,curText:t.text()}},processHTML:function(e,t){var i=$("<div></div>");i.html(e);var n=i.find("img"),a=$("<div></div>");a.html(e);var s=a.find("img");return t&&(t(s),t(n)),n.replaceWith(""),{dom:a,originalTextDom:i,imageDoms:n,curText:i.text()}},ajax:function(e){var t=this,i=(e.pageviewInstance,t.appConfig.beforeSendAjax);i&&i(e);var n={type:e.type,url:this.getUrl(e.url),data:e.data,success:function(i){var n=t.appConfig.onAjaxResponse;n&&n({isSuccess:!0,data:i,config:e}),e.success&&e.success(i)},error:function(i){var n=t.appConfig.onAjaxResponse;n&&n({isSuccess:!1,e:i,config:e,data:{code:-1e3,msg:"服务器错误"}}),e.error&&e.error(i)}};e.contentType?(n.contentType=e.contentType,n.dataType="json"):n.contentType="application/x-www-form-urlencoded",e.xhrFields,$.ajax(n)},concat:function(e,t,i){i||console.error("合并页面配置的时候没有指定namespace"),e.components=e.components||{};for(var n in t){var a=i+n;e.components[a]&&console.error(a+" 已经存在原有的页面中 请不要重复控件的Key");var s=t[n],r=s.root;if(r)for(var o=0,l=r.length;o<l;o++)r[o]=i+r[o];e.components[a]=t[n]}return e},getTransitionKeys:function(){if(m)return m;var e=document.createElement("DIV").style,t={};return"-webkit-transform"in e?(t.transitionend="webkitTransitionEnd",t.transform="-webkit-transform",t.transition="-webkit-transition"):(t.transitionend="transitionend",t.transform="transform",t.transition="transition"),m=t,t},baseSize:{width:375,height:667},getRealWidth:function(e){e=parseInt(e);var t=this.viewport.width/this.baseSize.width;return t=t>1.5?1.5:t,this.viewport.width>1e3&&(t=1),parseInt(t*e)},getRealHeight:function(e){e=parseInt(e);var t=this.viewport.height/this.baseSize.height;return t=t<1?1:t,t=t>1.5?1.5:t,parseInt(t*e)},_initScrennSize:function(){this.viewport.width||(this.viewport.width=window.screen.width>700?document.body.offsetWidth:window.screen.width,window.screen.width>700?this.viewport.height=document.body.offsetHeight:this.viewport.height=window.screen.height)},processStyle:function(e,t){e=this.clone(e),this._initScrennSize(),t||(t=this.viewport),e=e||{};for(var n in e){var a=e[n].toString();if(f[n]){var r=a.split(" ");"fs"==n?(e.fontSize=parseInt(a)+"px",delete e.fs):"w"==n?(delete e.width,delete e.height,e.height=e.width=i(e.w,t)+"px",delete e.w):e[n]=s(n,r,t,e)}}return e},processPageConfig:function(e){var t;if(this.viewport.width||this._initScrennSize(),e.showPageStyle){var i=e.showPageStyle.width||"100%",n=e.showPageStyle.height||"100%";i=i.toString(),n=n.toString(),i="%"==i.substring(i.length-1)?parseInt(i)/100*this.viewport.width:parseInt(i)*this.viewport.width,n="%"==n.substring(n.length-1)?parseInt(n)/100*this.viewport.height:parseInt(n)*this.viewport.height,t={width:i,height:n}}else t=this.viewport;if(e.style&&(e.style=this.processStyle(e.style,t)),e.components)for(var a in e.components){var s=this.clone(e.components[a]);for(var r in s)r.length>=5&&"STYLE"==r.substring(r.length-5).toUpperCase()&&(s[r]=this.processStyle(s[r],t));e.components[a]=s}return e},setPageConfigByPagePath:function(e,t){return t.isNoAdaptScreen||(t=this.processPageConfig(t)),h[e]=t,t},getPageConfigByPagePath:function(e){return h[e]},getComponentInstance:function(e){return d[e]},customerComponents:{},getComponentClass:function(e,t,i){var n=e.type,a=d[n];if(a)return void t(a);var s=w.customerComponents[n];s||(s="../../components/"+n.toLowerCase()),require([s],function(e){d[n]=e,t(e)},function(){i(e)})},clone:function(e){var t=JSON.stringify(e);return JSON.parse(t)},getClassByStyle:function(e){var t=[];for(var i in e){var n=g[i];if(n){var a=e[i];t.push(n+a)}}return t},css:function(e,t,i){if(t){var n=this.getClassByStyle(t);n.length>0&&e.addClass(n.join(" ")),i&&(t=this.processStyle(t)),e.css(t)}},simpleExtendObj:function(e,t){e=e||{},t=t||{};for(var i in t)e[i]=t[i];return e},processTransitionStyle:function(e){return{transition:e,"-webkit-transition":e}},processTransformStyle:function(e){return{transform:e,"-webkit-transform":e}},processTransitionTanformStyle:function(e,t){return{"-webkit-transition":e,"-webkit-transform":t}},addDay:function(e,t){return e=this.convertToDate(e),new Date(e.setDate(e.getDate()+t))},compareDate:function(e,t,i){return i=i||"yyyy-MM-dd",e=this.ConvertDateToStr(e,i),t=this.ConvertDateToStr(t,i),this.compareTime(e,t)},compareTime:function(e,t){return e=this.convertToDate(e),t=this.convertToDate(t),e>t?1:e-t==0?0:-1},deleteEmoji:function(e){return e.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,"")},copy:function(e,t){if(null===e||void 0===e||"object"!=typeof e)return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);t=t||new e.constructor;for(var i in e)t[i]=void 0===t[i]?this.copy(e[i],null):t[i];return t},extends:function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.baseConstructor=t,e.superClass=t.prototype},isEmail:function(e){return!!/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)},isMobile:function(e){if(!e)return"请输入座机号";var t=/^0\d{2,3}-?[2-9]\d{6,7}$/,i=/^0\d{2,3}-?[2-9]\d{6,7}-?\d{1,4}$/,n=/^\d{7,8}$/;return!!(t.test(e)||n.test(e)||i.test(e))},isPhone:function(e){return e?!!/(^0{0,1}1[3|4|5|6|7|8|9][0-9]{9}$)/.test(e):"请输入手机号"},isRealURL:function(e){return!!/(^(https?:\/\/)?(\w+\.)+[a-zA-Z])/.test(e)},addMonth:function(e,t){var i=t||new Date,n=i.getMonth(),a=i.getDate(),s=[31,28,31,30,31,30,31,31,30,31,30,31],r=i.getFullYear();(r%4==0&&r%100!=0||r%400==0)&&(s[1]=29),i.setMonth(n+e);var o=i.getDate();a===s[n]&&(o!==a?i.setDate(0):(i.setDate(1),i.setMonth(i.getMonth()+1),i.setDate(0)));var l=i.getFullYear(),c=i.getMonth()+1,p=i.getDate();return c<10&&(c="0"+c),p<10&&(p="0"+p),l+"-"+c+"-"+p},dateCalculate:function(e,t,i,n){switch(e){case"d ":"add"===n?i+=24*t*60*60*1e3:i-=24*t*60*60*1e3;break;case"h ":"add"===n?i+=60*t*60*1e3:i-=60*t*60*1e3;break;case"m ":"add"===n?i+=60*t*1e3:i-=60*t*1e3}return i},getQueryStringByName:function(e,t){var i=e.match(new RegExp("[?&]"+t+"=([^&]+)","i"));return null===i||i.length<1?"":i[1]}};return w}),define("app",["utils"],function(e){var t="http://localhost:8080/approve-client-adapter";return t="http://localhost:8080/approve-client-adapter",{init:function(e){e.start({host:t,version:"1.2.0",versionkey:"approveversionkey",feature:"<div style='text-align:left'>审批</div>",customerComponents:{ApproveSearchView:"./components/ApproveSearchView"},root:"waitmeapprove",baseSize:{width:375,height:667},beforeSendAjax:function(e){var t=e.pageviewInstance;e.data=e.data||{},e.data.token=t.params.token,e.xhrFields=!0},beforeGo:function(e){var t=e.pageviewInstance;e.params.token=t.params.token||""},onAjaxResponse:function(t){if(t.isSuccess&&t.data){var i=t.data.success;if(t.data.code=!0===i?0:500,"100010008"===t.data.code.toString()){e.showTip({text:"操作过期,两秒后会自动退出",duration:3500,clickNoHide:!0});try{window.setTimeout(function(){window.history.back(-1)},3500)}catch(e){}}}}})}}}),define("tip",["utils"],function(e){var t=function(e,t){var i=this;e=e||$(document.body),this.tipWrapper=t?$("<div class='yy-tip displayflex jc-center ai-center displaynone' style='position:absolute;left: 80px;transform: rotate(90deg)'></div>"):$("<div class='yy-tip displayflex jc-center ai-center displaynone'></div>"),this.textDom=$('<div class="yy-tip-text displaynone"></div>'),this.backCover=$('<div class="yy-tip-backcover displaynone"></div>'),this.backCover.bind("click",function(){i.clickBackCover()}),this.tipWrapper.append(this.textDom),e.append(this.tipWrapper).append(this.backCover),this.hideTimeoutId=null};return t.prototype={show:function(t){var i=this;this.textPos=t.textPos||"bottom","left"==this.textPos||"right"==this.textPos?this.tipWrapper.addClass("flex-h"):this.tipWrapper.addClass("flex-v");var n=t.pos||"center";this.config=t,this.hideTimeoutId&&window.clearTimeout(this.hideTimeoutId),t=t||{};var a=t.style;a&&this.tipWrapper.css(e.processStyle(a)),this._setText(t.text,t.textStyle),this._setIcon(t.font,t.iconStyle),this.config.withoutBackCover||this.backCover.removeClass("displaynone"),this.startClass="yy-tip-ani-"+n+"-start",this.tipWrapper.removeClass("displaynone").addClass(this.startClass),window.setTimeout(function(){i.endClass="yy-tip-ani-"+n+"-end",i.tipWrapper.addClass(i.endClass)},3),t.duration&&!isNaN(t.duration)&&(this.hideTimeoutId=window.setTimeout(function(){i.hide()},parseInt(t.duration)))},_setText:function(t,i){t?(this.textDom.removeClass("displaynone"),i&&this.textDom.css(e.processStyle(i)),this.textDom.html(t)):this.textDom.addClass("displaynone")},_setIcon:function(t,i){this.iconDom&&this.iconDom.remove();var n,a;t=t||"";var s=t.split("_");2==s.length?(n=s[0],a=s[1],this.iconDom=$('<i class="yy-tip-icon displayflex jc-center ai-center yy-icon-code displaynone" data-icon="&#x'+a+';"></i>'),i&&this.iconDom.css(e.processStyle(i)),this.iconDom.removeClass("displaynone"),this.iconDom.css({"font-family":n}),"top"==this.textPos||"left"==this.textPos?this.iconDom.appendTo(this.tipWrapper):this.iconDom.insertBefore(this.textDom)):this.icomDom&&this.iconDom.addClass("displaynone")},clickBackCover:function(){this.config.clickNoHide||(this.hideTimeoutId&&window.clearTimeout(this.hideTimeoutId),this.hide())},hide:function(){var e=this;this.tipWrapper.removeClass(this.endClass),window.setTimeout(function(){e.tipWrapper.addClass("displaynone").removeClass(e.startClass),e.tipWrapper.remove(),e.backCover.remove()},300),e.backCover.addClass("displaynone")}},t}),define("base",["utils","tip"],function(e,t){function i(e,t){if(!e)return null;for(var i=e,n=0,a=t.length;n<a;n++){if(!(i=i[t[n]])&&0!=i){i=null;break}}return i}var n=function(t){var i=this;this.pageview=t.$$pageview||this,this.loaderHtml="<div class='spinner center'><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div></div>",this.disabled=!1,this.parent=t.$$parent,this.datasource=t.$$datasource||[],this.rowInstance=t.$$rowInstance,t.ref&&(this.rowInstance?(this.rowInstance.refs=this.rowInstance.refs||{},this.rowInstance.refs[t.comKey]=this):this.pageview.refs[t.comKey]=this);var n=t.className||"";this.selectedClassName=t.selectedClassName,t.tagName=t.tagName||"DIV";var a=t.activeClassName?"data-activecn='"+t.activeClassName+"'":"";this.$el=$("<"+t.tagName+" "+a+" data-comname='"+t.comKey+"' class='"+n+"'></"+t.tagName+">"),t=this._processConfig(t),this.config=t,this.components={},"repeat"!=t.type&&"listview"!=t.type||(this.components=[]),t.comKey&&this.$el.addClass(t.comKey);var s=this.config.comKey+"_init";if("repeatitem"===t.type?s=this.parent.config.comKey+"_iteminit":"listrow"===t.type&&(s=this.parent.config.comKey+"_rowinit"),"pageview"===this.config.type){var r=this.config.children;if(r&&r instanceof Array)for(var o=0,l=r.length;o<l;o++){var c=r[o].components;if(c)for(var p in c){var d=e.copy(c[p]);for(var h in d)h.length>=5&&"STYLE"==h.substring(h.length-5).toUpperCase()&&(d[h]=this.processStyle(d[h],BaseSize));this.config.components[p]=d}}}if(this.pageview.plugin&&this.pageview.plugin[s]){var u=this.pageview.plugin[s];u&&u.call(this.pageview.plugin,this)}var f=t.style;if(t.noNeedSetStyle||f&&"pageview"!=t.type&&"segment"!=t.type&&e.css(this.$el,f),this.disabledClassName=t.disabledClassName||"yy-disabled",this.disabled&&this.setDisabled(!0),t.comKey){var g=t.comKey+"_click",m=i.pageview.plugin[g];m&&this.$el.bind("click",function(e){e.preventDefault(),e.stopPropagation(),!i.disabled&&m&&m.call(i.pageview.plugin,i,{e:e})});var y=t.comKey+"_tap",v=i.pageview.plugin[y];v&&this.$el.bind("singleTap",function(e){e.preventDefault(),e.stopPropagation(),!i.disabled&&v&&v.call(i.pageview.plugin,i,{e:e})})}};return n.prototype.setDisabled=function(e){this.disabled=e,this.disabled?this.$el.addClass(this.disabledClassName):this.$el.removeClass(this.disabledClassName)},n.prototype._processConfig=function(e){for(var t in e){var n=t.split("_");if(2==n.length&&"bind"==n[1]){var a=e[t],s=n[0],r=typeof a;if("string"==r)e[s]=i(this.datasource,a.split("."));else if("object"==r)for(var o in a){var l=o,c=i(this.datasource,a[o].split("."));e[s]=e[s]||{},e[s][l]=c}}}return e},n.prototype.selected=function(e){if(!e||!this.config.disableParentSelect){this.isSelected=!0,this.selectedClassName&&""!==this.selectedClassName&&this.$el.addClass(this.selectedClassName);for(var t in this.components)this.components[t].selected(!0)}},n.prototype.unSelected=function(e){if(!e||!this.config.disableParentSelect){this.isSelected=!1,this.selectedClassName&&""!==this.selectedClassName&&this.$el.removeClass(this.selectedClassName);for(var t in this.components)this.components[t].unSelected(!0)}},n.prototype.getUniqueKey=function(){return this.pageview.config.pageKey+""+this.config.comKey},n.prototype.showTip=function(e){e.horizontal?this.Tip=new t(this.$el,e.horizontal):this.Tip=new t(this.$el),this.Tip.show(e)},n.prototype._prepareComponent=function(t,i,n){var a=e.clone(this.pageview.config.components[t]),s=a.type,r=e.getComponentInstance(s);a.$$pageview=this.pageview,a.$$rowInstance=n,a.$$parent=this,a.comKey=t,a.$$datasource=i;var o=null;try{o=new r(a,null)}catch(e){console.log(e),console.log(a)}var l=t+"_didmount";if(this.pageview.plugin){var c=this.pageview.plugin[l];c&&c.call(this.pageview.plugin,o)}return this.pageview.componentsInitActions[t]&&(this.pageview.componentsInitActions[t](o),delete this.pageview.componentsInitActions[t]),o},n.prototype._initComponents=function(e,t,i,n){for(var a=0,s=e.root.length;a<s;a++){var r=e.root[a],o=this._prepareComponent(r,t,n);e.isContainer||"repeat"==e.type?(this.components.push=o,i(o)):"tabbarview"==e.type?(this.components[r]=o,i(o)):this.components[r]=o}return this.components},n.prototype.getClientRect=function(){return this.$el[0].getBoundingClientRect()},n.prototype.getComponentInstanceByComKey=function(e,t,i,n,a){var s=this;this.loadFiles([e],this.pageview||this,function(){var a=s._prepareComponent(e,t,i);n(a)},function(){a&&a()})},n.prototype.initLayout=function(t,i,n,a){var s=this;this.config.root&&this.config.root.length>0&&this.loadFiles(this.config.root,this.pageview||this,function(){if(i)s._initComponents(s.config,t,i,n);else{s._initComponents(s.config,t,null,n);for(var r=0,o=s.config.root.length;r<o;r++){var l=s.components[s.config.root[r]],c=s.$$childrenWrapper||s.$el;null===l&&(console.log(s.config.root[r]),console.log(s.config.root),console.log(s.components)),l&&("checklist"===l.config.type||"radiolist"===l.config.type?s.pageview.$el.append(l.$el):c.append(l.$el));var p;s.config.splitStyle&&s.config.root.length>1&&r!=s.config.root.length-1&&(p=$("<div></div>"),l.splitLine=p,e.css(p,s.config.splitStyle,!0),c.append(p))}}if(a&&a(),"pageview"==s.config.type){var d=s.plugin.onPageLoad;d&&d.call(s.plugin,s)}},function(){})},n.prototype.setBadge=function(t,i){if(!this.$$badge){this.$$badge=$("<div class='displayflex jc-center ai-center yy-badge displaynone'></div>"),i=i||{};var n=i.width||i.height||16;i["min-width"]=i.height=n,delete i.width,i=e.processStyle(i),i["border-radius"]=parseInt(i.height)/2+"px",e.css(this.$$badge,i),this.$el.append(this.$$badge)}t?this.$$badge.html(t).removeClass("displaynone"):this.$$badge.addClass("displaynone")},n.prototype.showLoading=function(t){if(t=t||{},this.loadingConfig=t,!this.$$loadingWrapper){t.timeout&&!isNaN(t.timeout)||(t.timeout=7e3),this.loadingtimeout=parseInt(t.timeout)||7e3;var i="displaynone yy-loading-bk displayflex yy-jc-center yy-ai-center ";t.style&&(t.style.alignItems||t.style["align-items"]||(i+="yy-ai-center")),this.$$loadingWrapper=$("<div class='"+i+"'></div>"),t.style&&e.css(this.$$loadingWrapper,t.style);var n=$("<div class='yy-loading-wrapper yy-fd-column displayflex yy-jc-center yy-ai-center'>"+this.loaderHtml+"</div>");t.horizontal&&(n=$("<div class='yy-loading-wrapper yy-fd-column displayflex yy-jc-center yy-ai-center yy-horizontal-loading'>"+this.loaderHtml+"</div>")),this.loadingText=$("<span class='yy-loading-text'></span>"),n.append(this.loadingText),this.$$loadingWrapper.append(n),this.$el.append(this.$$loadingWrapper)}this.loadingText.html(t.text||"正在努力加载"),this.startLoadingTimeout(t),this.$$loadingWrapper.removeClass("displaynone")},n.prototype.showLoadingError=function(){var e=this;if(this.$$loadingWrapper){if(this.loadingTimeId&&window.clearTimeout(this.loadingTimeId),!e.loadingConfig.reLoadCallBack)return void e.hideLoading(!0);e.loadingErrorWrapper||(e.loadingErrorWrapper=e._createErrorDom(function(){e.$$loadingWrapper.removeClass("yy-loading-wrapper-error"),e.loadingErrorWrapper.addClass("displaynone"),e.loadingTimeId=null,e.startLoadingTimeout(e.loadingConfig),e.loadingConfig.reLoadCallBack&&e.loadingConfig.reLoadCallBack()}),e.loadingErrorWrapper.appendTo(e.$$loadingWrapper)),e.$$loadingWrapper.addClass("yy-loading-wrapper-error"),e.loadingErrorWrapper.removeClass("displaynone")}},n.prototype.startLoadingTimeout=function(e){var t=this;this.loadingTimeId||(this.loadingTimeId=window.setTimeout(function(){t.hideLoading()},this.loadingtimeout))},n.prototype._createErrorDom=function(t){var i=e.getRealWidth(11),n=e.getRealWidth(20),a=$("<div style='height:100px' class='yy-loadmore-wrapper displayflex jc-center ai-center flex-h displaynone'></div>"),s=$("<i style='font-size:"+n+"px' class='yy-icommon yy-loadmore-erroricon'></i>"),r=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>网络异常,点击</span>"),o=$("<span style='font-size:"+i+"px' class='yy-loadmore-reload-babel'>重新加载</span>")
;return o.bind("click",function(){t()}),a.append(s).append(r).append(o),a},n.prototype.hideLoading=function(e){if(!1===e)return void this.showLoadingError();this.loadingTimeId&&(window.clearTimeout(this.loadingTimeId),this.loadingTimeId=null),this.$$loadingWrapper&&this.$$loadingWrapper.addClass("displaynone")},n.prototype.loadFiles=function(t,i,n,a){for(var s=t.length,r=0,o=0;o<s;o++)!function(t,s,o){var l=i.config.components[o];e.getComponentClass(l,function(e){(r+=1)==t&&n()},function(){a()})}(s,0,t[o])},n}),define("pageview",["utils","base"],function(e,t){function i(e){var t=this;if(this.refs={},this.dialogsBks={},this.dialogs={},this.componentsInitActions={},i.baseConstructor.call(this,e),this.viewpagerParams=e.viewpagerParams,e.root=e.root||[],this.params=e.$$params,this.showPageParams=e.showPageParams||{},this.prePageView=e.prePageView,this.pageManager=e.$$pageManager,this.config=e,this.innerPages={},this.innerPagesWrappers={},e.pluginClass)try{this._preparePlugin(e.pluginClass)}catch(e){console.log(e)}this.components={};var n=e.style;this.$el.addClass("yy-pageview displayflex"),this.showPageBackCover=$("<div role='showPageBackCover' class='yy-backcover displaynone'></div>"),this.innerWrapper=$("<div class='displayflex yy-page-inner'></div>"),this.$$childrenWrapper=this.innerWrapper,this.$el.append(this.innerWrapper).append(this.showPageBackCover),n&&this.innerWrapper.css(n),this.showPageBackCover.bind("click",function(){t.hideCurShowPage()}),this.initLayout()}var n={fromLeft1:{zIndex:5,left:"0",top:0,transform:"translate3d(-100%,0,0)","-webkit-transform":"translate3d(-100%,0,0)"},fromLeft2:{zIndex:101,left:"0",top:0,transform:"translate3d(-100%,0,0)","-webkit-transform":"translate3d(-100%,0,0)"},fromLeft3:{left:0,top:0,zIndex:5,transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"},fromRight1:{zIndex:5,right:"0",top:0,transform:"translate3d(100%,0,0)","-webkit-transform":"translate3d(100%,0,0)"},fromRight2:{zIndex:101,right:"0",top:0,transform:"translate3d(100%,0,0)","-webkit-transform":"translate3d(100%,0,0)"},fromRight3:{zIndex:5,right:0,top:0,transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"},opacity:{left:"0",top:0},fromBottom:{zIndex:101,left:"0",bottom:"0",transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)"}},a={fromLeft1:"yy-init-left",fromLeft2:"yy-init-left",fromLeft3:"yy-init-left",fromRight1:"yy-init-right",fromRight2:"yy-init-right",fromRight3:"yy-init-right",opacity:"yy-init-left",fromBottom:"yy-init-bottom"};return e.extends(i,t),i.prototype._preparePlugin=function(e){this.plugin=new e({pageview:this});var t=this.config.children;if(t&&t instanceof Array&&t.length>0)for(var i=0,n=t.length;i<n;i++){var a=t[i].pluginClass;if(a){var s=new a;this.plugin=$.extend(!0,this.plugin,s)}}},i.prototype.regeistPageDestory=function(){},i.prototype.destory=function(){this.$el.remove()},i.prototype.showDialog=function(e,t){var i=this;if(t=t||{},this.dialogs[e])return this.dialogs[e].addClass("yy-dialog-show"),this.dialogsBks[e].removeClass("displaynone"),void window.setTimeout(function(){i.dialogs[e].css({visibility:"visible"})},20);var n=t.datasource;this.getComponentInstanceByComKey(e,n,null,function(n){var a=$("<div style='visibility: hidden;' class='yy-dialog-out-wrap displayflex yy-ai-center yy-jc-center'></div>");t.zIndex&&a.css({zIndex:t.zIndex+1});var s=$("<div class='yy-dialog-inner-wrap'></div>");i.dialogs[e]=a,s.append(n.$el),a.append(s),a.appendTo(document.body);var r=$("<div class='yy-page-dialog-bk'></div>");t.zIndex&&r.css({zIndex:t.zIndex}),i.dialogsBks[e]=r,r.appendTo(document.body),window.setTimeout(function(){a.css({visibility:"visible"}),a.addClass("yy-dialog-show")},20)},function(e){})},i.prototype.hideDialog=function(e){var t=this;this.dialogsBks[e].addClass("displaynone"),this.dialogs[e].removeClass("yy-dialog-show"),window.setTimeout(function(){t.dialogs[e].css({visibility:"hidden"})},200)},i.prototype.ajax=function(t){t.pageviewInstance=this,e.ajax(t)},i.prototype.Enter=function(e,t){var i=this;if(this.$el[0].className=e,t){if(i.pageManager.getPageNameFromUrl()===i.config.pageKey){var n=i.plugin.onPageEnter;n&&n.call(i.plugin)}}else this.$el[0].addEventListener("webkitAnimationEnd",function(){if(i.pageManager.getPageNameFromUrl()===i.config.pageKey){var e=i.plugin.onPageEnter;e&&e.call(i.plugin)}})},i.prototype.bindShowPageEnterEvent=function(){var e=this;this.$el[0].parentNode.addEventListener("webkitTransitionEnd",function(){if(e.$$isshow){var t=e.plugin.onPageEnter;t&&t.call(e.plugin)}})},i.prototype.hideCurShowPage=function(){var t=this;if(this.pageManager.blur(),this.showpageInstance.showpageInstance)return this.showpageInstance.hideCurShowPage(),!0;if(this.showpage_wrapper){var i=this.showpageInstance.plugin.onPageBeforeLeave||this.showpageInstance.plugin.onPageClose;if(i){if(!1===i.call(this.showpageInstance.plugin))return!0}this.showpageInstance.$$isshow=!1;var s=this.showpage_wrapper.attr("data-mode");if(this.showPageBackCover.addClass("displaynone"),this.innerWrapper[0].className="displayflex yy-page-inner "+a[s]+"-im ",window.setTimeout(function(){t.innerWrapper.css(e.processTransitionTanformStyle("none","translate3d(0,0,0)"))},300),"fromLeft1"==s||"fromLeft2"==s)this.showpage_wrapper.css(e.processTransformStyle("translate3d(-100%,0,0)"));else if("fromRight1"==s||"fromRight2"==s)this.showpage_wrapper.css(e.processTransformStyle("translate3d(100%,0,0)"));else{var r=n[s]||{};"fromRight3"!=s&&"fromLeft3"!=s||(r.display="none"),this.showpage_wrapper.css(r)}}var o=this.plugin.onPageResume;return o&&o.call(this.plugin),this.showpage_wrapper=null,this.showpageInstance=null,!1},i.prototype.do=function(e,t){var i=this.refs[e];if(i)t(i);else{try{this.config.components[e].ref||console.error("请务必在"+e+"控件上设置ref:true")}catch(e){console.error(e)}this.componentsInitActions[e]=t}},i.prototype.delegate=function(e,t){this.do(e,t)},i.prototype.showLoadingProgressbar=function(){var e=this;this.loadingProgreessbar||(this.loadingProgreessbarWrapper=$("<div class='yy-loading-pbw displaynone'></div>"),this.loadingProgreessbar=$("<div class='yy-loading-pb'></div>"),this.loadingProgreessbarWrapper.append(this.loadingProgreessbar),this.loadingProgreessbarWrapper.appendTo(this.$el)),this.loadingProgreessbarWrapper.removeClass("displaynone"),window.setTimeout(function(){e.loadingProgreessbar.css({width:"90%"})},6)},i.prototype.hideLoadingProgressbar=function(){this.loadingProgreessbar&&(this.loadingProgreessbar.css({width:"0%"}),this.loadingProgreessbarWrapper.addClass("displaynone"))},i.prototype.close=function(){this.ownerPage&&this.ownerPage.hideCurShowPage()},i.prototype.showPage=function(t){if(t&&t.pageKey){this.pageManager.blur(),!1!==t.inRouter&&this.pageManager.regeistShowPageInRouter(this.config.pageKey);var i=this,a=t.mode||"fromLeft1";this.showpage_wrapper=this.innerPagesWrappers[t.pageKey],this.showpageInstance=this.innerPages[t.pageKey],this.showLoadingProgressbar(),!this.showpage_wrapper||void 0!==t.nocache&&t.nocache?this.pageview.pageManager.getPageConfigByPageKey(t.pageKey,function(s){var r=t.params||{};s.showPageParams=r;var o=i.pageview.pageManager.createPageView(s);o.$el.addClass("yy-pageview-show"),o.ownerPage=i,i.hideLoadingProgressbar(),i.showpageInstance=o,i.innerPages[t.pageKey]=o,i.showpage_wrapper=$("<div class='yy-showpage'></div>");var l=s.showPageStyle||{width:"100%",height:"100%"};l&&(delete l.top,delete l.right,delete l.left,delete l.bottom),i.showpage_wrapper.attr("data-mode",a);var c=l.width||"100%",p=l.height||"100%";l=l||{};var d=n[a]||n.fromLeft1;d=e.clone(d),i.showpage_wrapper.attr("data-width",c),i.showpage_wrapper.attr("data-height",p);var h=e.simpleExtendObj(l,d)||{};"fromLeft3"!==a&&"fromRight3"!==a||(h.display="block"),i.showpage_wrapper.css(h),i.innerPagesWrappers[t.pageKey]=i.showpage_wrapper,i.showpage_wrapper.append(o.$el),i.$el.append(i.showpage_wrapper),o.bindShowPageEnterEvent(),i._showpageAnimate(t,i.showpage_wrapper,o)},function(){}):(this.hideLoadingProgressbar(),"fromLeft3"!==a&&"fromRight3"!==a||this.showpage_wrapper.css({display:"block"}),this._showpageAnimate(t,this.showpage_wrapper,this.showpageInstance))}},i.prototype.goBack=function(e){this.pageManager.goBack(e)},i.prototype.go=function(e,t){t=t||{};var i=this.pageManager.appConfig.beforeGo;i&&i({params:t,pageviewInstance:this}),this.pageManager.go(e,t)},i.prototype.replaceGo=function(e,t){t=t||{};var i=this.pageManager.appConfig.beforeGo;i&&i({params:t,pageviewInstance:this}),this.pageManager.replaceGo(e,t)},i.prototype._showpageAnimate=function(t,i,n){var s=this;n.$$isshow=!0;var r=i.attr("data-width"),o=i.attr("data-mode");if(this.innerWrapper[0].className="displayflex yy-page-inner "+a[o],"fromLeft1"!=o&&"fromLeft2"!=o||(this.showPageBackCover.removeClass("displaynone").css({left:r,right:0}),window.setTimeout(function(){if("fromLeft1"==o){var t=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d("+r+",0,0)");t["box-shadow"]="0px 0px 13px 1px #929292",s.innerWrapper.css(t)}i.css(e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},12)),"fromLeft3"==o){this.showPageBackCover.removeClass("displaynone").css({left:r,right:0});var l=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d("+r+",0,0)");l["box-shadow"]="0px 0px 13px 1px #929292",window.setTimeout(function(){s.innerWrapper.css(l)},12)}if("fromRight1"!=o&&"fromRight2"!=o||(this.showPageBackCover.removeClass("displaynone").css({right:r,left:0}),window.setTimeout(function(){var t=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(-"+r+",0,0)");t["box-shadow"]="0px 0px 13px 1px #929292","fromRight1"==o&&s.innerWrapper.css(t),i.css(e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},12)),"fromRight3"==o){this.showPageBackCover.removeClass("displaynone").css({right:r,left:0});var l=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(-"+r+",0,0)");l["box-shadow"]="0px 0px 13px 1px #929292",window.setTimeout(function(){s.innerWrapper.css(l)},12)}if("fromBottom"==o){i.attr("data-height");this.showPageBackCover.removeClass("displaynone").css({left:"0",top:"0"}),window.setTimeout(function(){i.css(e.processTransitionTanformStyle("transform .2s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},12)}},i}),function(e,t){"function"==typeof define&&define.amd?define("$",[],function(){return t(e)}):t(e)}(this,function(e){var t=function(){function t(e){return null==e?String(e):q[X.call(e)]||"object"}function i(e){return"function"==t(e)}function n(e){return null!=e&&e==e.window}function a(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function s(e){return"object"==t(e)}function r(e){return s(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function o(e){var t=!!e&&"length"in e&&e.length,i=I.type(e);return"function"!=i&&!n(e)&&("array"==i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function l(e){return R.call(e,function(e){return null!=e})}function c(e){return e.length>0?I.fn.concat.apply([],e):e}function p(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function d(e){return e in A?A[e]:A[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function h(e,t){return"number"!=typeof t||N[p(e)]?t:t+"px"}function u(e){var t,i;return W[e]||(t=P.createElement(e),P.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==i&&(i="block"),W[e]=i),W[e]}function f(e){return"children"in e?L.call(e.children):I.map(e.childNodes,function(e){if(1==e.nodeType)return e})}function g(e,t){var i,n=e?e.length:0;for(i=0;i<n;i++)this[i]=e[i];this.length=n,this.selector=t||""}function m(e,t,i){for(S in t)i&&(r(t[S])||ee(t[S]))?(r(t[S])&&!r(e[S])&&(e[S]={}),ee(t[S])&&!ee(e[S])&&(e[S]=[]),m(e[S],t[S],i)):t[S]!==_&&(e[S]=t[S])}function y(e,t){return null==t?I(e):I(e).filter(t)}function v(e,t,n,a){return i(t)?t.call(e,n,a):t}function w(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function b(e,t){var i=e.className||"",n=i&&i.baseVal!==_;if(t===_)return n?i.baseVal:i;n?i.baseVal=t:e.className=t}function x(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?I.parseJSON(e):e):e}catch(t){return e}}function C(e,t){t(e);for(var i=0,n=e.childNodes.length;i<n;i++)C(e.childNodes[i],t)}var _,S,I,D,$,T,k=[],E=k.concat,R=k.filter,L=k.slice,P=e.document,W={},A={},N={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},M=/^\s*<(\w+|!)[^>]*>/,O=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,F=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,B=/^(?:body|html)$/i,z=/([A-Z])/g,j=["val","css","html","text","data","width","height","offset"],H=["after","prepend","before","append"],K=P.createElement("table"),U=P.createElement("tr"),V={tr:P.createElement("tbody"),tbody:K,thead:K,tfoot:K,td:U,th:U,"*":P.createElement("div")},G=/complete|loaded|interactive/,Y=/^[\w-]*$/,q={},X=q.toString,J={},Z=P.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},ee=Array.isArray||function(e){return e instanceof Array};return J.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var n,a=e.parentNode,s=!a;return s&&(a=Z).appendChild(e),n=~J.qsa(a,t).indexOf(e),s&&Z.removeChild(e),n},$=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},T=function(e){return R.call(e,function(t,i){return e.indexOf(t)==i})},J.fragment=function(e,t,i){var n,a,s;return O.test(e)&&(n=I(P.createElement(RegExp.$1))),n||(e.replace&&(e=e.replace(F,"<$1></$2>")),t===_&&(t=M.test(e)&&RegExp.$1),t in V||(t="*"),s=V[t],s.innerHTML=""+e,n=I.each(L.call(s.childNodes),function(){s.removeChild(this)})),r(i)&&(a=I(n),I.each(i,function(e,t){j.indexOf(e)>-1?a[e](t):a.attr(e,t)})),n},J.Z=function(e,t){return new g(e,t)},J.isZ=function(e){return e instanceof J.Z},J.init=function(e,t){var n;if(!e)return J.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&M.test(e))n=J.fragment(e,RegExp.$1,t),e=null;else{if(t!==_)return I(t).find(e);n=J.qsa(P,e)}else{if(i(e))return I(P).ready(e);if(J.isZ(e))return e;if(ee(e))n=l(e);else if(s(e))n=[e],e=null;else if(M.test(e))n=J.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==_)return I(t).find(e);n=J.qsa(P,e)}}return J.Z(n,e)},I=function(e,t){return J.init(e,t)},I.extend=function(e){var t,i=L.call(arguments,1);return"boolean"==typeof e&&(t=e,e=i.shift()),i.forEach(function(i){m(e,i,t)}),e},J.qsa=function(e,t){var i,n="#"==t[0],a=!n&&"."==t[0],s=n||a?t.slice(1):t,r=Y.test(s);return e.getElementById&&r&&n?(i=e.getElementById(s))?[i]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:L.call(r&&!n&&e.getElementsByClassName?a?e.getElementsByClassName(s):e.getElementsByTagName(t):e.querySelectorAll(t))},I.contains=P.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},I.type=t,I.isFunction=i,I.isWindow=n,I.isArray=ee,I.isPlainObject=r,I.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},I.isNumeric=function(e){var t=Number(e),i=typeof e;return null!=e&&"boolean"!=i&&("string"!=i||e.length)&&!isNaN(t)&&isFinite(t)||!1},I.inArray=function(e,t,i){return k.indexOf.call(t,e,i)},I.camelCase=$,I.trim=function(e){return null==e?"":String.prototype.trim.call(e)},I.uuid=0,I.support={},I.expr={},I.noop=function(){},I.map=function(e,t){var i,n,a,s=[];if(o(e))for(n=0;n<e.length;n++)null!=(i=t(e[n],n))&&s.push(i);else for(a in e)null!=(i=t(e[a],a))&&s.push(i);return c(s)},I.each=function(e,t){var i,n;if(o(e)){for(i=0;i<e.length;i++)if(!1===t.call(e[i],i,e[i]))return e}else for(n in e)if(!1===t.call(e[n],n,e[n]))return e;return e},I.grep=function(e,t){return R.call(e,t)},e.JSON&&(I.parseJSON=JSON.parse),I.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){q["[object "+t+"]"]=t.toLowerCase()}),I.fn={constructor:J.Z,length:0,forEach:k.forEach,reduce:k.reduce,push:k.push,sort:k.sort,splice:k.splice,indexOf:k.indexOf,concat:function(){var e,t,i=[];for(e=0;e<arguments.length;e++)t=arguments[e],i[e]=J.isZ(t)?t.toArray():t;return E.apply(J.isZ(this)?this.toArray():this,i)},map:function(e){return I(I.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return I(L.apply(this,arguments))},ready:function(e){return G.test(P.readyState)&&P.body?e(I):P.addEventListener("DOMContentLoaded",function(){e(I)},!1),this},get:function(e){return e===_?L.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return k.every.call(this,function(t,i){return!1!==e.call(t,i,t)}),this},filter:function(e){return i(e)?this.not(this.not(e)):I(R.call(this,function(t){return J.matches(t,e)}))},add:function(e,t){return I(T(this.concat(I(e,t))))},is:function(e){return this.length>0&&J.matches(this[0],e)},not:function(e){var t=[];if(i(e)&&e.call!==_)this.each(function(i){e.call(this,i)||t.push(this)});else{var n="string"==typeof e?this.filter(e):o(e)&&i(e.item)?L.call(e):I(e);this.forEach(function(e){n.indexOf(e)<0&&t.push(e)})}return I(t)},has:function(e){return this.filter(function(){return s(e)?I.contains(this,e):I(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!s(e)?e:I(e)},last:function(){var e=this[this.length-1];return e&&!s(e)?e:I(e)},find:function(e){var t=this;return e?"object"==typeof e?I(e).filter(function(){var e=this;return k.some.call(t,function(t){return I.contains(t,e)})}):1==this.length?I(J.qsa(this[0],e)):this.map(function(){return J.qsa(this,e)}):I()},closest:function(e,t){var i=[],n="object"==typeof e&&I(e);return this.each(function(s,r){for(;r&&!(n?n.indexOf(r)>=0:J.matches(r,e));)r=r!==t&&!a(r)&&r.parentNode;r&&i.indexOf(r)<0&&i.push(r)}),I(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=I.map(i,function(e){if((e=e.parentNode)&&!a(e)&&t.indexOf(e)<0)return t.push(e),e});return y(t,e)},parent:function(e){return y(T(this.pluck("parentNode")),e)},children:function(e){return y(this.map(function(){return f(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||L.call(this.childNodes)})},siblings:function(e){return y(this.map(function(e,t){return R.call(f(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return I.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=u(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=i(e);if(this[0]&&!t)var n=I(e).get(0),a=n.parentNode||this.length>1;return this.each(function(i){I(this).wrapAll(t?e.call(this,i):a?n.cloneNode(!0):n)})},wrapAll:function(e){if(this[0]){I(this[0]).before(e=I(e));for(var t;(t=e.children()).length;)e=t.first();I(e).append(this)}return this},wrapInner:function(e){var t=i(e);return this.each(function(i){var n=I(this),a=n.contents(),s=t?e.call(this,i):e;a.length?a.wrapAll(s):n.append(s)})},unwrap:function(){return this.parent().each(function(){I(this).replaceWith(I(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=I(this);(e===_?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return I(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return I(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var i=this.innerHTML;I(this).empty().append(v(this,e,t,i))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var i=v(this,e,t,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,t){var i;return"string"!=typeof e||1 in arguments?this.each(function(i){if(1===this.nodeType)if(s(e))for(S in e)w(this,S,e[S]);else w(this,e,v(this,t,i,this.getAttribute(e)))}):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(e))?i:_},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){w(this,e)},this)})},prop:function(e,t){return e=Q[e]||e,1 in arguments?this.each(function(i){this[e]=v(this,t,i,this[e])}):this[0]&&this[0][e]},removeProp:function(e){return e=Q[e]||e,this.each(function(){delete this[e]})},data:function(e,t){var i="data-"+e.replace(z,"-$1").toLowerCase(),n=1 in arguments?this.attr(i,t):this.attr(i);return null!==n?x(n):_},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(t){this.value=v(this,e,t,this.value)})):this[0]&&(this[0].multiple?I(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=I(this),n=v(this,t,e,i.offset()),a=i.offsetParent().offset(),s={top:n.top-a.top,left:n.left-a.left};"static"==i.css("position")&&(s.position="relative"),i.css(s)});if(!this.length)return null;if(P.documentElement!==this[0]&&!I.contains(P.documentElement,this[0]))return{top:0,left:0};var i=this[0].getBoundingClientRect();return{left:i.left+e.pageXOffset,top:i.top+e.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}},css:function(e,i){if(arguments.length<2){var n=this[0];if("string"==typeof e){if(!n)return;return n.style[$(e)]||getComputedStyle(n,"").getPropertyValue(e)}if(ee(e)){if(!n)return;var a={},s=getComputedStyle(n,"");return I.each(e,function(e,t){a[t]=n.style[$(t)]||s.getPropertyValue(t)}),a}}var r="";if("string"==t(e))i||0===i?r=p(e)+":"+h(e,i):this.each(function(){this.style.removeProperty(p(e))});else for(S in e)e[S]||0===e[S]?r+=p(S)+":"+h(S,e[S])+";":this.each(function(){this.style.removeProperty(p(S))});return this.each(function(){this.style.cssText+=";"+r})},index:function(e){return e?this.indexOf(I(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&k.some.call(this,function(e){return this.test(b(e))},d(e))},addClass:function(e){return e?this.each(function(t){if("className"in this){D=[];var i=b(this);v(this,e,t,i).split(/\s+/g).forEach(function(e){I(this).hasClass(e)||D.push(e)},this),D.length&&b(this,i+(i?" ":"")+D.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===_)return b(this,"");D=b(this),v(this,e,t,D).split(/\s+/g).forEach(function(e){D=D.replace(d(e)," ")}),b(this,D.trim())}})},toggleClass:function(e,t){return e?this.each(function(i){var n=I(this);v(this,e,i,b(this)).split(/\s+/g).forEach(function(e){(t===_?!n.hasClass(e):t)?n.addClass(e):n.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===_?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===_?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),n=B.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(I(e).css("margin-top"))||0,i.left-=parseFloat(I(e).css("margin-left"))||0,n.top+=parseFloat(I(t[0]).css("border-top-width"))||0,n.left+=parseFloat(I(t[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||P.body;e&&!B.test(e.nodeName)&&"static"==I(e).css("position");)e=e.offsetParent;return e})}},I.fn.detach=I.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});I.fn[e]=function(i){var s,r=this[0];return i===_?n(r)?r["inner"+t]:a(r)?r.documentElement["scroll"+t]:(s=this.offset())&&s[e]:this.each(function(t){r=I(this),r.css(e,v(this,i,t,r[e]()))})}}),H.forEach(function(i,n){var a=n%2;I.fn[i]=function(){var i,s,r=I.map(arguments,function(e){var n=[];return i=t(e),"array"==i?(e.forEach(function(e){return e.nodeType!==_?n.push(e):I.zepto.isZ(e)?n=n.concat(e.get()):void(n=n.concat(J.fragment(e)))}),n):"object"==i||null==e?e:J.fragment(e)}),o=this.length>1;return r.length<1?this:this.each(function(t,i){s=a?i:i.parentNode,i=0==n?i.nextSibling:1==n?i.firstChild:2==n?i:null;var l=I.contains(P.documentElement,s);r.forEach(function(t){if(o)t=t.cloneNode(!0);else if(!s)return I(t).remove();s.insertBefore(t,i),l&&C(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var i=t.ownerDocument?t.ownerDocument.defaultView:e;i.eval.call(i,t.innerHTML)}})})})},I.fn[a?i+"To":"insert"+(n?"Before":"After")]=function(e){return I(e)[i](this),this}}),J.Z.prototype=g.prototype=I.fn,J.uniq=T,J.deserializeValue=x,I.zepto=J,I}();return e.Zepto=t,void 0===e.$&&(e.$=t),function(t){function i(e){return e._zid||(e._zid=u++)}function n(e,t,n,r){if(t=a(t),t.ns)var o=s(t.ns);return(y[i(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||o.test(e.ns))&&(!n||i(e.fn)===i(n))&&(!r||e.sel==r)})}function a(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function s(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function r(e,t){return e.del&&!w&&e.e in b||!!t}function o(e){return x[e]||w&&b[e]||e}function l(e,n,s,l,c,d,u){var f=i(e),g=y[f]||(y[f]=[]);n.split(/\s/).forEach(function(i){if("ready"==i)return t(document).ready(s);var n=a(i);n.fn=s,n.sel=c,n.e in x&&(s=function(e){var i=e.relatedTarget;if(!i||i!==this&&!t.contains(this,i))return n.fn.apply(this,arguments)}),n.del=d;var f=d||s;n.proxy=function(t){if(t=p(t),!t.isImmediatePropagationStopped()){t.data=l;var i=f.apply(e,t._args==h?[t]:[t].concat(t._args));return!1===i&&(t.preventDefault(),t.stopPropagation()),i}},n.i=g.length,g.push(n),"addEventListener"in e&&e.addEventListener(o(n.e),n.proxy,r(n,u))})}function c(e,t,a,s,l){var c=i(e);(t||"").split(/\s/).forEach(function(t){n(e,t,a,s).forEach(function(t){delete y[c][t.i],"removeEventListener"in e&&e.removeEventListener(o(t.e),t.proxy,r(t,l))})})}function p(e,i){return!i&&e.isDefaultPrevented||(i||(i=e),t.each(I,function(t,n){var a=i[t];e[t]=function(){return this[n]=C,a&&a.apply(i,arguments)},e[n]=_}),e.timeStamp||(e.timeStamp=Date.now()),(i.defaultPrevented!==h?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=C)),e}function d(e){var t,i={originalEvent:e};for(t in e)S.test(t)||e[t]===h||(i[t]=e[t]);return p(i,e)}var h,u=1,f=Array.prototype.slice,g=t.isFunction,m=function(e){return"string"==typeof e},y={},v={},w="onfocusin"in e,b={focus:"focusin",blur:"focusout"},x={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:l,remove:c},t.proxy=function(e,n){var a=2 in arguments&&f.call(arguments,2);if(g(e)){var s=function(){return e.apply(n,a?a.concat(f.call(arguments)):arguments)};return s._zid=i(e),s}if(m(n))return a?(a.unshift(e[n],e),t.proxy.apply(null,a)):t.proxy(e[n],e);throw new TypeError("expected function")},t.fn.bind=function(e,t,i){return this.on(e,t,i)},t.fn.unbind=function(e,t){return this.off(e,t)},t.fn.one=function(e,t,i,n){return this.on(e,t,i,n,1)};var C=function(){return!0},_=function(){return!1},S=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,I={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,t,i){return this.on(t,e,i)},t.fn.undelegate=function(e,t,i){return this.off(t,e,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,n,a,s){var r,o,p=this;return e&&!m(e)?(t.each(e,function(e,t){p.on(e,i,n,t,s)}),p):(m(i)||g(a)||!1===a||(a=n,n=i,i=h),a!==h&&!1!==n||(a=n,n=h),!1===a&&(a=_),p.each(function(p,h){s&&(r=function(e){return c(h,e.type,a),a.apply(this,arguments)}),i&&(o=function(e){var n,s=t(e.target).closest(i,h).get(0);if(s&&s!==h)return n=t.extend(d(e),{currentTarget:s,liveFired:h}),(r||a).apply(s,[n].concat(f.call(arguments,1)))}),l(h,e,a,n,i,o||r)}))},t.fn.off=function(e,i,n){var a=this;return e&&!m(e)?(t.each(e,function(e,t){a.off(e,i,t)}),a):(m(i)||g(n)||!1===n||(n=i,i=h),!1===n&&(n=_),a.each(function(){c(this,e,n,i)}))},t.fn.trigger=function(e,i){return e=m(e)||t.isPlainObject(e)?t.Event(e):p(e),e._args=i,this.each(function(){e.type in b&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,i){var a,s;return this.each(function(r,o){a=d(m(e)?t.Event(e):e),a._args=i,a.target=o,t.each(n(o,e.type||e),function(e,t){if(s=t.proxy(a),a.isImmediatePropagationStopped())return!1})}),s},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(e,t){m(e)||(t=e,e=t.type);var i=document.createEvent(v[e]||"Events"),n=!0;if(t)for(var a in t)"bubbles"==a?n=!!t[a]:i[a]=t[a];return i.initEvent(e,n,!0),p(i)}}(t),function(t){function i(e,i,n){var a=t.Event(i);return t(e).trigger(a,n),!a.isDefaultPrevented()}function n(e,t,n,a){if(e.global)return i(t||b,n,a)}function a(e){e.global&&0==t.active++&&n(e,null,"ajaxStart")}function s(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function r(e,t){var i=t.context;if(!1===t.beforeSend.call(i,e,t)||!1===n(t,i,"ajaxBeforeSend",[e,t]))return!1;n(t,i,"ajaxSend",[e,t])}function o(e,t,i,a){var s=i.context;i.success.call(s,e,"success",t),a&&a.resolveWith(s,[e,"success",t]),n(i,s,"ajaxSuccess",[t,i,e]),c("success",t,i)}function l(e,t,i,a,s){var r=a.context;a.error.call(r,i,t,e),s&&s.rejectWith(r,[i,t,e]),n(a,r,"ajaxError",[i,a,e||t]),c(t,i,a)}function c(e,t,i){var a=i.context;i.complete.call(a,t,e),n(i,a,"ajaxComplete",[t,i]),s(i)}function p(e,t,i){if(i.dataFilter==d)return e;var n=i.context;return i.dataFilter.call(n,e,t)}function d(){}function h(e){return e&&(e=e.split(";",2)[0]),e&&(e==I?"html":e==S?"json":C.test(e)?"script":_.test(e)&&"xml")||"text"}function u(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function f(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=u(e.url,e.data),e.data=void 0)}function g(e,i,n,a){return t.isFunction(i)&&(a=n,n=i,i=void 0),t.isFunction(n)||(a=n,n=void 0),{url:e,data:i,success:n,dataType:a}}function m(e,i,n,a){var s,r=t.isArray(i),o=t.isPlainObject(i);t.each(i,function(i,l){s=t.type(l),a&&(i=n?a:a+"["+(o||"object"==s||"array"==s?i:"")+"]"),!a&&r?e.add(l.name,l.value):"array"==s||!n&&"object"==s?m(e,l,n,i):e.add(i,l)})}
var y,v,w=+new Date,b=e.document,x=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,C=/^(?:text|application)\/javascript/i,_=/^(?:text|application)\/xml/i,S="application/json",I="text/html",D=/^\s*$/,$=b.createElement("a");$.href=e.location.href,t.active=0,t.ajaxJSONP=function(i,n){if(!("type"in i))return t.ajax(i);var a,s,c=i.jsonpCallback,p=(t.isFunction(c)?c():c)||"Zepto"+w++,d=b.createElement("script"),h=e[p],u=function(e){t(d).triggerHandler("error",e||"abort")},f={abort:u};return n&&n.promise(f),t(d).on("load error",function(r,c){clearTimeout(s),t(d).off().remove(),"error"!=r.type&&a?o(a[0],f,i,n):l(null,c||"error",f,i,n),e[p]=h,a&&t.isFunction(h)&&h(a[0]),h=a=void 0}),!1===r(f,i)?(u("abort"),f):(e[p]=function(){a=arguments},d.src=i.url.replace(/\?(.+)=\?/,"?$1="+p),b.head.appendChild(d),i.timeout>0&&(s=setTimeout(function(){u("timeout")},i.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:d,success:d,error:d,complete:d,context:null,global:!0,xhr:function(){return new e.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:S,xml:"application/xml, text/xml",html:I,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:d},t.ajax=function(i){var n,s,c=t.extend({},i||{}),g=t.Deferred&&t.Deferred();for(y in t.ajaxSettings)void 0===c[y]&&(c[y]=t.ajaxSettings[y]);a(c),c.crossDomain||(n=b.createElement("a"),n.href=c.url,n.href=n.href,c.crossDomain=$.protocol+"//"+$.host!=n.protocol+"//"+n.host),c.url||(c.url=e.location.toString()),(s=c.url.indexOf("#"))>-1&&(c.url=c.url.slice(0,s)),f(c);var m=c.dataType,w=/\?.+=\?/.test(c.url);if(w&&(m="jsonp"),!1!==c.cache&&(i&&!0===i.cache||"script"!=m&&"jsonp"!=m)||(c.url=u(c.url,"_="+Date.now())),"jsonp"==m)return w||(c.url=u(c.url,c.jsonp?c.jsonp+"=?":!1===c.jsonp?"":"callback=?")),t.ajaxJSONP(c,g);var x,C=c.accepts[m],_={},S=function(e,t){_[e.toLowerCase()]=[e,t]},I=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:e.location.protocol,T=c.xhr(),k=T.setRequestHeader;if(g&&g.promise(T),c.crossDomain||S("X-Requested-With","XMLHttpRequest"),S("Accept",C||"*/*"),(C=c.mimeType||C)&&(C.indexOf(",")>-1&&(C=C.split(",",2)[0]),T.overrideMimeType&&T.overrideMimeType(C)),(c.contentType||!1!==c.contentType&&c.data&&"GET"!=c.type.toUpperCase())&&S("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.language&&S("Accept-Language",c.language),c.headers)for(v in c.headers)S(v,c.headers[v]);if(T.setRequestHeader=S,T.onreadystatechange=function(){if(4==T.readyState){T.onreadystatechange=d,clearTimeout(x);var e,i=!1;if(T.status>=200&&T.status<300||304==T.status||0==T.status&&"file:"==I){if(m=m||h(c.mimeType||T.getResponseHeader("content-type")),"arraybuffer"==T.responseType||"blob"==T.responseType)e=T.response;else{e=T.responseText;try{e=p(e,m,c),"script"==m?(0,eval)(e):"xml"==m?e=T.responseXML:"json"==m&&(e=D.test(e)?null:t.parseJSON(e))}catch(e){i=e}if(i)return l(i,"parsererror",T,c,g)}o(e,T,c,g)}else l(T.statusText||null,T.status?"error":"abort",T,c,g)}},!1===r(T,c))return T.abort(),l(null,"abort",T,c,g),T;var E=!("async"in c)||c.async;if(T.open(c.type,c.url,E,c.username,c.password),c.xhrFields)for(v in c.xhrFields)T[v]=c.xhrFields[v];for(v in _)k.apply(T,_[v]);return c.timeout>0&&(x=setTimeout(function(){T.onreadystatechange=d,T.abort(),l(null,"timeout",T,c,g)},c.timeout)),T.send(c.data?c.data:null),T},t.get=function(){return t.ajax(g.apply(null,arguments))},t.post=function(){var e=g.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=g.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,n){if(!this.length)return this;var a,s=this,r=e.split(/\s/),o=g(e,i,n),l=o.success;return r.length>1&&(o.url=r[0],a=r[1]),o.success=function(e){s.html(a?t("<div>").html(e.replace(x,"")).find(a):e),l&&l.apply(s,arguments)},t.ajax(o),this};var T=encodeURIComponent;t.param=function(e,i){var n=[];return n.add=function(e,i){t.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(T(e)+"="+T(i))},m(n,e,i),n.join("&").replace(/%20/g,"+")}}(t),function(e){e.fn.serializeArray=function(){var t,i,n=[],a=function(e){if(e.forEach)return e.forEach(a);n.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,function(n,s){i=s.type,t=s.name,t&&"fieldset"!=s.nodeName.toLowerCase()&&!s.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||s.checked)&&a(e(s).val())}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var i=e.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(t),function(){try{getComputedStyle(void 0)}catch(i){var t=getComputedStyle;e.getComputedStyle=function(e,i){try{return t(e,i)}catch(e){return null}}}}(),function(t){function i(e,t,i,n){return Math.abs(e-t)>=Math.abs(i-n)?e-t>0?"Left":"Right":i-n>0?"Up":"Down"}function n(){d=null,u.last&&(u.el.trigger("longTap"),u={})}function a(){d&&clearTimeout(d),d=null}function s(){l&&clearTimeout(l),c&&clearTimeout(c),p&&clearTimeout(p),d&&clearTimeout(d),l=c=p=d=null,u={}}function r(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function o(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var l,c,p,d,h,u={};t(document).ready(function(){var f,g,m,y,v=0,w=0;"MSGesture"in e&&(h=new MSGesture,h.target=document.body),t(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(u.el.trigger("swipe"),u.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(e){(y=o(e,"down"))&&!r(e)||(m=y?e:e.touches[0],e.touches&&1===e.touches.length&&u.x2&&(u.x2=void 0,u.y2=void 0),f=Date.now(),g=f-(u.last||f),u.el=t("tagName"in m.target?m.target:m.target.parentNode),l&&clearTimeout(l),u.x1=m.pageX,u.y1=m.pageY,g>0&&g<=250&&(u.isDoubleTap=!0),u.last=f,d=setTimeout(n,750),h&&y&&h.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(y=o(e,"move"))&&!r(e)||(m=y?e:e.touches[0],a(),u.x2=m.pageX,u.y2=m.pageY,v+=Math.abs(u.x1-u.x2),w+=Math.abs(u.y1-u.y2))}).on("touchend MSPointerUp pointerup",function(e){(y=o(e,"up"))&&!r(e)||(a(),u.x2&&Math.abs(u.x1-u.x2)>30||u.y2&&Math.abs(u.y1-u.y2)>30?p=setTimeout(function(){u.el&&(u.el.trigger("swipe"),u.el.trigger("swipe"+i(u.x1,u.x2,u.y1,u.y2))),u={}},0):"last"in u&&(v<30&&w<30?c=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=s,u.el&&u.el.trigger(e),u.isDoubleTap?(u.el&&u.el.trigger("doubleTap"),u={}):l=setTimeout(function(){l=null,u.el&&u.el.trigger("singleTap"),u={}},250)},0):u={}),v=w=0)}).on("touchcancel MSPointerCancel pointercancel",s),t(e).on("scroll",s)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(t),t}),define("pm",["utils","pageview","$","tip"],function(e,t,i,n){function a(){var e=this;this.pages={},this.isForward=!0,this.isInit=!0,this.pagekeySeed=0,this.isPrevent=!1,this.$el=i("<div class='yy-root-view'></div>"),/iphone/gi.test(navigator.userAgent)&&812===screen.height&&375===screen.width&&this.$el.addClass("yy-iosx-height"),this.$el.appendTo(document.body),window.onhashchange=function(){e.hashChange()};var t=null,n=null;i(document.body).bind("touchstart",function(e){for(t=e.target,n=t.getAttribute("data-activecn");t&&!n&&"BODY"!=t.tagName.toUpperCase()&&(t=t.parentNode,!(n=t.getAttribute("data-activecn"))););t&&n&&i(t).addClass(n)}),i(document.body).bind("touchend",function(){t&&n&&i(t).removeClass(n),t=null})}var s=!1,r=!1,o=!1;return a.prototype={blur:function(){document.activeElement&&document.activeElement.blur()},showTip:function(e){this.Tip=new n(this.$el),this.Tip.show(e)},start:function(t){e.appConfig=t,this.appConfig=t,e.customerComponents=t.customerComponents||{},t.baseSize=t.baseSize||{width:375,height:667},e.baseSize.width=t.baseSize.width,e.baseSize.height=t.baseSize.height,this.config=t;var i=this.getPageNameFromUrl();if(i){this.hashChange();var n=i.split("$$");2==n.length&&(this.pagekeySeed=parseInt(n[1]))}else this.go(t.root,this.getParamsFromUrl())},showPageKeyDict:{},regeistShowPageInRouter:function(e){this.showPageKeyDict[e]=!0},preventHasChange:function(){o=!0},hashChange:function(){var e=this.getPageNameFromUrl(),t=this.pages[this.fromPage],i=this;if(s)return s=!1,void(this.firstLoadToChangeHash=!1);if(!0===o)return void(o=!1);if(this.isInit&&e===this.appConfig.root&&(this.firstLoadToChangeHash=!0),!this.isForward&&t&&!0===this.showPageKeyDict[this.fromPage]&&t.showpage_wrapper){if(!t.hideCurShowPage()){delete this.showPageKeyDict[this.fromPage];var n=t.plugin.onPageResume;n&&n.call(t.plugin,t,{isForward:!1})}return s=!0,void window.history.go(1)}if(t){var a=t.plugin.onPageBeforeLeave;if(a){if(!1===a.call(t.plugin,t,{isForward:this.isForward}))return s=!0,void window.history.go(1)}}if(this.config.routerChange){if(!1===this.config.routerChange({fromPage:this.fromPage,toPage:e,isForward:this.isForward,params:this.getParamsFromUrl()}))return s=!0,void window.history.go(1)}var l=this.pages[e];if(t&&!l&&t.showLoadingProgressbar(),this.blur(),this._renderNextPage(e,this.fromPage,this.isForward,t,function(t,n,a){n?(r&&(r=!1,i.pages[t].destory(),delete i.pages[t]),i.fromPage=e):window.setTimeout(function(){t&&i.pages[t]&&(i.pages[t].destory(),delete i.pages[t]),i.fromPage=e},300)},function(e){s=!0,window.history.go(-1),e&&e.hideLoadingProgressbar()}),this.firstLoadToChangeHash){var c=this.getParamsFromUrl()||{};c._r=(new Date).valueOf(),this.go(this.appConfig.root,c),s=!0}},_renderNextPage:function(e,t,i,n,a,s){var r=this,o=this.pages[e],l="yy-pageview displayflex "+(i?"left-out":"right-out");if(n&&n.hideLoadingProgressbar(),o){if(!this.isForward){o.$el[0].className="yy-pageview displayflex left-in";var c=o.plugin.onPageResume;c&&c.call(o.plugin,o,{isForward:!1})}n&&(n.$el[0].className=l),a(t,i,n),this.isForward=!1}else r.getPageConfigByPageKey(e,function(s){s.prePageView=i?n:null;var o=r.createPageView(s);r.pages[e]=o,r.$el.append(o.$el),r.isInit?(r.isForward=!1,o.Enter("yy-pageview displayflex yy-pageview-show",r.isInit),r.isInit=!1):window.setTimeout(function(){o.Enter("yy-pageview displayflex "+(r.isForward?"right-in":"left-in"),r.isInit),n&&(n.$el[0].className=l),r.isForward=!1},40),a(t,i,n)},function(e){s&&s(n)})},createPageView:function(e){return new t(e)},getPageNameFromUrl:function(){var e=window.location.hash.split("#"),t=e[1];return t?t.split("?")[0]:this.rootPageKey},getParamsStrFromUrl:function(){var e=window.location.href.split("?"),t=e[e.length-1];return t?t.split("#")[0]:null},getParamsFromUrl:function(){var e=this.getParamsStrFromUrl();if(!e)return null;for(var t={},i=e.split("&"),n=0,a=i.length;n<a;n++){var s=i[n].split("=");if(2==s.length)t=t||{},t[s[0]]=s[1];else if(s.length>2){var r=s.shift();t[r]=s.join("=")}}return t},tabSeleced:function(e,t){t||(s=!0);var i=this.getParamsFromUrl()||{};i.$$pn=e;var n=[];for(var a in i)n.push(a+"="+i[a]);var r=this.getPageNameFromUrl();n.length>0?location.replace(location.href.split("#")[0]+"#"+r+"?"+n.join("&")):location.replace(location.href.split("#")[0]+"#"+r)},goBack:function(e){var t=e||-1;this.isForward=!1,window.history.go(t)},go:function(e,t){this.isForward=!0,s=!1,this.isInit&&(this.rootPageKey=e),t=t||{};var i=[];for(var n in t)i.push(n+"="+t[n]);e=this._getUniquePageKey(e),i.length>0?location.hash=e+"?"+i.join("&"):location.hash=e},replaceGo:function(e,t){this.isForward=!0,s=!1,this.isInit&&(this.rootPageKey=e),t=t||{};var i=[];for(var n in t)i.push(n+"="+t[n]);e=this._getUniquePageKey(e),r=!0,i.length>0?location.replace(location.href.split("#")[0]+"#"+e+"?"+i.join("&")):location.replace(location.href.split("#")[0]+"#"+e)},_getUniquePageKey:function(e){var t=!1;for(var i in this.pages){if(i.split("$$")[0]==e){this.pagekeySeed+=1,t=!0;break}}return t?e+"$$"+this.pagekeySeed:e},_getPageConfigSuccess:function(t,i,n){i=e.copy(i),i.type="pageview",i.pageKey=t,i.$$params=this.getParamsFromUrl(),i.$$pageManager=this,n(i)},getPageConfigByPageKey:function(t,i,n){var a=this,s="./pages/"+t.split("$$")[0],r=e.getPageConfigByPagePath(s);if(r)return void this._getPageConfigSuccess(t,r,i);require([s],function(n){n=e.setPageConfigByPagePath(s,n),a._getPageConfigSuccess(t,n,i)},function(e){console.error(e),n&&n(t)})}},new a}),require.config({waitSeconds:0,baseUrl:"./",shim:{$:{exports:"zepto"}},paths:{$:"../../libs/zepto",md5:"../../libs/md5",utils:"../../js/utils",base:"../../components/base",pageview:"../../components/pageview",pm:"../../js/pageViewManager",swiper:"../../components/swiper",calendar:"../../../components/calendar",calendarpicker:"../../../components/calendarpicker",tip:"../../components/tip"}}),require(["app","pm","$"],function(e,t,i){e.init||console.error("app.js 未提供init方法"),e.init(t)}),define("../../js/main",function(){}),define("../../components/base",["utils","tip"],function(e,t){function i(e,t){if(!e)return null;for(var i=e,n=0,a=t.length;n<a;n++){if(!(i=i[t[n]])&&0!=i){i=null;break}}return i}var n=function(t){var i=this;this.pageview=t.$$pageview||this,this.loaderHtml="<div class='spinner center'><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div></div>",this.disabled=!1,this.parent=t.$$parent,this.datasource=t.$$datasource||[],this.rowInstance=t.$$rowInstance,t.ref&&(this.rowInstance?(this.rowInstance.refs=this.rowInstance.refs||{},this.rowInstance.refs[t.comKey]=this):this.pageview.refs[t.comKey]=this);var n=t.className||"";this.selectedClassName=t.selectedClassName,t.tagName=t.tagName||"DIV";var a=t.activeClassName?"data-activecn='"+t.activeClassName+"'":"";this.$el=$("<"+t.tagName+" "+a+" data-comname='"+t.comKey+"' class='"+n+"'></"+t.tagName+">"),t=this._processConfig(t),this.config=t,this.components={},"repeat"!=t.type&&"listview"!=t.type||(this.components=[]),t.comKey&&this.$el.addClass(t.comKey);var s=this.config.comKey+"_init";if("repeatitem"===t.type?s=this.parent.config.comKey+"_iteminit":"listrow"===t.type&&(s=this.parent.config.comKey+"_rowinit"),"pageview"===this.config.type){var r=this.config.children;if(r&&r instanceof Array)for(var o=0,l=r.length;o<l;o++){var c=r[o].components;if(c)for(var p in c){var d=e.copy(c[p]);for(var h in d)h.length>=5&&"STYLE"==h.substring(h.length-5).toUpperCase()&&(d[h]=this.processStyle(d[h],BaseSize));this.config.components[p]=d}}}if(this.pageview.plugin&&this.pageview.plugin[s]){var u=this.pageview.plugin[s];u&&u.call(this.pageview.plugin,this)}var f=t.style;if(t.noNeedSetStyle||f&&"pageview"!=t.type&&"segment"!=t.type&&e.css(this.$el,f),this.disabledClassName=t.disabledClassName||"yy-disabled",this.disabled&&this.setDisabled(!0),t.comKey){var g=t.comKey+"_click",m=i.pageview.plugin[g];m&&this.$el.bind("click",function(e){e.preventDefault(),e.stopPropagation(),!i.disabled&&m&&m.call(i.pageview.plugin,i,{e:e})});var y=t.comKey+"_tap",v=i.pageview.plugin[y];v&&this.$el.bind("singleTap",function(e){e.preventDefault(),e.stopPropagation(),!i.disabled&&v&&v.call(i.pageview.plugin,i,{e:e})})}};return n.prototype.setDisabled=function(e){this.disabled=e,this.disabled?this.$el.addClass(this.disabledClassName):this.$el.removeClass(this.disabledClassName)},n.prototype._processConfig=function(e){for(var t in e){var n=t.split("_");if(2==n.length&&"bind"==n[1]){var a=e[t],s=n[0],r=typeof a;if("string"==r)e[s]=i(this.datasource,a.split("."));else if("object"==r)for(var o in a){var l=o,c=i(this.datasource,a[o].split("."));e[s]=e[s]||{},e[s][l]=c}}}return e},n.prototype.selected=function(e){if(!e||!this.config.disableParentSelect){this.isSelected=!0,this.selectedClassName&&""!==this.selectedClassName&&this.$el.addClass(this.selectedClassName);for(var t in this.components)this.components[t].selected(!0)}},n.prototype.unSelected=function(e){if(!e||!this.config.disableParentSelect){this.isSelected=!1,this.selectedClassName&&""!==this.selectedClassName&&this.$el.removeClass(this.selectedClassName);for(var t in this.components)this.components[t].unSelected(!0)}},n.prototype.getUniqueKey=function(){return this.pageview.config.pageKey+""+this.config.comKey},n.prototype.showTip=function(e){e.horizontal?this.Tip=new t(this.$el,e.horizontal):this.Tip=new t(this.$el),this.Tip.show(e)},n.prototype._prepareComponent=function(t,i,n){var a=e.clone(this.pageview.config.components[t]),s=a.type,r=e.getComponentInstance(s);a.$$pageview=this.pageview,a.$$rowInstance=n,a.$$parent=this,a.comKey=t,a.$$datasource=i;var o=null;try{o=new r(a,null)}catch(e){console.log(e),console.log(a)}var l=t+"_didmount";if(this.pageview.plugin){var c=this.pageview.plugin[l];c&&c.call(this.pageview.plugin,o)}return this.pageview.componentsInitActions[t]&&(this.pageview.componentsInitActions[t](o),delete this.pageview.componentsInitActions[t]),o},n.prototype._initComponents=function(e,t,i,n){for(var a=0,s=e.root.length;a<s;a++){var r=e.root[a],o=this._prepareComponent(r,t,n);e.isContainer||"repeat"==e.type?(this.components.push=o,i(o)):"tabbarview"==e.type?(this.components[r]=o,i(o)):this.components[r]=o}return this.components},n.prototype.getClientRect=function(){return this.$el[0].getBoundingClientRect()},n.prototype.getComponentInstanceByComKey=function(e,t,i,n,a){var s=this;this.loadFiles([e],this.pageview||this,function(){var a=s._prepareComponent(e,t,i);n(a)},function(){a&&a()})},n.prototype.initLayout=function(t,i,n,a){var s=this;this.config.root&&this.config.root.length>0&&this.loadFiles(this.config.root,this.pageview||this,function(){if(i)s._initComponents(s.config,t,i,n);else{s._initComponents(s.config,t,null,n);for(var r=0,o=s.config.root.length;r<o;r++){var l=s.components[s.config.root[r]],c=s.$$childrenWrapper||s.$el;null===l&&(console.log(s.config.root[r]),console.log(s.config.root),console.log(s.components)),l&&("checklist"===l.config.type||"radiolist"===l.config.type?s.pageview.$el.append(l.$el):c.append(l.$el));var p;s.config.splitStyle&&s.config.root.length>1&&r!=s.config.root.length-1&&(p=$("<div></div>"),l.splitLine=p,e.css(p,s.config.splitStyle,!0),c.append(p))}}if(a&&a(),"pageview"==s.config.type){var d=s.plugin.onPageLoad;d&&d.call(s.plugin,s)}},function(){})},n.prototype.setBadge=function(t,i){if(!this.$$badge){this.$$badge=$("<div class='displayflex jc-center ai-center yy-badge displaynone'></div>"),i=i||{};var n=i.width||i.height||16;i["min-width"]=i.height=n,delete i.width,i=e.processStyle(i),i["border-radius"]=parseInt(i.height)/2+"px",e.css(this.$$badge,i),this.$el.append(this.$$badge)}t?this.$$badge.html(t).removeClass("displaynone"):this.$$badge.addClass("displaynone")},n.prototype.showLoading=function(t){if(t=t||{},this.loadingConfig=t,!this.$$loadingWrapper){t.timeout&&!isNaN(t.timeout)||(t.timeout=7e3),this.loadingtimeout=parseInt(t.timeout)||7e3;var i="displaynone yy-loading-bk displayflex yy-jc-center yy-ai-center ";t.style&&(t.style.alignItems||t.style["align-items"]||(i+="yy-ai-center")),this.$$loadingWrapper=$("<div class='"+i+"'></div>"),t.style&&e.css(this.$$loadingWrapper,t.style);var n=$("<div class='yy-loading-wrapper yy-fd-column displayflex yy-jc-center yy-ai-center'>"+this.loaderHtml+"</div>");t.horizontal&&(n=$("<div class='yy-loading-wrapper yy-fd-column displayflex yy-jc-center yy-ai-center yy-horizontal-loading'>"+this.loaderHtml+"</div>")),this.loadingText=$("<span class='yy-loading-text'></span>"),n.append(this.loadingText),this.$$loadingWrapper.append(n),this.$el.append(this.$$loadingWrapper)}this.loadingText.html(t.text||"正在努力加载"),this.startLoadingTimeout(t),this.$$loadingWrapper.removeClass("displaynone")},n.prototype.showLoadingError=function(){var e=this;if(this.$$loadingWrapper){if(this.loadingTimeId&&window.clearTimeout(this.loadingTimeId),!e.loadingConfig.reLoadCallBack)return void e.hideLoading(!0);e.loadingErrorWrapper||(e.loadingErrorWrapper=e._createErrorDom(function(){e.$$loadingWrapper.removeClass("yy-loading-wrapper-error"),e.loadingErrorWrapper.addClass("displaynone"),e.loadingTimeId=null,e.startLoadingTimeout(e.loadingConfig),e.loadingConfig.reLoadCallBack&&e.loadingConfig.reLoadCallBack()}),e.loadingErrorWrapper.appendTo(e.$$loadingWrapper)),e.$$loadingWrapper.addClass("yy-loading-wrapper-error"),e.loadingErrorWrapper.removeClass("displaynone")}},n.prototype.startLoadingTimeout=function(e){var t=this;this.loadingTimeId||(this.loadingTimeId=window.setTimeout(function(){t.hideLoading()},this.loadingtimeout))},n.prototype._createErrorDom=function(t){var i=e.getRealWidth(11),n=e.getRealWidth(20),a=$("<div style='height:100px' class='yy-loadmore-wrapper displayflex jc-center ai-center flex-h displaynone'></div>"),s=$("<i style='font-size:"+n+"px' class='yy-icommon yy-loadmore-erroricon'></i>"),r=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>网络异常,点击</span>"),o=$("<span style='font-size:"+i+"px' class='yy-loadmore-reload-babel'>重新加载</span>");return o.bind("click",function(){t()}),a.append(s).append(r).append(o),a},n.prototype.hideLoading=function(e){if(!1===e)return void this.showLoadingError();this.loadingTimeId&&(window.clearTimeout(this.loadingTimeId),this.loadingTimeId=null),this.$$loadingWrapper&&this.$$loadingWrapper.addClass("displaynone")},n.prototype.loadFiles=function(t,i,n,a){for(var s=t.length,r=0,o=0;o<s;o++)!function(t,s,o){var l=i.config.components[o];e.getComponentClass(l,function(e){(r+=1)==t&&n()},function(){a()})}(s,0,t[o])},n}),define("../../components/button",["utils","base"],function(e,t){var i=function(e){i.baseConstructor.call(this,e);var t=e.text||e.title||"按钮",n=e.mode||"1",a="displayflex yy-btn yy-btn-"+n;this.$el.addClass(a),this.$el.html(t)};return e.extends(i,t),i}),define("swiper",["utils","base"],function(e,t){var i=function(e){this.config=e,this.$el=$("<div style='"+e.style+"' class='yy-swiper-item-wrapper'></div>")};i.prototype={css:function(t){e.css(this.$el,t)}};var n=function(t){this.config=t||{},this.$el=$("<div class='yy-swiper-wrapper flex-1'></div>"),this.itemWrappers=[],this.posArr=[0,1,2],this.limit=e.getRealWidth(90),this.minOffsetX=t.minOffsetX||0,this.tanKeys=e.getTransitionKeys(),this.initLayout(),this.direction="h",this.config.init&&this.config.init(this)};return n.prototype={_posArrGoNext:function(){var e=this.posArr[0];this.posArr[0]=this.posArr[1],this.posArr[1]=this.posArr[2],this.posArr[2]=e},_resetPosArr:function(){this.posArr=[0,1,2]},_posArrGoPre:function(){var e=this.posArr[2];this.posArr[2]=this.posArr[1],this.posArr[1]=this.posArr[0],this.posArr[0]=e},initLayout:function(){var t=this;this.initPos=[0-e.viewport.width,0,e.viewport.width];for(var n=0;n<3;n++){var a=this.tanKeys.transform+":translate3d("+this.initPos[n]+"px,0,0)",s=new i({style:a});this.itemWrappers.push(s),this.config.initItem&&this.config.initItem(s,n),this.$el.append(s.$el)}var r,o,l;t.isIntransition=!1,this.$el.bind("touchstart",function(e){l=t.isIntransition,t.isIntransition||(r=e.touches[0].pageX)}),this.$el.bind("touchmove",function(e){if(!t.isIntransition&&!l){var i=e.touches[0];o=i.pageX-r,"h"===t.direction&&Math.abs(o)>4&&(e.preventDefault(),e.stopPropagation()),t.setPos("move",o)}}),this.$el.bind("touchend",function(e){if(!t.isIntransition&&!l&&o&&0!=o){if(Math.abs(o)<t.limit)return t.setPos(),void(t.isIntransition=!1);o>0?t.goPre():t.goNext(),o=0}})},transitionEnd:function(e){this.isIntransition=!1},goPre:function(){if(this.config.beforeGoPre){if(!1===this.config.beforeGoPre())return this.setPos(),void(this.isIntransition=!1)}var e=this;this.isIntransition=!0,this._posArrGoPre(),this.setPos("gopre"),this.config.onChange&&this.config.onChange({swiper:this,action:"gopre",itemWrapper:this.itemWrappers[this.posArr[0]]}),window.setTimeout(function(){e.transitionEnd("gopre")},280)},goNext:function(){if(this.config.beforeGoNext){if(!1===this.config.beforeGoNext())return this.setPos(),void(this.isIntransition=!1)}var e=this;this.isIntransition=!0,this._posArrGoNext(),this.setPos("gonext"),this.config.onChange&&this.config.onChange({swiper:this,action:"gonext",itemWrapper:this.itemWrappers[this.posArr[2]]}),window.setTimeout(function(){e.transitionEnd("gonext")},280)},reset:function(){this._resetPosArr(),this.setPos("move",0)},getMidWrapper:function(){return this.itemWrappers[this.posArr[1]]},getPreWrapper:function(){return this.itemWrappers[this.posArr[0]]},getNextWrapper:function(){return this.itemWrappers[this.posArr[2]]},setPos:function(e,t){var i=this;t=t||0;for(var n=0;n<3;n++){var a=i.posArr[n],s=i.itemWrappers[a],r={};r[i.tanKeys.transition]="move"==e?"none":this.tanKeys.transform+" .35s ease","gopre"==e&&0==n&&(r[i.tanKeys.transition]="none"),"gonext"==e&&2==n&&(r[i.tanKeys.transition]="none"),r[i.tanKeys.transform]="translate3d("+(this.initPos[n]+t)+"px,0,0)",s.css(r)}}},n}),define("../../components/calendar",["utils","base","swiper"],function(e,t,i){function n(t,i,n,a){var s=this;s.dateInfo=t,this.calendar=a,this.$el=$("<div date-seed='"+t.dateStr+"' date-mark='"+t.mark+"' date-day='"+t.day+"'  date-month='"+t.month+"' date-year='"+t.year+"' class='yy-calendar-day-item displayflex jc-center ai-center yy-calendar-day-item-"+t.mark+"'></div>");var r=e.ConvertDateToStr(a.selectedTime)==s.dateInfo.dateStr;this.dayLabel=$("<div style='font-size:"+e.fontSize12()+"px;width:"+n+"px;height:"+n+"px;line-height:"+n+"px' class='yy-calendar-day'>"+t.day+"</div>"),r&&this.selected(),this.$el.append(this.dayLabel),e.css(this.$el,i)}function a(e){this.config=e,this.yearItems={},this.itemWrapper=e.itemWrapper,this.calendar=e.calendar}function s(t){this.config=t,this.itemWrapper=t.itemWrapper,this.calendar=t.calendar,this.SumDay=42,this.dayInnerWidth=e.getRealWidth(23),this.dayItems={}}n.prototype={selected:function(){this.dayLabel.addClass("yy-calendar-day-selected")},unSelected:function(){this.dayLabel.removeClass("yy-calendar-day-selected")}},a.prototype={createLaytout:function(e){this.yearItems={},this.itemWrapper.$el.empty();for(var t=0;t<12;t++){var i=e+t,n=new r({calendar:this.calendar,year:i,itemHeight:this.config.itemHeight});this.yearItems[i]=n,this.itemWrapper.$el.append(n.$el)}}};var r=function(t){this.config=t,this.calendar=t.calendar;var i=e.convertToDate(this.calendar.curDate),n=i.getFullYear()==this.config.year;this.$el=$("<div  date-year-seed='"+t.year+"' style='height:"+this.config.itemHeight+";line-height:"+this.config.itemHeight+"' class='yy-calendar-year-item'></div>"),this.innnerYear=$("<span style='font-size:"+e.fontSize15()+"px' class='yy-calendar-year'>"+this.config.year+"</span>"),n&&this.selected(),this.$el.append(this.innnerYear)};r.prototype={selected:function(){this.innnerYear.addClass("yy-calendar-year-selected")},unSelected:function(){this.innnerYear.removeClass("yy-calendar-year-selected")}},s.prototype={createLaytout:function(t){this.dayItems={},this.date=e.convertToDate(t),this.itemWrapper.$el.empty();for(var i=this.getDaysArr(),a={height:this.config.itemHeight+"px","font-size":e.getRealWidth(14)+"px"},s=document.createDocumentFragment(),r=0;r<this.SumDay;r++){var o=i[r],l=new n(o,a,this.dayInnerWidth,this.calendar);this.dayItems[o.dateStr]=l,s.appendChild(l.$el[0])}this.itemWrapper.$el[0].appendChild(s)},getDaysArr:function(){var t=[],i=e.getMonthDayCount(this.date),n=e.getDateInfo(this.date),a=e.getMonthFirstDayWhicDayInWeek(this.date),s=this.SumDay-a-i;if(a>0)for(var r=e.getPreMonth(this.date),o=e.getMonthDayCount(r),l=e.getDateInfo(r),c=0;c<a;c++){var p=o-a+c+1,d=new Date(l.year,l.month-1,p);t.push({date:d,dateStr:e.ConvertDateToStr(d),year:l.year,month:l.month,day:p,mark:"premonth"})}for(var c=1;c<=i;c++){var d=new Date(n.year,n.month-1,c);t.push({date:d,dateStr:e.ConvertDateToStr(d),year:n.year,month:n.month,day:c,mark:"curmonth"})}if(s>0)for(var h=e.getNextMonth(this.date),u=e.getDateInfo(h),c=1;c<=s;c++){var d=new Date(u.year,u.month-1,c);t.push({date:d,dateStr:e.ConvertDateToStr(d),year:u.year,month:u.month,day:c,mark:"nextmonth"})}return t}};var o=["一","二","三","四","五","六","七","八","九","十","十一","十二"],l=function(t){var i=this;l.baseConstructor.call(this,t),this.$el.addClass("yy-calendar-wrapper");var n=this.config.itemHeight;isNaN(n)&&(n=45),this.curDate=t.date||new Date,this.selectedTime=new Date(e.convertToDate(this.curDate).getTime()),n=parseInt(n),this.itemHeight=e.getRealHeight(n);var a=t.comKey+"_change";this.pageview&&this.pageview.plugin&&(this.pluginChangeMethod=this.pageview.plugin[a]),this.labelBarHeight=e.getRealHeight(27);var s=6*this.itemHeight+this.labelBarHeight;if(this.innerWrapper=$("<div style='height:"+s+"px' class='yy-calendar-inner'></div>"),this.config.isShowYearAndMonthPicker||!0){var r=e.getRealHeight(36);s+=r,this.initYearAndMonthPicker(r,s)}this.mode=t.mode||"年月日","年月"==this.mode?(this.curShow="year",this.createYearWrapper(s-r),this.triggerChange()):(this.curShow="day",i.createDayWraper()),this.$el.append(this.innerWrapper)};return e.extends(l,t),l.prototype.setDateSelected=function(t,i){var t=e.convertToDate(t),n=(t.getFullYear(),e.ConvertDateToStr(t));this.selectedTime=t;for(var a=0;a<3;a++){var s=this.Swiper.itemWrappers[a].daysCreator;for(var r in s.dayItems){var o=s.dayItems[r];o.dateInfo.dateStr==n?o.selected():o.unSelected()}}if(i){var l=i.getAttribute("date-mark");"premonth"==l?this.goPre():"nextmonth"==l&&this.goNext()}},l.prototype.setYearSelected=function(){var t,i=this,n=e.getDateInfo(this.curDate),a=!1,s=n.year;if(this.yearSwiper){for(var r=0;r<3;r++){var o=this.yearSwiper.itemWrappers[this.yearSwiper.posArr[r]].yearCreator;for(var l in o.yearItems){var c=o.yearItems[l];t=c.config.year,c.config.year==s?(a=!0,c.selected(),0==r?this.yearSwiper.goPre():2==r&&this.yearSwiper.goNext()):c.unSelected()}}a||(t>s?(this.initYearWrapper(s-3+12),window.setTimeout(function(){i.yearSwiper.goPre()},0)):(this.initYearWrapper(s-3-12),window.setTimeout(function(){i.yearSwiper.goNext()},0)))}},l.prototype.createDayWraper=function(){var t=this;new i({onChange:function(i){if("gopre"==i.action){var n=e.getPreMonth(t.curDate),a=e.getPreMonth(n);t.curDate=e.getCurMonthFirstDay(n),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(a)}else if("gonext"==i.action){var n=e.getNextMonth(t.curDate),s=e.getNextMonth(n);t.curDate=e.getCurMonthFirstDay(n),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(s)}},initItem:function(e,i){e.daysCreator=new s({calendar:t,itemWrapper:e,itemHeight:t.itemHeight})},init:function(e){t.Swiper=e}});var n=e.getRealWidth(13),a="style='line-height:"+this.labelBarHeight+"px;font-size:"+n+"px'",r=$("<div style='height:"+this.labelBarHeight+"px' class='yy-calendar-bar'><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("Sunday")+"</div><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("Monday")+"</div><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("TuesDay")+"</div><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("Wednesday")+"</div><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("Thursday")+"</div><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("Friday")+"</div><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("Saturday")+"</div></div>");this.dayWrapper=$("<div class='yy-calendar-ymd-wrapper displayflex flex-v'></div>"),this.dayWrapper.append(r).append(this.Swiper.$el),this.Swiper.$el.bind("click",function(e){for(var i=e.target,n=i.getAttribute("date-seed");null==n&&(i=i.parentNode,!(n=i.getAttribute("date-seed")))&&"BODY"!=i.tagName.toUpperCase(););t.setDateSelected(n,i)}),this.innerWrapper.append(this.dayWrapper),this.show()},l.prototype.createYearWrapper=function(t){var n=t/4+"px",s=this,r="year"==this.curShow?"":"displaynone"
;this.yearWrapper=$("<div class='yy-calendar-ymd-wrapper "+r+"'></div>"),new i({onChange:function(e){"gopre"==e.action?(s.curYearWrapperStartYear-=12,e.itemWrapper.yearCreator.createLaytout(s.curYearWrapperStartYear-12)):"gonext"==e.action&&(s.curYearWrapperStartYear+=12,e.itemWrapper.yearCreator.createLaytout(s.curYearWrapperStartYear+12))},initItem:function(e,t){e.yearCreator=new a({itemWrapper:e,itemHeight:n,calendar:s})},init:function(t){s.yearSwiper=t,t.$el.appendTo(s.yearWrapper);var i=e.getDateInfo(s.curDate);s.initYearWrapper(i.year)}}),this.yearWrapper.bind("click",function(t){for(var i=t.target,n=i.getAttribute("date-year-seed");null==n&&(i=i.parentNode,!(n=i.getAttribute("date-year-seed")))&&"BODY"!=i.tagName.toUpperCase(););var a=parseInt(n);s.curDate=e.setDateToYear(s.curDate,a),s.show(s.curDate,!1),s.curShow="day",s.dayWrapper&&s.dayWrapper.removeClass("displaynone"),s.yearWrapper.addClass("displaynone"),s.setYearSelected()}),this.innerWrapper.append(this.yearWrapper)},l.prototype.initYearWrapper=function(e){this.yearSwiper.reset(),this.curYearWrapperStartYear=e-4,this.yearSwiper.itemWrappers[0].yearCreator.createLaytout(e-4-12),this.yearSwiper.itemWrappers[1].yearCreator.createLaytout(e-4),this.yearSwiper.itemWrappers[2].yearCreator.createLaytout(e-4+12)},l.prototype.initYearAndMonthPicker=function(t,i){var n=e.getRealWidth(18),a=this,s=$("<div style='height:"+t+"px' class='yy-calendar-ym-picker displayflex flex-h'></div>");this.yearLeftIcon=$("<div class='yy-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.yearLabel=$("<div style='font-size:"+n+"px' class='yy-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.yearLabel.bind("click",function(){a.yearWrapper||a.createYearWrapper(i-t),"day"==a.curShow?(a.curShow="year",a.yearWrapper.removeClass("displaynone"),a.dayWrapper&&a.dayWrapper.addClass("displaynone")):"year"==a.curShow?(a.curShow="day",a.dayWrapper&&a.dayWrapper.removeClass("displaynone"),a.yearWrapper.addClass("displaynone")):"month"==a.curShow&&(a.curShow="year",a.monthWrapper&&a.monthWrapper.addClass("displaynone"),a.yearWrapper.removeClass("displaynone"))}),this.yearLeftIcon.bind("click",function(){a.goTo(e.getPreYear(a.curDate)),a.setYearSelected()}),this.yearRightIcon=$("<div class='yy-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.yearRightIcon.bind("click",function(){a.goTo(e.getNextYear(a.curDate)),a.setYearSelected()}),this.monthLeftIcon=$("<div class='yy-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthLeftIcon.bind("click",function(){a.goPre(),a.setMonthSelected()}),this.monthLabel=$("<div style='font-size:"+n+"px' class='yy-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.monthLabel.bind("click",function(){a.monthWrapper||a.createMonthWrapper(i-t),"day"==a.curShow?(a.setMonthSelected(),a.curShow="month",a.monthWrapper.removeClass("displaynone"),a.dayWrapper&&a.dayWrapper.addClass("displaynone")):"year"==a.curShow?(a.setMonthSelected(),a.curShow="month",a.monthWrapper.removeClass("displaynone"),a.yearWrapper&&a.yearWrapper.addClass("displaynone")):"month"==a.curShow&&(a.curShow="day",a.monthWrapper&&a.monthWrapper.addClass("displaynone"),a.dayWrapper&&a.dayWrapper.removeClass("displaynone"))}),this.monthRightIcon=$("<div class='yy-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthRightIcon.bind("click",function(){a.goNext(),a.setMonthSelected()}),s.append(this.yearLeftIcon).append(this.yearLabel).append(this.yearRightIcon).append(this.monthLeftIcon).append(this.monthLabel).append(this.monthRightIcon),this.$el.append(s)},l.prototype.createMonthWrapper=function(t){var i=t/4+"px",n=this;this.monthDict={},this.monthWrapper=$("<div class='yy-calendar-ymd-wrapper displaynone'></div>");for(var a=0;a<12;a++){var s=$("<div data-month-seed='"+(a+1)+"' style='height:"+i+";line-height:"+i+"' class='yy-calendar-month-item'></div>"),r=$("<span class='yy-calendar-month' style='font-size:"+e.fontSize15()+"px'>"+o[a]+"</span>");s.append(r),a+1==this.curDate.getMonth()+1&&r.addClass("yy-calendar-month-selected"),this.monthDict[(a+1).toString()]=r,this.monthWrapper.append(s)}this.monthWrapper.bind("click",function(t){for(var i=t.target,a=i.getAttribute("data-month-seed");null==a&&(i=i.parentNode,!(a=i.getAttribute("data-month-seed")))&&"BODY"!=i.tagName.toUpperCase(););a&&(n.curDate=e.setMonthToDate(n.curDate,a),n.show(n.curDate,!1),n.curShow="day",n.dayWrapper&&n.dayWrapper.removeClass("displaynone"),n.monthWrapper.addClass("displaynone"),n.setMonthSelected())}),this.innerWrapper.append(this.monthWrapper)},l.prototype.setMonthSelected=function(){var t=e.convertToDate(this.curDate).getMonth()+1;this.setYearSelected();for(var i in this.monthDict)t==parseInt(i)?this.monthDict[i].addClass("yy-calendar-month-selected"):this.monthDict[i].removeClass("yy-calendar-month-selected")},l.prototype.show=function(t,i){t=t||this.curDate||new Date,this.curDate=e.convertToDate(t),this.Swiper.reset();var n=e.getPreMonth(this.curDate);this.Swiper.itemWrappers[0].daysCreator.createLaytout(n),this.Swiper.itemWrappers[1].daysCreator.createLaytout(this.curDate);var a=e.getNextMonth(this.curDate);this.Swiper.itemWrappers[2].daysCreator.createLaytout(a),i||this.triggerChange()},l.prototype.triggerChange=function(){var t=e.getDateInfo(this.curDate);this.monthLabel.html(t.month),this.yearLabel.html(t.year),this.pluginChangeMethod&&this.pluginChangeMethod.call(this.pageview.plugin,this,{})},l.prototype.goPre=function(){this.Swiper.goPre()},l.prototype.goNext=function(){this.Swiper.goNext()},l.prototype.setValue=function(t){t=t||new Date,t=e.convertToDate(t),this.selectedTime=t,this.goTo(t)},l.prototype.goTo=function(t){var i=this;if(t=t||new Date,t=e.convertToDate(t),e.ConvertDateToStr(this.curDate)!=e.ConvertDateToStr(t)){if(e.ConvertDateToStr(this.curDate,"yyyy-MM")==e.ConvertDateToStr(t,"yyyy-MM"))return void this.setDateSelected(t);this.curDate=t,this.curDate>t?(this.show(e.getNextMonth(t),!0),window.setTimeout(function(){i.goPre()},0)):(this.show(e.getPreMonth(t),!0),window.setTimeout(function(){i.goNext()},0))}},l}),define("calendar",["utils","base","swiper"],function(e,t,i){function n(t,i,n,a){var s=this;s.dateInfo=t,this.calendar=a,this.$el=$("<div date-seed='"+t.dateStr+"' date-mark='"+t.mark+"' date-day='"+t.day+"'  date-month='"+t.month+"' date-year='"+t.year+"' class='yy-calendar-day-item displayflex jc-center ai-center yy-calendar-day-item-"+t.mark+"'></div>");var r=e.ConvertDateToStr(a.selectedTime)==s.dateInfo.dateStr;this.dayLabel=$("<div style='font-size:"+e.fontSize12()+"px;width:"+n+"px;height:"+n+"px;line-height:"+n+"px' class='yy-calendar-day'>"+t.day+"</div>"),r&&this.selected(),this.$el.append(this.dayLabel),e.css(this.$el,i)}function a(e){this.config=e,this.yearItems={},this.itemWrapper=e.itemWrapper,this.calendar=e.calendar}function s(t){this.config=t,this.itemWrapper=t.itemWrapper,this.calendar=t.calendar,this.SumDay=42,this.dayInnerWidth=e.getRealWidth(23),this.dayItems={}}n.prototype={selected:function(){this.dayLabel.addClass("yy-calendar-day-selected")},unSelected:function(){this.dayLabel.removeClass("yy-calendar-day-selected")}},a.prototype={createLaytout:function(e){this.yearItems={},this.itemWrapper.$el.empty();for(var t=0;t<12;t++){var i=e+t,n=new r({calendar:this.calendar,year:i,itemHeight:this.config.itemHeight});this.yearItems[i]=n,this.itemWrapper.$el.append(n.$el)}}};var r=function(t){this.config=t,this.calendar=t.calendar;var i=e.convertToDate(this.calendar.curDate),n=i.getFullYear()==this.config.year;this.$el=$("<div  date-year-seed='"+t.year+"' style='height:"+this.config.itemHeight+";line-height:"+this.config.itemHeight+"' class='yy-calendar-year-item'></div>"),this.innnerYear=$("<span style='font-size:"+e.fontSize15()+"px' class='yy-calendar-year'>"+this.config.year+"</span>"),n&&this.selected(),this.$el.append(this.innnerYear)};r.prototype={selected:function(){this.innnerYear.addClass("yy-calendar-year-selected")},unSelected:function(){this.innnerYear.removeClass("yy-calendar-year-selected")}},s.prototype={createLaytout:function(t){this.dayItems={},this.date=e.convertToDate(t),this.itemWrapper.$el.empty();for(var i=this.getDaysArr(),a={height:this.config.itemHeight+"px","font-size":e.getRealWidth(14)+"px"},s=document.createDocumentFragment(),r=0;r<this.SumDay;r++){var o=i[r],l=new n(o,a,this.dayInnerWidth,this.calendar);this.dayItems[o.dateStr]=l,s.appendChild(l.$el[0])}this.itemWrapper.$el[0].appendChild(s)},getDaysArr:function(){var t=[],i=e.getMonthDayCount(this.date),n=e.getDateInfo(this.date),a=e.getMonthFirstDayWhicDayInWeek(this.date),s=this.SumDay-a-i;if(a>0)for(var r=e.getPreMonth(this.date),o=e.getMonthDayCount(r),l=e.getDateInfo(r),c=0;c<a;c++){var p=o-a+c+1,d=new Date(l.year,l.month-1,p);t.push({date:d,dateStr:e.ConvertDateToStr(d),year:l.year,month:l.month,day:p,mark:"premonth"})}for(var c=1;c<=i;c++){var d=new Date(n.year,n.month-1,c);t.push({date:d,dateStr:e.ConvertDateToStr(d),year:n.year,month:n.month,day:c,mark:"curmonth"})}if(s>0)for(var h=e.getNextMonth(this.date),u=e.getDateInfo(h),c=1;c<=s;c++){var d=new Date(u.year,u.month-1,c);t.push({date:d,dateStr:e.ConvertDateToStr(d),year:u.year,month:u.month,day:c,mark:"nextmonth"})}return t}};var o=["一","二","三","四","五","六","七","八","九","十","十一","十二"],l=function(t){var i=this;l.baseConstructor.call(this,t),this.$el.addClass("yy-calendar-wrapper");var n=this.config.itemHeight;isNaN(n)&&(n=45),this.curDate=t.date||new Date,this.selectedTime=new Date(e.convertToDate(this.curDate).getTime()),n=parseInt(n),this.itemHeight=e.getRealHeight(n);var a=t.comKey+"_change";this.pageview&&this.pageview.plugin&&(this.pluginChangeMethod=this.pageview.plugin[a]),this.labelBarHeight=e.getRealHeight(27);var s=6*this.itemHeight+this.labelBarHeight;if(this.innerWrapper=$("<div style='height:"+s+"px' class='yy-calendar-inner'></div>"),this.config.isShowYearAndMonthPicker||!0){var r=e.getRealHeight(36);s+=r,this.initYearAndMonthPicker(r,s)}this.mode=t.mode||"年月日","年月"==this.mode?(this.curShow="year",this.createYearWrapper(s-r),this.triggerChange()):(this.curShow="day",i.createDayWraper()),this.$el.append(this.innerWrapper)};return e.extends(l,t),l.prototype.setDateSelected=function(t,i){var t=e.convertToDate(t),n=(t.getFullYear(),e.ConvertDateToStr(t));this.selectedTime=t;for(var a=0;a<3;a++){var s=this.Swiper.itemWrappers[a].daysCreator;for(var r in s.dayItems){var o=s.dayItems[r];o.dateInfo.dateStr==n?o.selected():o.unSelected()}}if(i){var l=i.getAttribute("date-mark");"premonth"==l?this.goPre():"nextmonth"==l&&this.goNext()}},l.prototype.setYearSelected=function(){var t,i=this,n=e.getDateInfo(this.curDate),a=!1,s=n.year;if(this.yearSwiper){for(var r=0;r<3;r++){var o=this.yearSwiper.itemWrappers[this.yearSwiper.posArr[r]].yearCreator;for(var l in o.yearItems){var c=o.yearItems[l];t=c.config.year,c.config.year==s?(a=!0,c.selected(),0==r?this.yearSwiper.goPre():2==r&&this.yearSwiper.goNext()):c.unSelected()}}a||(t>s?(this.initYearWrapper(s-3+12),window.setTimeout(function(){i.yearSwiper.goPre()},0)):(this.initYearWrapper(s-3-12),window.setTimeout(function(){i.yearSwiper.goNext()},0)))}},l.prototype.createDayWraper=function(){var t=this;new i({onChange:function(i){if("gopre"==i.action){var n=e.getPreMonth(t.curDate),a=e.getPreMonth(n);t.curDate=e.getCurMonthFirstDay(n),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(a)}else if("gonext"==i.action){var n=e.getNextMonth(t.curDate),s=e.getNextMonth(n);t.curDate=e.getCurMonthFirstDay(n),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(s)}},initItem:function(e,i){e.daysCreator=new s({calendar:t,itemWrapper:e,itemHeight:t.itemHeight})},init:function(e){t.Swiper=e}});var n=e.getRealWidth(13),a="style='line-height:"+this.labelBarHeight+"px;font-size:"+n+"px'",r=$("<div style='height:"+this.labelBarHeight+"px' class='yy-calendar-bar'><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("Sunday")+"</div><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("Monday")+"</div><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("TuesDay")+"</div><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("Wednesday")+"</div><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("Thursday")+"</div><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("Friday")+"</div><div "+a+" class='yy-c-bar-item'>"+e.getLanguageText("Saturday")+"</div></div>");this.dayWrapper=$("<div class='yy-calendar-ymd-wrapper displayflex flex-v'></div>"),this.dayWrapper.append(r).append(this.Swiper.$el),this.Swiper.$el.bind("click",function(e){for(var i=e.target,n=i.getAttribute("date-seed");null==n&&(i=i.parentNode,!(n=i.getAttribute("date-seed")))&&"BODY"!=i.tagName.toUpperCase(););t.setDateSelected(n,i)}),this.innerWrapper.append(this.dayWrapper),this.show()},l.prototype.createYearWrapper=function(t){var n=t/4+"px",s=this,r="year"==this.curShow?"":"displaynone";this.yearWrapper=$("<div class='yy-calendar-ymd-wrapper "+r+"'></div>"),new i({onChange:function(e){"gopre"==e.action?(s.curYearWrapperStartYear-=12,e.itemWrapper.yearCreator.createLaytout(s.curYearWrapperStartYear-12)):"gonext"==e.action&&(s.curYearWrapperStartYear+=12,e.itemWrapper.yearCreator.createLaytout(s.curYearWrapperStartYear+12))},initItem:function(e,t){e.yearCreator=new a({itemWrapper:e,itemHeight:n,calendar:s})},init:function(t){s.yearSwiper=t,t.$el.appendTo(s.yearWrapper);var i=e.getDateInfo(s.curDate);s.initYearWrapper(i.year)}}),this.yearWrapper.bind("click",function(t){for(var i=t.target,n=i.getAttribute("date-year-seed");null==n&&(i=i.parentNode,!(n=i.getAttribute("date-year-seed")))&&"BODY"!=i.tagName.toUpperCase(););var a=parseInt(n);s.curDate=e.setDateToYear(s.curDate,a),s.show(s.curDate,!1),s.curShow="day",s.dayWrapper&&s.dayWrapper.removeClass("displaynone"),s.yearWrapper.addClass("displaynone"),s.setYearSelected()}),this.innerWrapper.append(this.yearWrapper)},l.prototype.initYearWrapper=function(e){this.yearSwiper.reset(),this.curYearWrapperStartYear=e-4,this.yearSwiper.itemWrappers[0].yearCreator.createLaytout(e-4-12),this.yearSwiper.itemWrappers[1].yearCreator.createLaytout(e-4),this.yearSwiper.itemWrappers[2].yearCreator.createLaytout(e-4+12)},l.prototype.initYearAndMonthPicker=function(t,i){var n=e.getRealWidth(18),a=this,s=$("<div style='height:"+t+"px' class='yy-calendar-ym-picker displayflex flex-h'></div>");this.yearLeftIcon=$("<div class='yy-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.yearLabel=$("<div style='font-size:"+n+"px' class='yy-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.yearLabel.bind("click",function(){a.yearWrapper||a.createYearWrapper(i-t),"day"==a.curShow?(a.curShow="year",a.yearWrapper.removeClass("displaynone"),a.dayWrapper&&a.dayWrapper.addClass("displaynone")):"year"==a.curShow?(a.curShow="day",a.dayWrapper&&a.dayWrapper.removeClass("displaynone"),a.yearWrapper.addClass("displaynone")):"month"==a.curShow&&(a.curShow="year",a.monthWrapper&&a.monthWrapper.addClass("displaynone"),a.yearWrapper.removeClass("displaynone"))}),this.yearLeftIcon.bind("click",function(){a.goTo(e.getPreYear(a.curDate)),a.setYearSelected()}),this.yearRightIcon=$("<div class='yy-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.yearRightIcon.bind("click",function(){a.goTo(e.getNextYear(a.curDate)),a.setYearSelected()}),this.monthLeftIcon=$("<div class='yy-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthLeftIcon.bind("click",function(){a.goPre(),a.setMonthSelected()}),this.monthLabel=$("<div style='font-size:"+n+"px' class='yy-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.monthLabel.bind("click",function(){a.monthWrapper||a.createMonthWrapper(i-t),"day"==a.curShow?(a.setMonthSelected(),a.curShow="month",a.monthWrapper.removeClass("displaynone"),a.dayWrapper&&a.dayWrapper.addClass("displaynone")):"year"==a.curShow?(a.setMonthSelected(),a.curShow="month",a.monthWrapper.removeClass("displaynone"),a.yearWrapper&&a.yearWrapper.addClass("displaynone")):"month"==a.curShow&&(a.curShow="day",a.monthWrapper&&a.monthWrapper.addClass("displaynone"),a.dayWrapper&&a.dayWrapper.removeClass("displaynone"))}),this.monthRightIcon=$("<div class='yy-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthRightIcon.bind("click",function(){a.goNext(),a.setMonthSelected()}),s.append(this.yearLeftIcon).append(this.yearLabel).append(this.yearRightIcon).append(this.monthLeftIcon).append(this.monthLabel).append(this.monthRightIcon),this.$el.append(s)},l.prototype.createMonthWrapper=function(t){var i=t/4+"px",n=this;this.monthDict={},this.monthWrapper=$("<div class='yy-calendar-ymd-wrapper displaynone'></div>");for(var a=0;a<12;a++){var s=$("<div data-month-seed='"+(a+1)+"' style='height:"+i+";line-height:"+i+"' class='yy-calendar-month-item'></div>"),r=$("<span class='yy-calendar-month' style='font-size:"+e.fontSize15()+"px'>"+o[a]+"</span>");s.append(r),a+1==this.curDate.getMonth()+1&&r.addClass("yy-calendar-month-selected"),this.monthDict[(a+1).toString()]=r,this.monthWrapper.append(s)}this.monthWrapper.bind("click",function(t){for(var i=t.target,a=i.getAttribute("data-month-seed");null==a&&(i=i.parentNode,!(a=i.getAttribute("data-month-seed")))&&"BODY"!=i.tagName.toUpperCase(););a&&(n.curDate=e.setMonthToDate(n.curDate,a),n.show(n.curDate,!1),n.curShow="day",n.dayWrapper&&n.dayWrapper.removeClass("displaynone"),n.monthWrapper.addClass("displaynone"),n.setMonthSelected())}),this.innerWrapper.append(this.monthWrapper)},l.prototype.setMonthSelected=function(){var t=e.convertToDate(this.curDate).getMonth()+1;this.setYearSelected();for(var i in this.monthDict)t==parseInt(i)?this.monthDict[i].addClass("yy-calendar-month-selected"):this.monthDict[i].removeClass("yy-calendar-month-selected")},l.prototype.show=function(t,i){t=t||this.curDate||new Date,this.curDate=e.convertToDate(t),this.Swiper.reset();var n=e.getPreMonth(this.curDate);this.Swiper.itemWrappers[0].daysCreator.createLaytout(n),this.Swiper.itemWrappers[1].daysCreator.createLaytout(this.curDate);var a=e.getNextMonth(this.curDate);this.Swiper.itemWrappers[2].daysCreator.createLaytout(a),i||this.triggerChange()},l.prototype.triggerChange=function(){var t=e.getDateInfo(this.curDate);this.monthLabel.html(t.month),this.yearLabel.html(t.year),this.pluginChangeMethod&&this.pluginChangeMethod.call(this.pageview.plugin,this,{})},l.prototype.goPre=function(){this.Swiper.goPre()},l.prototype.goNext=function(){this.Swiper.goNext()},l.prototype.setValue=function(t){t=t||new Date,t=e.convertToDate(t),this.selectedTime=t,this.goTo(t)},l.prototype.goTo=function(t){var i=this;if(t=t||new Date,t=e.convertToDate(t),e.ConvertDateToStr(this.curDate)!=e.ConvertDateToStr(t)){if(e.ConvertDateToStr(this.curDate,"yyyy-MM")==e.ConvertDateToStr(t,"yyyy-MM"))return void this.setDateSelected(t);this.curDate=t,this.curDate>t?(this.show(e.getNextMonth(t),!0),window.setTimeout(function(){i.goPre()},0)):(this.show(e.getPreMonth(t),!0),window.setTimeout(function(){i.goNext()},0))}},l}),define("../../components/calendarbetween",["utils","base","calendar"],function(e,t,i){function n(t,n,a,s){if(t.stopPropagation(),t.preventDefault(),$(a).css({borderColor:"#29b6f6"}),$(a).siblings().css({borderColor:"#eee"}),this.flag)return this.$el.removeClass("yy-calendar-picker-show"),this.backCover.addClass("displaynone"),void(this.flag=!1);this.$el=$("<div class='yy-calendar-picker' style='z-index: 4100'></div>"),this.calendar=new i({itemHeight:30}),this.backCover=$("<div class='yy-calendar-picker-bk displaynone' style='z-index: 1111'></div>");var r=e.getRealHeight("28"),o=$("<div style='height:"+r+"px' class='yy-calendar-picker-btns'></div>"),l=$("<div style='font-size:"+e.fontSize15()+"px;line-height:"+r+"px' class='yy-calendar-picker-cancelbtn'>"+e.getLanguageText("cancel")+"</div>"),c=$("<div style='font-size:"+e.fontSize15()+"px;line-height:"+r+"px' class='yy-calendar-picker-okbtn'>"+e.getLanguageText("confirm")+"</div>");c.bind("click",function(){$(a).text(e.ConvertDateToStr(p.calendar.selectedTime)),$(a).hasClass("yy-input-id")?s.start=e.ConvertDateToStr(p.calendar.selectedTime):s.end=e.ConvertDateToStr(p.calendar.selectedTime),p.$el.removeClass("yy-calendar-picker-show"),p.backCover.addClass("displaynone"),p.flag=!1}),l.bind("click",function(){p.$el.removeClass("yy-calendar-picker-show"),p.backCover.addClass("displaynone"),p.flag=!1}),this.backCover.bind("click",function(){p.$el.removeClass("yy-calendar-picker-show"),p.backCover.addClass("displaynone"),p.flag=!1}),o.append(l).append(c),this.$el.append(o).append(this.calendar.$el),$(n).append(this.backCover[0]).append(this.$el);var p=this;window.setTimeout(function(){p.flag||(p.$el.addClass("yy-calendar-picker-show"),p.backCover.removeClass("displaynone"),p.flag=!0)},0)}var a=function(t){this.pageview=t.pageview;var i=this,a=t.wrapper||$(document.body),s=t.mode||1;t.className;this.localS={start:"",end:""};var r=e.ConvertDateToStr(new Date),o=e.ConvertDateToStr((new Date).getTime()-864e5);this.$input_value={start:o,end:r},this.hasSelectCTime=t.hasSelectCTime?JSON.parse(t.hasSelectCTime):"",this.hasSelectSTime=t.hasSelectSTime?JSON.parse(t.hasSelectSTime):"",this.hasSelectDTime=t.hasSelectDTime?JSON.parse(t.hasSelectDTime):"",this.dateWrapper=$("<div class='yy-date-wrapper yy-dialog-effect-"+s+" yy-dialog-hide '></div>"),this.dateBackCover=$("<div style='visibility: hidden;' class='yy-dialog-bk'></div>"),this.$inputWrap=$("<div class='yy-input-wrap yy-fd-row displayflex '></div>"),this.$input=$("<div class='yy-input-inner yy-icon yy-input-id yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+o+"</div>"),this.$span="<div>&nbsp&nbsp--&nbsp&nbsp</div>",this.$input1=$("<div class='yy-input-inner yy-icon yy-input-id1 yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+r+"</div>"),this.hasSelectCTime.start&&(this.localS.start=this.hasSelectCTime.start,this.$input=$("<div class='yy-input-inner yy-icon yy-input-id yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+this.hasSelectCTime.start+"</div>")),this.hasSelectCTime.end&&(this.localS.end=this.hasSelectCTime.end,this.$input1=$("<div class='yy-input-inner yy-icon yy-input-id1 yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+this.hasSelectCTime.end+"</div>")),this.hasSelectSTime.start&&(this.localS.start=this.hasSelectSTime.start,this.$input=$("<div class='yy-input-inner yy-icon yy-input-id yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+this.hasSelectSTime.start+"</div>")),this.hasSelectSTime.end&&(this.localS.end=this.hasSelectSTime.end,this.$input1=$("<div class='yy-input-inner yy-icon yy-input-id1 yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+this.hasSelectSTime.end+"</div>")),this.hasSelectDTime.start&&(this.localS.start=this.hasSelectDTime.start,this.$input=$("<div class='yy-input-inner yy-icon yy-input-id yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+this.hasSelectDTime.start+"</div>")),this.hasSelectDTime.end&&(this.localS.end=this.hasSelectDTime.end,this.$input1=$("<div class='yy-input-inner yy-icon yy-input-id1 yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+this.hasSelectDTime.end+"</div>")),this.$inputWrap.append(this.$input).append(this.$span).append(this.$input1);var l=$("<div class='yy-dialog-btn-wrapper displayflex yy-fd-row'></div>"),c=$("<div class='yy-dialog-btn yy-date-btn yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+e.getLanguageText("cancel")+"</div>"),p=$("<div class='yy-dialog-btn yy-date-btn1 yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+e.getLanguageText("confirm")+"</div>");l.append(c).append(p),this.dateWrapper.append(this.$inputWrap).append(l),a.append(this.dateWrapper).append(this.dateBackCover),this.dateBackCover.on("click",function(){i.hide()}),this.flag=!1,c.on("click",function(e){i.hide()}),p.on("click",function(e){if(i.$input_value.start=i.$input.text(),i.$input_value.end=i.$input1.text(),i.localS.start&&!i.$input_value.start&&(i.$input_value.start=i.localS.start),i.localS.end&&!i.$input_value.end&&(i.$input_value.end=i.localS.end),""!==i.$input_value.start&&""!==i.$input_value.start){var n=i.$input_value.start.replace(/-/g,"/"),a=i.$input_value.end.replace(/-/g,"/");if(new Date(n).getTime()>new Date(a).getTime()){var s=i.$input_value.start;i.$input_value.start=i.$input_value.end,i.$input_value.end=s}}"提交时间"===t.timeType||"Send Date"===t.timeType?(window.localStorage.setItem("SUBMIT_TIME",JSON.stringify(i.$input_value)),i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.taskBeginDate=i.$input_value.start,i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.taskEndDate=i.$input_value.end,i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.taskDate="taskTime_more",i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.rcvOrCompDate=null):"接收时间"===t.timeType||"Receive Date"===t.timeType?(window.localStorage.setItem("RECEIVE_TIME",JSON.stringify(i.$input_value)),i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.rcvOrCompBeginDate=i.$input_value.start,i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.rcvOrCompEndDate=i.$input_value.end,i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.rcvOrCompDate="taskTime_more",i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.taskDate=null):"完成时间"!==t.timeType&&"Finish Date"!==t.timeType||(window.localStorage.setItem("DONE_TIME",JSON.stringify(i.$input_value)),i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.rcvOrCompBeginDate=i.$input_value.start,i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.rcvOrCompEndDate=i.$input_value.end,i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.rcvOrCompDate="taskTime_more",i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.taskDate=null),t.sender.rootInstance.hideDropDown(),i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.pageNum=1,i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.start=0,i.pageview.viewpager.curPageViewItem.contentInstance.refs.listview.loadFirstPageData({parentAnimate:!0}),i.hide()}),this.$input.on("click",function(e){n(e,a,this,i.$input_value)}),this.$input1.on("click",function(e){n(e,a,this,i.$input_value)})};return a.prototype.show=function(){var e=this;this.dateWrapper.css({visibility:"visible"}),this.dateBackCover.css({visibility:"visible"}),this.dateBackCover.addClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dateWrapper.removeClass("yy-dialog-hide").addClass("yy-dialog-show")},1)},a.prototype.hide=function(){var e=this;this.dateWrapper.removeClass("yy-dialog-show").addClass("yy-dialog-hide"),this.dateBackCover.removeClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dateWrapper.css({visibility:"hidden"}),e.dateBackCover.css({visibility:"hidden"})},200)},a.prototype.bindValue=function(){$(".yy-input-id").val(new Date(this.calendar.selectedTime))},a}),define("../../components/calendarpicker",["utils","calendar"],function(e,t){var i=function(i){var n=this;i=i||{};var a=i.wrapper||document.body;this.$el=$("<div class='yy-calendar-picker'></div>"),this.calendar=new t({itemHeight:38}),this.backCover=$("<div class='yy-calendar-picker-bk displaynone'></div>"),this.backCover.bind("click",function(){n.hide()});var s=e.getRealHeight("36"),r=$("<div style='height:"+s+"px' class='yy-calendar-picker-btns'></div>"),o=$("<div style='font-size:"+e.fontSize15()+"px;line-height:"+s+"px' class='yy-calendar-picker-cancelbtn'>"+e.getLanguageText("cancel")+"</div>"),l=$("<div style='font-size:"+e.fontSize15()+"px;line-height:"+s+"px' class='yy-calendar-picker-okbtn'>"+e.getLanguageText("confirm")+"</div>");l.bind("click",function(){i.ok&&i.ok({date:n.calendar.selectedTime,dateStr:e.ConvertDateToStr(n.calendar.selectedTime)}),n.hide()}),o.bind("click",function(){n.hide()}),r.append(o).append(l),this.$el.append(r).append(this.calendar.$el),$(a).append(this.backCover[0]).append(this.$el)};return i.prototype.show=function(e){this.calendar.setValue(e);var t=this;window.setTimeout(function(){t.$el.addClass("yy-calendar-picker-show"),t.backCover.removeClass("displaynone")},0)},i.prototype.hide=function(e){this.$el.removeClass("yy-calendar-picker-show"),this.backCover.addClass("displaynone")},i}),define("../../components/calendarrange",["utils","base","./calendar"],function(e,t,i){var n=function(e){n.baseConstructor.call(this,e)};return e.extends(n,t),n}),define("../../components/canvas",["utils","base"],function(e,t){function i(t){var n=this;this.isIOS=e.deviceInfo().isIOS,this.hasFixed=!1,this.isSticky=!1;var a=document.documentElement.clientWidth+"",s=document.documentElement.clientHeight+"";s*=.88;window;window.addEventListener("evt",function(){alert("屏幕旋转了")}),this.LoadMoreWrapper=$("<div style='height:"+e.getRealHeight(36)+"px' class='yy-loadmore-wrapper displayflex yy-jc-center yy-ai-center flex-h displaynone'></div>"),t.className.indexOf("hor")>-1?this.Canvas=$("<canvas class='drawing-board-canvas'  height='"+(s-30)+"' width='"+(a-20)+"' style='border: 1px dotted;margin: 10px auto'></canvas>"):this.Canvas=$("<canvas class='drawing-board-canvas'  height='260' width='"+(a-2)+"' style='border: 1px dotted;margin:20px 0'></canvas>"),i.baseConstructor.call(this,t),this.stickyHeaderIndices=this.config.stickyHeaderIndices,n.isInLoading=!1,n.canRefresh=!1,this._initTouchEvent(),this.$el.addClass("displayflex yy-view"),this.$el.append(this.Canvas),t.root=t.root||[]}return e.extends(i,t),i.prototype._initTouchEvent=function(){var t=this;if(this.pluginPullToRefreshMethod){var i,n=0;this.$el.bind("touchstart",function(e){if(!0!==t.config.onlyForSticky&&!t.isInLoading){t.isInLoading=!1,t.canRefresh=!1;var a=e.touches[0];n=a.pageY,i=t.$el.scrollTop()}}),this.$el.bind("touchmove",function(a){if(!0!==t.config.onlyForSticky&&!t.isInLoading){var s=a.touches[0],r=s.pageY,o=r-n;if(o>0){if(t.pluginCanPullToRefreshMethod){if(!0!==t.pluginCanPullToRefreshMethod.call(t.pageview.plugin,t))return}if(t.$el.scrollTop()<=0){t.$el.css({overflow:"hidden"}),a.preventDefault(),a.stopPropagation();var l=o-i;l>4*t.pullLimitHeight?(t.pullMesLabel.html(e.getLanguageText("releaseToUpdate")),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-release-refresh",t.canRefresh=!0):(t.pullMesLabel.html(e.getLanguageText("pullToRefresh")),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-push-refresh",t.canRefresh=!1),t.innerWrapper.css(e.processTransitionTanformStyle("none","translate3d(0,"+l/3+"px,0)"))}}}}),this.$el.bind("touchend",function(e){if(!0===t.config.onlyForSticky)return void t.resetPullLoadState();!0===t.config.noScroll||t.$el.css({"overflow-y":"auto"}),t.isInLoading||(t.canRefresh?(t.setPullLoadingState(),t.pluginPullToRefreshMethod&&t.pluginPullToRefreshMethod.call(t.pageview.plugin,t,{})):t.resetPullLoadState())})}},i}),define("../../components/checkbox",["utils","base"],function(e,t){var i=e.getRealWidth(20),n=e.getRealWidth(4),a=e.getRealWidth(14),s={width:i,height:i,borderRadius:n,border:"1px solid rgb(229, 229, 229)",backgroundColor:"#fff",fontSize:a},r={width:i,height:i,borderRadius:n,border:"1px solid #0093ff",color:"#fff",backgroundColor:"#0093ff",fontSize:a},o=function(t){var i=this;t.style=t.style||{},this.uss=e.simpleExtendObj(e.clone(s),t.style),this.uss=e.simpleExtendObj(this.uss,t.unSelectedStyle||{}),
this.ss=e.simpleExtendObj(e.clone(r),t.selectedStyle||{}),this.ss=e.simpleExtendObj(this.ss,t.selectedStyle||{}),this.value=t.value,o.baseConstructor.call(this,t),this.$el.addClass("yy-checkbox yy-icommon"),this.setValue(this.value),this.$el.bind("click",function(){i.change()});var n=this.config.comKey+"_change";this.changeMethod=this.pageview.plugin[n]};return e.extends(o,t),o.prototype.change=function(){this.changeMethod&&this.changeMethod.call(this.pageview.plugin,this,{value:!this.value})},o.prototype.selected=function(t){t&&this.config.disableParentSelect||(this.value=!0,e.css(this.$el,this.ss),this.$el.addClass("yy-checkbox-selected"))},o.prototype.unSelected=function(t){t&&this.config.disableParentSelect||(this.value=!1,e.css(this.$el,this.uss),this.$el.removeClass("yy-checkbox-selected"))},o.prototype.setValue=function(t){this.value=t,t?(this.$el.addClass("yy-checkbox-selected"),e.css(this.$el,this.ss)):(this.$el.removeClass("yy-checkbox-selected"),e.css(this.$el,this.uss))},o}),define("../../components/checklist",["utils","base"],function(e,t){var i=function(t){if(this.itemData=t.itemData,this.parent=t.parent,"string"==typeof this.parent.primaryKey)this.key=this.itemData[this.parent.primaryKey];else if(this.parent.primaryKey instanceof Array){for(var i=[],n=0,a=this.parent.primaryKey.length;n<a;n++)i.push(this.itemData[this.parent.primaryKey[n]]);this.key=i.join("_")}else console.error("checklist控件primaryKey属性 错误的数据类型");this.$el=$("<div data-key='"+this.key+"' class='yy-checklist-item yy-icommon' style='height:"+t.parent.itemHeight+"px;line-height:"+t.parent.itemHeight+"px;font-size:"+e.fontSize13()+"px'>"+(t.itemData[t.parent.labelKey]||"")+"</div>")};i.prototype={selected:function(){this.$el.addClass("yy-checklist-item-selected")},unSelected:function(){this.$el.removeClass("yy-checklist-item-selected")}};var n=function(t){var i=this;n.baseConstructor.call(this,t);var a=e.getRealHeight("38");this.itemHeight=e.getRealHeight("48"),this.canbeNull=t.canbeNull||!1,this.selectedValue=[],this.$el.addClass("yy-checklist"),this.items=[],this.selectedValue=this.config.selectedValue||[],this.primaryKey=this.config.primaryKey,this.primaryKey||console.error(this.config.comKey+"控件没有指定primaryKey数据的主键"),this.loadWrapper=$("<div class='yy-cs-loading-wrapper displayflex jc-center ai-center'><div class='preloader'></div></div>"),this.backCoverLayer=$("<div class='yy-cl-coverlayer displaynone'></div>");var s=$("<div style='height:"+a+"px;font-size:"+e.fontSize(16)+"px;line-height:"+a+"px' class='displayflex jc-between ai-center yy-cl-title-wrapper'></div>");this.backCoverLayer.bind("touchmove",function(e){e.preventDefault(),e.stopPropagation()}),this.CancelBtn=$("<div  class='yy-checklist-btn'>"+e.getLanguageText("cancel")+"</div>"),this.OkBtn=$("<div class='yy-checklist-btn yy-checklist-okbtn'>"+e.getLanguageText("confirm")+"</div>"),s.append(this.CancelBtn).append(this.OkBtn),this.CancelBtn.bind("click",function(){i.cancel()}),this.OkBtn.bind("click",function(){i.OK()}),this.listWrapper=$("<div style='max-height:"+6.7*this.itemHeight+"px;' class='yy-cl-list-wrapper'></div>"),this.listWrapper.append(this.loadWrapper),this.pageview.$el.append(this.backCoverLayer),this.$el.append(s).append(this.listWrapper),this.labelKey=this.config.labelKey||"text",this.backCoverLayer.bind("click",function(){i.cancel()}),e.deviceInfo().isIOS?this.listWrapper.bind("singleTap",function(e){i.itemClick(e)}):this.listWrapper.bind("click",function(e){i.itemClick(e)});var r=this.config.comKey+"_selected";this.selectedMethod=this.pageview.plugin[r]};return e.extends(n,t),n.prototype.OK=function(){this.originalSelectedValue=e.copy(this.selectedValue),this.hide(),this.selectedMethod&&this.selectedMethod.call(this.pageview.plugin,this,{selectedValue:this.selectedValue})},n.prototype.cancel=function(){this.hide(),this.originalSelectedValue&&this.setItemSelected(this.originalSelectedValue,!0)},n.prototype._getPrimaryValue=function(e){var t="";if("string"==typeof this.primaryKey)t=e[this.primaryKey];else if(this.primaryKey instanceof Array){for(var i=[],n=0,a=this.primaryKey.length;n<a;n++)i.push(e[this.primaryKey[n]]);t=i.join("_")}else console.error("checklist控件primaryKey属性 错误的数据类型");return t},n.prototype.itemClick=function(e){var t=e.target.getAttribute("data-key");if(t){for(var i=null,n=0,a=this.items.length;n<a;n++)if(t==this.items[n].key){i=this.items[n];break}if(i){var s=this.selectedValue.indexOf(i.itemData);s>=0?this.selectedValue.splice(s,1):this.selectedValue.push(i.itemData),0!=this.selectedValue.length||this.canbeNull?this.OkBtn.removeClass("yy-disabled"):this.OkBtn.addClass("yy-disabled"),this.setItemSelected(this.selectedValue)}}},n.prototype.show=function(){this.$el.addClass("yy-checklist-show"),this.backCoverLayer.removeClass("displaynone"),this.init()},n.prototype.setItemSelected=function(t,i){for(var n=0,a=this.items.length;n<a;n++){var s=this.items[n];s.unSelected()}if(this.selectedValue=[],t.length>0)for(var r=0,o=t.length;r<o;r++)for(var l=this._getPrimaryValue(t[r]),n=0,a=this.items.length;n<a;n++){var s=this.items[n];s.key==l&&(s.selected(),this.OkBtn.removeClass("yy-disabled"),this.selectedValue.push(s.itemData))}i&&(this.originalSelectedValue=e.copy(this.selectedValue))},n.prototype.setSelectedValue=function(e){this.selectedValue=[],e instanceof Array||console.error("checklist setSelectedValue方法必须是数组"),this.items?this.setItemSelected(e,!0):this._midSelectedValue=e},n.prototype.createItems=function(e){this.dataSource=e,this.items=[],this.selectedValue=this.config.selectedValue||[],this.listWrapper.empty();for(var t=this.dataSource.length,n=0,a=t;n<a;n++){var s=this.dataSource[n],r=new i({itemData:s,parent:this});this.listWrapper.append(r.$el),this.items.push(r),t>1&&n!=t-1&&this.listWrapper.append("<div class='yy-checklist-line'></div>")}this._midSelectedValue&&(this.setItemSelected(this._midSelectedValue,!0),this._midSelectedValue=null),this.selectedValue.length>0?this.OkBtn.removeClass("yy-disabled"):this.OkBtn.addClass("yy-disabled"),this.setSelectedValue(this.config.selectedValue||[])},n.prototype.init=function(){var e=this;this.dataSource||(e.loadWrapper.removeClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),e.OkBtn.addClass("yy-disabled"),this.loadData(function(t){e.OkBtn.removeClass("yy-disabled"),e.loadWrapper.addClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),e.createItems(t)},function(){e.loadErrorWrapper||e.initLoadErrorDom(),e.loadErrorWrapper.removeClass("displaynone"),e.loadWrapper.addClass("displaynone")}))},n.prototype.loadData=function(e,t){if(this.dataSource)return void e(this.dataSource);var i=this.config.comKey+"_loaddata",n=this.pageview.plugin[i];n&&n.call(this.pageview.plugin,this,{success:e,error:t})},n.prototype.initLoadErrorDom=function(){var t=this,i=e.getRealWidth(11),n=e.getRealWidth(20);this.loadErrorWrapper=$("<div style='height:100px' class='yy-loadmore-wrapper displayflex jc-center ai-center flex-h'></div>");var a=$("<i style='font-size:"+n+"px' class='yy-icommon yy-loadmore-erroricon'></i>"),s=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>"+e.getLanguageText("NetworkError")+"</span>"),r=$("<span style='font-size:"+i+"px' class='yy-loadmore-reload-babel'>"+e.getLanguageText("reLoading")+"</span>");r.bind("click",function(){t.init()}),this.loadErrorWrapper.append(a).append(s).append(r),this.listWrapper.append(this.loadErrorWrapper)},n.prototype.hide=function(){this.$el.removeClass("yy-checklist-show"),this.backCoverLayer.addClass("displaynone")},n}),define("../../components/conditionselector",["utils","base"],function(e,t){var i=function(e){var t=this;this.rootInstance=e.parent,this.index=e.index,this.item=e.item,this.$el=$("<div class='displayflex yy-cs-item'></div>"),this.titleDom=$("<span style='font-size:"+this.rootInstance.itemFontSize+"'>"+this.item+"</span>"),this.itemDom=$("<div></div>"),1===this.rootInstance.config.mode?(this.itemDom.append(this.titleDom).append("<i></i>"),this.itemDom.addClass("yy-conditionselector-approve"),this.$el.append(this.itemDom)):this.$el.append(this.titleDom).append("<i></i>"),this.$el.appendTo(this.rootInstance.$el),this.$el.bind("click",function(){t.rootInstance.itemClick(t)})};i.prototype={selected:function(){this.$el.addClass("yy-cs-item-selected")},unSelected:function(){this.$el.removeClass("yy-cs-item-selected")}};var n=function(e){var t=this;this.isMulti=e.isMulti,this.parent=e.parent,this.barItemInstance=e.barItemInstance,this.rootInstance=e.rootInstance,this.index=this.barItemInstance.index,this.data=e.itemData;var i="menu"+this.index+"LabelKey",n=this.rootInstance.config[i];n||alert("程序配置错误"+this.rootInstance.config.comKey+"未配置 :"+i);var a="yy-cs-selector-item";if(this.isMulti){var s="menu"+this.index+"Col",r=this.rootInstance.config[s];a="yy-cs-muselector-item",r&&2==(r=parseInt(r))&&(a="yy-cs-muselector-item yy-cs-muselector-item2")}this.$el=$("<div class='"+a+" bottom-half-line'><span class='yy-cs-selector-span' style='font-size:"+this.rootInstance.itemFontSize+"'>"+(this.data[n]||"")+"</span></div>"),this.$el.css({height:this.rootInstance.itemHeight,lineHeight:this.rootInstance.itemHeight}),this.$el.bind("click",function(){t.parent.itemClick(t)})};n.prototype={selected:function(){var e=this.isMulti?"yy-cs-muselector-item-selected":"yy-cs-selector-item-selected";this.$el.addClass(e)},unSelected:function(){var e=this.isMulti?"yy-cs-muselector-item-selected":"yy-cs-selector-item-selected";this.$el.removeClass(e)}};var a=function(e){var t=this;this.isMulti=e.isMulti,this.parent=e.parent,this.barItemInstance=e.barItemInstance,this.rootInstance=e.rootInstance,this.dropDownInstance=e.dropDownInstance,this.index=this.barItemInstance.index,this.data=e.itemData,this.listWrapper=$("<div class='displayflex yy-cs-multiselector2 flex-v' style='display: none;'></div>");var i="menu"+this.index+"LabelKey",n=this.rootInstance.config[i];n||alert("程序配置错误"+this.rootInstance.config.comKey+"未配置 :"+i);var s="yy-cs-selector-item";if(this.isMulti){var r="menu"+this.index+"Col",o=this.rootInstance.config[r];s="yy-cs-muselector-item3",o&&2==(o=parseInt(o))&&(s="yy-cs-muselector-item yy-cs-muselector-item3")}e.detail?this.$el=$("<div class='"+s+" bottom-half-line' style='height: 50px;!important;line-height: 50px;margin-left: 54px;padding-left: 0;overflow-y: none;'><span class='yy-cs-selector-span2' style='font-size:14px;float: left;'>"+e.itemData.title+"</span><span data-comname='checkbox_select_icon_s' class='checkbox_select_icon2 yy-checkbox yy-icommon' style='position: absolute;'></span></div>"):e.itemData.list&&0!==e.itemData.list.length?this.$el=$("<div class='"+s+" bottom-half-line' style='height: 50px;!important;'><span data-comname='checkbox_select_icon_s' class='checkbox_select_icon_s yy-checkbox yy-icommon checkbox_select_icon_js' ></span><span class='yy-cs-selector-span' style='font-size:14px;float: left;'>"+(this.data[n]||"")+"</span><span class='yy_arrow_icon arrow_icon'></span></div>"):this.$el=$("<div class='"+s+" bottom-half-line' style='height: 50px;!important;'><span data-comname='checkbox_select_icon_s' class='checkbox_select_icon_s yy-checkbox yy-icommon checkbox_select_icon_js' ></span><span class='yy-cs-selector-span' style='font-size:14px;float: left;'>"+(this.data[n]||"")+"</span></div>"),this.$el.css({height:"50px",lineHeight:"50px"}),this.$el.bind("click",function(e){if(!$(e.target).hasClass("checkbox_select_icon_js")&&"DIV"!==e.target.tagName&&t.data.list)return void($(e.target).hasClass("arrow_icon")?$(e.target).hasClass("yy_arrow_icon")?(t.listWrapper.show(),t.data.hasAppend||(t.data.list.forEach(function(e,i){var n=new a({rootInstance:t.rootInstance,barItemInstance:t.barItemInstance,dropDownInstance:t.dropDownInstance,parent:t,itemData:e,isMulti:!0,detail:!0});t.listWrapper.append(n.$el)}),t.$el.after(t.listWrapper),t.data.hasAppend=!0),$(e.target).removeClass("yy_arrow_icon").addClass("yy_arrow_icon_up")):(t.listWrapper.hide(),$(e.target).removeClass("yy_arrow_icon_up").addClass("yy_arrow_icon")):$(e.target).siblings(".arrow_icon").hasClass("yy_arrow_icon")?(t.listWrapper.show(),t.data.hasAppend||(t.data.list.forEach(function(e,i){var n=new a({rootInstance:t.rootInstance,barItemInstance:t.barItemInstance,dropDownInstance:t.dropDownInstance,parent:t,itemData:e,isMulti:!0,detail:!0});t.listWrapper.append(n.$el)}),t.$el.after(t.listWrapper),t.data.hasAppend=!0),$(e.target).siblings(".arrow_icon").removeClass("yy_arrow_icon").addClass("yy_arrow_icon_up")):(t.listWrapper.hide(),$(e.target).siblings(".arrow_icon").removeClass("yy_arrow_icon_up").addClass("yy_arrow_icon")));t.data.title?t.parent.parent.itemClick(t):t.parent.itemClick(t)})};a.prototype={selected:function(){var e=this.isMulti?"yy-cs-muselector-item2-selected":"yy-cs-selector-item2-selected";this.data.title&&(e=this.isMulti?"yy-cs-muselector-item3-selected":"yy-cs-selector-item3-selected"),this.$el.addClass(e)},unSelected:function(){var e=this.isMulti?"yy-cs-muselector-item2-selected":"yy-cs-selector-item2-selected";this.data.title&&(e=this.isMulti?"yy-cs-muselector-item3-selected":"yy-cs-selector-item3-selected"),this.$el.removeClass(e)}};var s=function(e){var t=this;this.parent=e.parent,this.index=e.index,this.title=e.title,this.rootInstance=e.rootInstance,this.$el=$("<div style='font-size:"+this.rootInstance.itemFontSize+"' class='displayflex yy-cs-selector-leftitem flex-h jc-start ai-center'>"+this.title+"</div>"),this.$el.css({height:this.rootInstance.itemHeight}),this.$el.bind("touchstart",function(){t.parent.leftItemClick(t)})};s.prototype={selected:function(){this.$el.addClass("yy-cs-selector-leftitem-selected")},unSelected:function(){this.$el.removeClass("yy-cs-selector-leftitem-selected")}};var r=function(t){this.$el=$("<div class='displayflex yy-cs-multiselector2 flex-v'></div>"),this.listWrapper=$("<div class='displayflex yy-cs-multiselector-list2 flex-h'></div>"),this.btnWrapper=$("<div class='displayflex yy-cs-multiselector-bottom flex-h'></div>"),this.btnWrapper.css({height:e.getRealHeight(40)+"px"});var i=this;this.rootInstance=t.rootInstance,this.barItemInstance=t.barItemInstance,this.dropDownInstance=t.dropDownInstance,this.index=this.barItemInstance.index,this.data=t.data,this.items=[],this.selectedItems=[];var a=this.rootInstance.config["menu"+this.index+"Style"];if(a){var s=a.maxHeight||a["max-height"];s&&this.listWrapper.css({maxHeight:s})}for(var r=0,o=this.data.length;r<o;r++){var l=this.data[r],c=new n({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,itemData:l,isMulti:!0});this.items.push(c),this.listWrapper.append(c.$el)}var p=$("<div class='displayflex yy-cs-btn jc-center ai-center'>"+e.getLanguageText("reset")+"</div>"),d=$("<div class='displayflex yy-cs-btn yy-cs-ok-btn jc-center ai-center'>"+e.getLanguageText("confirm")+"</div>");this.btnWrapper.append(p).append(d),p.bind("click",function(){i.reset()}),this.$el.append(this.listWrapper).append(this.btnWrapper)};r.prototype={reset:function(){for(var e=0,t=this.selectedItems.length;e<t;e++)this.selectedItems[e].unSelected();this.selectedItems=[]},itemClick:function(e){var t=this.selectedItems.indexOf(e);t>=0?(e.unSelected(),this.selectedItems.splice(t,1)):(e.selected(),this.selectedItems.push(e))}};var o=function(t){this.$el=$("<div class='displayflex yy-cs-multiselector2 flex-v'></div>"),this.listWrapper=$("<div class='displayflex yy-cs-multiselector-list2 flex-h'></div>"),this.btnWrapper=$("<div class='displayflex yy-cs-multiselector-bottom flex-h' style='position: fixed;left: 0;right: 0;bottom: 0;margin-left: 20%;'></div>"),this.btnWrapper.css({height:e.getRealHeight(40)+"px"});var i=this;this.rootInstance=t.rootInstance,this.barItemInstance=t.barItemInstance,this.dropDownInstance=t.dropDownInstance,this.index=this.barItemInstance.index,this.data=t.data,this.items=[],this.selectedItems=[];var n=this.rootInstance.config["menu"+this.index+"Style"];if(n){var s=n.maxHeight||n["max-height"];s&&this.listWrapper.css({maxHeight:s})}for(var r=0,o=this.data.length;r<o;r++){var l=this.data[r],c=new a({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,itemData:l,isMulti:!0});this.items.push(c),this.listWrapper.append(c.$el)}var p=$("<div class='displayflex yy-cs-btn jc-center ai-center' style='background-color: #BFEFFF ;color: #29B6F6;'>"+e.getLanguageText("reset")+"</div>"),d=$("<div class='displayflex yy-cs-btn yy-cs-ok-btn jc-center ai-center' style='color: #fff;background-color: #29B6F6'>"+e.getLanguageText("confirm")+"</div>");this.btnWrapper.append(p).append(d),p.bind("click",function(){i.reset()}),d.bind("click",function(){var t=i.rootInstance.config.comKey+"_menu"+i.index+"_itemClick",n=i.rootInstance.pageview.plugin[t],a="";i.curSelectedItem=[],i.selectedItems.forEach(function(e,t){i.curSelectedItem.push(e)}),i.showName="",i.curSelectedItem.forEach(function(e,t){i.showName+=e.data.title?e.data.title:e.data.name,e.data.name&&(a=e.data.name),t<i.curSelectedItem.length-1&&(i.showName+=",")}),0!==i.curSelectedItem.length?("全部类型"===a||"All Types"===a?i.barItemInstance.titleDom.html(a):i.barItemInstance.titleDom.html(e.getLanguageText("type")),i.barItemInstance.itemDom.css({border:"1px solid #29B6F6",color:"#29B6F6",background:"#fff"})):i.barItemInstance.itemDom.css({border:"none",color:"#262626",background:"#F7F7F7"}),n&&n.call(i.rootInstance.pageview.plugin,i)}),this.$el.append(this.listWrapper),$(this.dropDownInstance.DropDownWrapper.$innerWrapper[0]).css("background","#fff"),this.dropDownInstance.DropDownWrapper.$innerWrapper.css({marginLeft:"20%"}),this.rootInstance.dpdWrapper.$el.append(this.btnWrapper)};o.prototype={reset:function(){for(var e=0,t=this.selectedItems.length;e<t;e++)$(this.selectedItems[e].$el).find(".checkbox_select_icon_s,.checkbox_select_icon2").css("border-color","rgb(229,229,229)"),this.selectedItems[e].unSelected();this.selectedItems=[]},itemClick:function(e){var t=this.selectedItems.indexOf(e);if(t>=0)e.unSelected(),$(e.$el).find(".checkbox_select_icon_s,.checkbox_select_icon2").css("border-color","rgb(229,229,229)"),this.selectedItems.splice(t,1);else{if(e.data.name){for(var i=0,n=this.selectedItems.length;i<n;i++)$(this.selectedItems[i].$el).find(".checkbox_select_icon_s,.checkbox_select_icon2").css("border-color","rgb(229,229,229)"),this.selectedItems[i].unSelected();this.selectedItems=[]}else for(var a=0,s=this.selectedItems.length;a<s;a++)this.selectedItems[a].data.name&&($(this.selectedItems[a].$el).find(".checkbox_select_icon_s,.checkbox_select_icon2").css("border-color","rgb(229,229,229)"),this.selectedItems[a].unSelected(),this.selectedItems.splice(a,1));e.selected(),$(e.$el).find(".checkbox_select_icon_s,.checkbox_select_icon2").css("border-color","#29B6F6"),this.selectedItems.push(e)}}};var l=function(e){this.$el=$("<div class='displayflex yy-cs-selector flex-v'></div>");this.rootInstance=e.rootInstance,this.barItemInstance=e.barItemInstance,this.dropDownInstance=e.dropDownInstance,this.index=this.barItemInstance.index,this.data=e.data,this.items=[];var t=e.dropDownInstance.rootInstance.config["menu"+e.index+"selectedKey"],i=this.rootInstance.config["menu"+this.index+"Style"];if(i){var a=i.maxHeight||i["max-height"];a&&this.$el.css({maxHeight:a})}for(var s=0,r=this.data.length;s<r;s++){var o=this.data[s],l=new n({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,itemData:o});void 0!==t&&t===s&&(l.selected(),this.curSelectedItem=l),this.items.push(l),this.$el.append(l.$el)}l.rootInstance.dpdWrapper.$innerWrapper.css({backgroundColor:"rgba(0,0,0,0.1)",marginLeft:"0"})};l.prototype={itemClick:function(e){var t=this.rootInstance.config.comKey+"_menu"+this.index+"_itemClick",i=this.rootInstance.pageview.plugin[t];this.curSelectedItem&&this.curSelectedItem.unSelected(),this.curSelectedItem=e,this.curSelectedItem.selected(),this.barItemInstance.titleDom.html(e.data.name),i&&i.call(this.rootInstance.pageview.plugin,this)}};var c=function(t){this.config=t,this.rootInstance=t.rootInstance,this.barItemInstance=t.barItemInstance,this.index=this.barItemInstance.index,this.dropDownInstance=t.dropDownInstance,this.$el=$("<div class='displayflex yy-cs-selector flex-h'></div>"),this.leftWrapper=$("<div class='displayflex yy-cs-selector-left flex-v'></div>"),this.rightWrapper=$("<div class='yy-cs-selector-right'></div>");var i=this.rootInstance.config["menu"+this.index+"Style"];if(i){var n=i.maxHeight||i["max-height"];n&&(this.$el.css({maxHeight:n}),this.rightWrapper.css({maxHeight:n}),this.leftWrapper.css({maxHeight:n}))}var a="menu"+t.index+"LeftStyle",s=t.rootInstance.config[a],r="menu"+t.index+"GroupKey";this.groupKey=t.rootInstance.config[r],this.groupKey||alert("程序配置错误"+this.rootInstance.config.comKey+"未配置 :"+r),s&&e.css(this.leftWrapper,s),this.leftItems=[],this.$el.append(this.leftWrapper).append(this.rightWrapper),this._processData(this.config.data),this.rightMenuWrapperDict={},this._initLeftLayout()};c.prototype={leftItemClick:function(e){this.curLeftSelectedItem&&this.curLeftSelectedItem.unSelected(),this.curLeftSelectedItem=e,e.selected(),this.showRightMenu()},itemClick:function(e){this.curSelectedItem&&this.curSelectedItem.unSelected(),this.curSelectedItem=e,this.curSelectedItem.selected()},showRightMenu:function(){var e=this.curLeftSelectedItem.index.toString(),t=this.rightMenuWrapperDict[e];t||(t=this._initRightMenuWrapper(parseInt(e)-1),this.rightMenuWrapperDict[e]=t),this.curRightMenuWrapper&&this.curRightMenuWrapper.addClass("displaynone"),this.curRightMenuWrapper=t,this.curRightMenuWrapper.removeClass("displaynone")},_initRightMenuWrapper:function(e){var t=$("<div class='displayflex flex-v yy-cs-selector-right-menuwrapper displaynone'></div>"),i=this.rightDataArrArr[e];if(i)for(var a=0,s=i.length;a<s;a++){var r=i[a],o=new n({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,itemData:r});t.append(o.$el)}return this.rightWrapper.append(t),t},_initLeftLayout:function(){for(var e=["全部"].concat(this.leftDataArr),t=0,i=e.length;t<i;t++){var n=e[t],a=new s({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,index:t,title:n});this.leftItems.push(a),this.leftWrapper.append(a.$el)}this.leftItemClick(this.leftItems[0])},_processData:function(e){this.leftDataArr=[],this.rightDataArrArr=[];for(var t=0,i=e.length;t<i;t++){var n=e[t],a=n[this.groupKey];if(!a){alert("程序配置错误"+this.rootInstance.config.comKey+" 数据源中 没有相关的分类字段:"+this.groupKey);break}var s=this.leftDataArr.indexOf(a);s<0&&(this.leftDataArr.push(a),s=this.leftDataArr.length-1,this.rightDataArrArr.push([]));var r=this.rightDataArrArr[s];r||(r=[],this.rightDataArrArr[s]=r),r.push(n)}}};var p=function(t){this.rootInstance=t.rootInstance,this.barItemInstance=t.barItemInstance,this.index=this.barItemInstance.index.toString(),this.DropDownWrapper=t.parent,this.hasInit=!1,this.isLoading=!1,this.$el=$("<div class='yy-cs-item-dropdown' style='min-height:100px;padding-bottom: 40px'></div>"),this.loadWrapper=$("<div class='yy-cs-loading-wrapper displayflex jc-center ai-center displaynone'><div class='preloader'></div></div>"),(t.parent.categoryPara||"全部类型"===t.barItemInstance.item||"All Types"===t.barItemInstance.item)&&(this.loadWrapper=$("<div class='yy-cs-loading-wrapper yy-cs-loading-wrapper2 displayflex jc-center ai-center displaynone' style=''><div class='preloader' style='position: absolute;left: 40%;top:30%'></div></div>")),this.$el.append(this.loadWrapper);var i=this.rootInstance.config["menu"+this.index+"Style"];i?e.css(this.$el,i):this.$el.css({height:"100px"}),this.DropDownWrapper.$innerWrapper.append(this.$el)};p.prototype={show:function(t){var i=this,n=t?e.processTransitionTanformStyle("transform .3s ease","translate3d(0,0,0)"):e.processTransitionTanformStyle("none","translate3d(0,0,0)");t?window.setTimeout(function(){i.$el.css(n)},0):this.$el.css(n),this.hasInit||this.isLoading||this.init()},initLoadErrorDom:function(){var e=this;this.loadErrorWrapper=this.rootInstance._createErrorDom(function(){e.init()}),this.$el.append(this.loadErrorWrapper)},init:function(){var e=this;this.isLoading||(this.isLoading=!0,this.loadWrapper.removeClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),this.loadData(function(t){e.loadWrapper.addClass("displaynone"),e.dataSource=t,e.isLoading=!1,e.initLayout(e.dataSource)},function(t){e.loadErrorWrapper||e.initLoadErrorDom(),e.loadWrapper.addClass("displaynone"),e.loadErrorWrapper.removeClass("displaynone"),e.isLoading=!1}))},initLayout:function(e){var t="menu"+this.index+"Mode",i=this.rootInstance.config[t]||"single";"全部类型"!==this.barItemInstance.item&&"All Types"!==this.barItemInstance.item||(i="mix");var n={data:e,index:this.index,rootInstance:this.rootInstance,dropDownInstance:this,barItemInstance:this.barItemInstance};this.selector="single"==i?new l(n):"group"==i?new c(n):"multi"==i?new r(n):"mix"==i?new o(n):new l(n),this.$el.append(this.selector.$el),this.hasInit=!0},loadData:function(e,t){if(this.dataSource)return void e(this.dataSource);var i=this.rootInstance.config.comKey+"_menu"+this.index+"_loaddata",n=this.rootInstance.pageview.plugin[i];n&&n.call(this.rootInstance.pageview.plugin,this,{success:e,error:t})},hide:function(t){var i=t?e.processTransitionTanformStyle("transform .3s ease","translate3d(0,-100%,0)"):e.processTransitionTanformStyle("none","translate3d(0,-100%,0)");this.$el.css(i)}};var d=function(e){var t=this;this.parent=e.parent,this.isShow=!1,this.DropDowns={},this.$el=$("<div class='yy-cs-dropdown' style='background-color: rgba(0,0,0,0.5);!important;'></div>"),this.curDropDown=null,e.parent.categoryPara?(this.categoryPara=e.parent.categoryPara,this.$innerWrapper=$("<div class='yy-cs-dropdown-inner' style='margin-left: 20%'></div>")):this.$innerWrapper=$("<div class='yy-cs-dropdown-inner'></div>"),this.$el.append(this.$innerWrapper),this.$innerWrapper.bind("click",function(e){t._hideSelf(e)}),this.$el.bind("click",function(e){t._hideSelf(e)}),this.parent.pageview.$el.closest(".yy-root-view").children(".yy-pageview:last-child").append(this.$el)};d.prototype={_hideSelf:function(e){"yy-cs-dropdown-inner"==e.target.className&&this.hide(),"yy-cs-dropdown"==e.target.className&&this.hide()},show:function(e){if(!this.isShow){var t=this.parent.$el[0].getBoundingClientRect(),i={top:t.bottom,left:0,bottom:0,right:0,display:"block"};this.$el.css(i),this.isShow=!0}var n=e.index.toString(),a=this.DropDowns[n];a||(a=new p({parent:this,rootInstance:this.parent,barItemInstance:e}),this.DropDowns[n]=a),this.curDropDown?this.curDropDown===a?(this.curDropDown.barItemInstance.unSelected(),this.curDropDown.hide(!0),this.curDropDown=null,this.hide()):(this.curDropDown.hide(!1),this.curDropDown.barItemInstance.unSelected(),this.curDropDown=a,this.curDropDown.show(!1),this.curDropDown.barItemInstance.selected()):(this.curDropDown=a,this.curDropDown.barItemInstance.selected(),this.curDropDown.show(!0))},hide:function(){var e=this;this.isShow&&(this.isShow=!1,this.curDropDown&&(this.curDropDown.barItemInstance.unSelected(),this.curDropDown.hide(!0)),this.curDropDown=null,window.setTimeout(function(){e.$el.css({display:"none"})},300))}};var h=function(t){h.baseConstructor.call(this,t),this.itemHeight=t.itemHeight||e.getRealHeight(40)+"px",this.itemFontSize=t.itemFontSize||e.getRealWidth(12)+"px",this.$el.addClass("displayflex yy-condition-selector flex-h"),this.items=t.items||["全部"],this.initBarItem()};return e.extends(h,t),h.prototype.hideDropDown=function(){void 0!==this.dpdWrapper&&this.dpdWrapper.hide()},h.prototype.showDropDown=function(e){"全部类型"!==e.item&&"All Types"!==e.item||(this.categoryPara=!0),this.dpdWrapper||(this.dpdWrapper=new d({parent:this})),this.dpdWrapper.show(e)},h.prototype.itemClick=function(e){e.rootInstance.dpdWrapper&&e.rootInstance.dpdWrapper.$innerWrapper&&("全部类型"===e.item||"All Types"===e.item?(this.dpdWrapper.isShow?"全部类型"===e.$el.find("span").text()||"All Types"===e.$el.find("span").text()?e.itemDom.css({border:"none",color:"#262626",background:"#F7F7F7"}):e.itemDom.css({border:"1px solid #29B6F6",color:"#29B6F6",background:"#fff"}):e.itemDom.css({border:"solid 1px #eee",color:"#262626",background:"#fff"}),$(e.rootInstance.dpdWrapper.$el[0]).find(".yy-cs-multiselector-bottom").show(),e.rootInstance.dpdWrapper.$innerWrapper.css({background:"#fff",marginLeft:"20%"})):($(e.rootInstance.dpdWrapper.$el[0]).find(".yy-cs-multiselector-bottom").css("display","none"),e.rootInstance.dpdWrapper.$innerWrapper.css({backgroundColor:"rgba(0,0,0,0.1)",marginLeft:"0"}))),this.showDropDown(e)},h.prototype.initBarItem=function(){for(var e=(this.config.barItemStyle,0),t=this.items.length;e<t;e++){new i({parent:this,item:this.items[e],index:e})}},h}),define("../../components/dialog",["utils","base"],function(e,t){var i=function(t){var i=this,n=t.wrapper||$(document.body),a=t.mode||1,s=t.className;this.dialogBackCover=$("<div style='visibility: hidden;' class='yy-dialog-bk'></div>"),this.dialogWrapper=$("<div class='yy-dialog-wrapper yy-dialog-effect-"+a+" yy-dialog-hide + "+s+"'></div>");var r=$("<div class='yy-dialog-inner'></div>"),o=$("<div class='yy-dialog-body'></div>"),l="row"===t.btnDirection?"yy-fd-row":"yy-fd-column",c=$("<div class='yy-dialog-btn-wrapper displayflex "+l+"'></div>");this.dialogBackCover.bind("click",function(){i.hide()});var p=t.title||"";this.titleDom=$("<div class='yy-dialog-title'>"+p+"</div>"),this.bodyContentDom=$("<div class='yy-dialog-content'></div>");var d=t.createContent;if(d)d(this.bodyContentDom);else{var h=t.contentText;this.contentTextDom=$("<div class='yy-dialog-content-text'>"+h+"</div>"),this.bodyContentDom.append(this.contentTextDom)}if(o.append(this.titleDom).append(this.bodyContentDom),t.buttons)for(var u=0,f=t.buttons.length;u<f;u++){var g=t.buttons[u],p=g.title||e.getLanguageText("button"),m=g.style,y=g.onClick;!function(t,i,n,a,s){var r=$("<div class='yy-dialog-btn yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+t+"</div>");i&&e.css(r,i),a&&r.bind("click",function(e){a()}),n.append(r)}(p,m,c,y)}r.append(o).append(c),this.dialogWrapper.append(r),n.append(this.dialogWrapper).append(this.dialogBackCover)};return i.prototype.show=function(){var e=this;this.dialogWrapper.css({visibility:"visible"}),this.dialogBackCover.css({visibility:"visible"}),this.dialogBackCover.addClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.removeClass("yy-dialog-hide").addClass("yy-dialog-show")},1)},i.prototype.hide=function(){var e=this;this.dialogWrapper.removeClass("yy-dialog-show").addClass("yy-dialog-hide"),this.dialogBackCover.removeClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.css({visibility:"hidden"}),e.dialogBackCover.css({visibility:"hidden"})},200)},i}),define("../../components/filetypeselect",["utils","base"],function(e,t){var i=function(e){var t=this,i=e.wrapper||$(document.body),n=e.mode||1,a=e.className;this.dialogBackCover=$("<div style='visibility: hidden;' class='yy-dialog-bk'></div>"),this.dialogWrapper=$("<div class='yy-dialog-wrapper yy-dialog-effect-"+n+" yy-dialog-hide + "+a+"'></div>");var s=$("<div class='yy-dialog-inner'></div>"),r=$("<div class='yy-dialog-body'></div>");this.dialogBackCover.bind("click",function(){t.hide()}),this.bodyContentDom=$("<div class=''></div>");var o=e.createContent;if(o)o(this.bodyContentDom);else{e.contentText.forEach(function(e,i){"files"===e.type&&(t.filesTpye=$("<div class='yy-select-file-type-content-text'>"+e.text+"</div>"),e.onClick&&t.filesTpye.bind("click",function(i){e.onClick(e),t.hide()}),t.bodyContentDom.append(t.filesTpye)),"photo"===e.type&&(t.photoTpye=$("<div class='yy-select-file-type-content-text'>"+e.text+"</div>"),
e.onClick&&t.photoTpye.bind("click",function(i){e.onClick(e),t.hide()}),t.bodyContentDom.append(t.photoTpye)),"video"===e.type&&(t.videoTpye=$("<div class='yy-select-file-type-content-text'>"+e.text+"</div>"),e.onClick&&t.videoTpye.bind("click",function(i){e.onClick(e),t.hide()}),t.bodyContentDom.append(t.videoTpye)),"pic"===e.type&&(t.picTpye=$("<div class='yy-select-file-type-content-text'>"+e.text+"</div>"),e.onClick&&t.picTpye.bind("click",function(i){e.onClick(e),t.hide()}),t.bodyContentDom.append(t.picTpye))})}r.append(this.bodyContentDom),s.append(r),this.dialogWrapper.append(s),i.append(this.dialogWrapper).append(this.dialogBackCover)};return i.prototype.show=function(){var e=this;this.dialogWrapper.css({visibility:"visible"}),this.dialogBackCover.css({visibility:"visible"}),this.dialogBackCover.addClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.removeClass("yy-dialog-hide").addClass("yy-dialog-show")},1)},i.prototype.hide=function(){var e=this;this.dialogWrapper.removeClass("yy-dialog-show").addClass("yy-dialog-hide"),this.dialogBackCover.removeClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.css({visibility:"hidden"}),e.dialogBackCover.css({visibility:"hidden"})},200)},i}),define("../../components/icon",["utils","base"],function(e,t){var i=function(t){var n=this;i.baseConstructor.call(this,t),this.$el.addClass("displayflex yy-icon yy-ai-center yy-jc-center");var a=this.config.font||"",s=a.split("_");this.text=this.config.text;var r=(this.config.style,this.config.iconStyle),o=this.config.iconClassName,l=this.config.textStyle,c=this.config.textPos||"right";this.iconDom=null,this.textDom=null,this.title=this.config.title||"";var p,d;if(2==s.length&&(p=s[0],d=s[1],e.css(this.$el,{fontFamily:p}),this.iconDom=$('<i class="yy-icon-code" data-code="'+d+'" data-icon="&#x'+d+';"></i>'),r&&e.css(this.iconDom,r),o&&this.iconDom.addClass(o)),null!==this.config.src&&void 0!==this.config.src){var h="",u=new Image;this.iconDom=$('<div class="yy-icon-img"></div>'),r&&e.css(this.iconDom,r),o&&this.iconDom.addClass(o),u.onerror=function(){var i=n.config.comKey+"_error",a=n.pageview.plugin[i];if(n.title.length>0){var s=e.getImgTitle(n.title);return n.iconDom.html(s),n.iconDom.addClass("displayflex yy-ai-center yy-jc-center"),n.iconDom.css({color:"#fff",fontSize:e.fontSize(13),backgroundColor:e.getImgBg(s)}),void(a&&a.call(n.pageview.plugin,n,{}))}if(t.defaultSrc){if(h===t.defaultSrc)return void n.img.classList.add("displaynone");h=t.defaultSrc,u.src=t.defaultSrc,a&&a.call(n.pageview.plugin,n,{})}},u.src=this.config.src,this.iconDom.append(u)}(this.text||0==this.text)&&(this.text=null===this.text||void 0===this.text?"":this.text,this.textDom=$("<span class='yy-icon-text yy-text-box'>"+this.text+"</span>"),this.config.numberofline&&(this.textDom[0].style["-webkit-line-clamp"]=this.config.numberofline),l&&e.css(this.textDom,l)),"left"==c||"top"==c?(this.textDom&&this.$el.append(this.textDom),this.iconDom&&this.$el.append(this.iconDom)):(this.iconDom&&this.$el.append(this.iconDom),this.textDom&&this.$el.append(this.textDom)),this.iconDom&&("left"==c||"right"==c?this.$el.addClass("flex-h"):this.$el.addClass("flex-v"));var f=t.comKey+"_change",g=n.pageview.plugin[f];g&&this.textDom.bind("change",function(e){!n.disabled&&g&&g.call(n.pageview.plugin,n,{e:e})}),this.originalStatus={font:a,text:this.config.text}};return e.extends(i,t),i.prototype.changeStatus=function(t){var i=this.originalStatus;if(t&&""!==t&&this.config.status&&(i=this.config.status[t]||this.originalStatus),this.status=t,i.font){var n=i.font.split("_");if(2!=n.length)return;var a=n[0],s=n[1],r=$('<i class="yy-icon-code" data-code="'+s+'" data-icon="&#x'+s+';"></i>');e.css(r,{fontFamily:a}),this.iconDom.replaceWith(r),this.iconDom=r,this.config.iconStyle&&e.css(this.iconDom,this.config.iconStyle)}var o=i.text||"";this.setText(o)},i.prototype.setIcon=function(t,i){var n=t.split("_");if(2==n.length){var a=n[0],s=n[1],r=$('<i class="yy-icon-code" data-code="'+s+'" data-icon="&#x'+s+';"></i>');if(e.css(r,{fontFamily:a}),this.iconDom.replaceWith(r),this.iconDom=r,this.config.iconStyle){var o=e.clone(this.config.iconStyle);if(i)for(var l in i)o[l]=i[l];e.css(this.iconDom,o)}}},i.prototype.setText=function(e){this.text=e,this.textDom.html(e)},i.prototype.getText=function(e){return this.text},i.prototype.setAttribute=function(e,t){this.$el.attr(e,t),this.textDom&&this.textDom.attr(e,t),this.iconDom&&this.iconDom.attr(e,t)},i}),define("../../components/image",["utils","base"],function(e,t){var i=function(t){var n=this;i.baseConstructor.call(this,t),n.config.style=n.config.style||{};this.src=t.src||t.defaultSrc,this.title=this.config.title||"",this.width=this.config.style.width;try{this.width=parseInt(width)}catch(e){this.width=null}this.height=this.config.style.height;try{this.height=parseInt(height)}catch(e){this.height=null}this.img=new Image;var a="";this.img.onload=function(){var t={};if(n.height&&n.width){var i=e.getPicSize(n.width,n.height,n.img.width,n.img.height);t.width=i.w,t.height=i.h}else t.height="100%",t.width="100%";n.config.style.borderRadius&&(t.borderRadius=n.config.style.borderRadius),e.css($(n.img),t)},this.img.onerror=function(){var i=n.config.comKey+"_error",s=n.pageview.plugin[i];if(s&&s.call(n.pageview.plugin,n,{}),n.title.length>0){var r=e.getImgTitle(n.title);return n.$el.html(r),void n.$el.css({color:"#fff",fontSize:e.fontSize(n.config.style.fontSize||13),backgroundColor:e.getImgBg(r)})}if(t.defaultSrc){if(a===t.defaultSrc)return void n.img.classList.add("displaynone");a=t.defaultSrc,n.img.src=t.defaultSrc}},this.src=this.src||"",this.img.src=this.src,n.$el.append(n.img),this.$el.addClass("yy-image displayflex yy-jc-center yy-ai-center")};return e.extends(i,t),i.prototype.setSrc=function(e){this.$el.find("img").length>0?this.$el.find("img").attr("src",e):(this.img.src=e,this.$el.html(this.img))},i.prototype.setTitle=function(t){var i=this,n=e.getImgTitle(t);this.$el.html(n),this.$el.css({color:"#fff",fontSize:e.fontSize(i.config.style.fontSize||13),backgroundColor:e.getImgBg(n)})},i}),define("../../components/input",["utils","base"],function(e,t){var i=function(t){var n=this;i.baseConstructor.call(this,t),this.config.style=this.config.style||{},this.$el.addClass("displayflex yy-input flex-h");var a=this.config.mode||"text",s=this.config.placeholder||"",r=t.isInForm,o="number"===a?"text":a;this.input=$("<input class='yy-flex-1' placeholder='"+s+"' type='"+o+"' />");var l={fontSize:this.config.style.fontSize||"13px",color:this.config.style.color||"#262626",textAlign:this.config.style.textAlign||"left"};(this.config.value||0===this.config.value)&&this.input.val(this.config.value),e.css(this.input,l),this.config.disabled&&this.setDisabled(!0),!0===r?(this.Form=$("<form action=''></form>"),this.Form.bind("submit",function(e){var i=t.comKey+"_formsubmit",a=n.pageview.plugin[i];return a&&!n.disabled&&a&&a.call(n.pageview.plugin,n,{e:e}),e.preventDefault(),!1}),this.Form.append(this.input),this.$el.append(this.Form)):this.$el.append(this.input);var c=t.comKey+"_compositionend",p=n.pageview.plugin[c];p&&this.$el.on("input",function(e){n.$el.prop("comStart")||!n.disabled&&p&&p.call(n.pageview.plugin,n,{e:e})}).on("compositionstart",function(){n.$el.prop("comStart",!0)}).on("compositionend",function(e){n.$el.prop("comStart",!1),!n.disabled&&p&&p.call(n.pageview.plugin,n,{e:e})});var d=t.comKey+"_compositionstart",h=n.pageview.plugin[d];h&&this.input.bind("compositionstart",function(e){!n.disabled&&h&&h.call(n.pageview.plugin,n,{e:e})});var u=t.comKey+"_keydown",f=n.pageview.plugin[u];"number"===a&&(this.$el.on("input",function(e){var t=n.input.val();if(190===e.keyCode&&t.indexOf(".")>=0)return e.stopPropagation(),e.preventDefault(),void(e.returnValue=!1)}),this.$el.bind("keydown",function(e){var t=n.input.val();return 190===e.keyCode&&t.indexOf(".")>=0?(e.stopPropagation(),e.preventDefault(),void(e.returnValue=!1)):189==e.keyCode||190==e.keyCode||46==e.keyCode||8==e.keyCode||37==e.keyCode||39==e.keyCode||e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105?void(!n.disabled&&f&&f.call(n.pageview.plugin,n,{e:e})):(e.stopPropagation(),e.preventDefault(),void(e.returnValue=!1))}),this.input.on("compositionstart",function(e){var t=n.input.val();isNaN(t)&&(t=t.replace(/[^0-9\.]/g,""),n.setValue(t))}),this.input.on("compositionend",function(e){var t=n.input.val();isNaN(t)&&(t=t.replace(/[^0-9\.]/g,""),n.setValue(t))})),f&&"number"!==a&&this.$el.bind("keydown",function(e){!n.disabled&&f&&f.call(n.pageview.plugin,n,{e:e})});var g=t.comKey+"_keyup",m=n.pageview.plugin[g];m&&this.$el.bind("keyup",function(e){!n.disabled&&m&&m.call(n.pageview.plugin,n,{e:e})});var y=t.comKey+"_focus",v=n.pageview.plugin[y];v&&this.input.bind("focus",function(e){!n.disabled&&v&&v.call(n.pageview.plugin,n,{e:e})});var w=t.comKey+"_blur",b=n.pageview.plugin[w];b&&this.input.bind("blur",function(e){!n.disabled&&b&&b.call(n.pageview.plugin,n,{e:e})});var x=t.comKey+"_input",C=n.pageview.plugin[x];C&&this.input.bind("input",function(e){!n.disabled&&C&&C.call(n.pageview.plugin,n,{e:e})});var _=t.comKey+"_change",S=n.pageview.plugin[_];S&&this.input.bind("change",function(e){!n.disabled&&S&&S.call(n.pageview.plugin,n,{e:e})})};return e.extends(i,t),i.prototype.getValue=function(){var e=$.trim(this.input.val());return"number"===this.config.mode?(e=$.trim(this.input.val()),e=e||""):e=this.input.val(),"number"!==this.config.mode?(e=e.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]|[\uD800-\uDBFF]|[\uDC00-\uDFFF]/g,""),this.setValue(e),e):$.trim(e)},i.prototype.setValue=function(e){this.input.val(e)},i.prototype.setDisabled=function(e){this.disabled=e,this.disabled?(this.input.attr("disabled","disabled"),this.$el.addClass(this.disabledClassName)):(this.input.removeAttr("disabled"),this.$el.removeClass(this.disabledClassName))},i.prototype.focus=function(e){this.input.focus()},i.prototype.blur=function(){this.input.blur()},i}),define("../../components/listview",["utils","base"],function(e,t){var i=function(t){var n=this;t.style&&(t.style.flexDirection||t.style["flex-direction"]||(t.style.flexDirection="column",t.style.webkitFlexDirection="column")),t.noNeedSetStyle=!0,i.baseConstructor.call(this,t),this.parent.rowMarkSeed||(this.parent.rowMarkSeed=0),this.listview=t.listview,this.parent.rowMarkSeed+=1,this.rowindex=this.parent.rowMarkSeed,this.rowMark="row"+this.rowindex,this.contentWrapper=$("<div class='displayflex yy-row-content'></div>"),e.css(this.contentWrapper,t.style),this.SwipeDomWrapper=null,this.$$childrenWrapper=this.contentWrapper,this.$el.addClass("yy-listrow"),t.itemClassName&&this.$el.addClass(t.itemClassName),this.defaultSwipIconWidth=e.getRealWidth(70),this.$el.attr("row-mark",this.rowMark),this.selectedMode=t.listview.selectedMode||"m",this.contentWrapper.appendTo(this.$el),this.initLayout(t.$$datasource,null,this),this.$el.bind("click",function(e){if("edit"===n.config.listview.status)return void n.select();if(n.pageview.plugin){var t=n.config.listview.config.comKey+"_rowclick",i=n.pageview.plugin[t];i&&i.call(n.pageview.plugin,n,{e:e})}});var a=n.config.listview.config.comKey+"_getrowswipeicons";this.pliginInitSwipeIconMethod=n.pageview.plugin[a];var s=this.config.listview.config.comKey+"_selectChange";this.selectChangeMethod=this.pageview.plugin[s]};e.extends(i,t),i.prototype.select=function(){if("m"===this.selectedMode){var e=this.config.listview.selectedRows.indexOf(this);e>=0?(this.config.listview.selectedRows.splice(e,1),this.unSelected()):(this.config.listview.selectedRows.push(this),this.selected())}else{var t=this.config.listview.selectedRows[0];t&&t.unSelected(),this.config.listview.selectedRows[0]=this,this.selected()}this.selectChangeMethod&&this.selectChangeMethod.call(this.pageview.plugin,this.config.listview,{})},i.prototype.rebind=function(e){this.contentWrapper.empty(),this.datasource=e,this.initLayout(e,null,this)},i.prototype.render=function(){},i.prototype.initSwipeDom=function(){var e=this,t=this.parent.config.rowSwipeIcons;this.pliginInitSwipeIconMethod&&(t=this.pliginInitSwipeIconMethod.call(e.pageview.plugin,e,{})),this.SwipeDomWrapper||(this.SwipeDomWrapper=$("<div class='yy-row-swipwrapper displayflex flex-h'></div>"),this.SwipeDomWrapper.appendTo(this.$el),this.recreateSwipe(t))},i.prototype.recreateSwipe=function(e){var t=this;if(this.SwipeDomWrapper.empty(),!e||0==e.length)return void(this.SwipeIconsSumWidth=0);this.SwipeIconsSumWidth=0;for(var i=0,n=e.length;i<n;i++){var a=e[i],s=this.pageview.config.components[a];s.style=s.style||{};var r=s.style.width||this.defaultSwipIconWidth;r=parseInt(r),this.SwipeIconsSumWidth+=r,s.style.width=r+"px",s.style.height="100%",this.getComponentInstanceByComKey(a,this.datasource,this,function(e){e.setAttribute&&e.setAttribute("data-swipeicon","1"),t.SwipeDomWrapper.append(e.$el)},function(){})}},i.prototype.remove=function(){this.delete(!0)},i.prototype.delete=function(e){var t=this,i=this.parent.rows.indexOf(this);i>=0&&this.parent.rows.splice(i,1);var n=this.listview.selectedRows.indexOf(this);if(n>=0&&this.listview.selectedRows.splice(n,1),e)return t.$el.remove(),void(t.config.listview.isGroupList&&0==t.parent.rows.length&&t.parent.remove());this.$el.css({height:this.$el.height()+1+"px"}),window.setTimeout(function(){t.$el.css({transition:"height .12s linear","-webkit-transition":"height .12s linear",height:"0px"})},40),window.setTimeout(function(){t.$el.remove(),t.config.listview.isGroupList&&0==t.parent.rows.length&&t.parent.remove()},345)},i.prototype.swipeToLeft=function(t){this.contentWrapper.css(e.processTransitionTanformStyle("none","translate3d("+t+"px,0,0)"))},i.prototype.closeSwipe=function(){this.contentWrapper.css(e.processTransitionTanformStyle("transform .2s ease","translate3d(0,0,0)"))},i.prototype.setSwipeOpenPos=function(){this.contentWrapper.css(e.processTransitionTanformStyle("transform .2s ease","translate3d(-"+this.SwipeIconsSumWidth+"px,0,0)"))};var n=function(e){var t=this;n.baseConstructor.call(this,e);var i=e.isCanCollapse,a="yy-sticky displayflex";!0===i&&(this.isCollapse=!1,a+=" yy-icommon yy-listgroup-colheader",this.$el.bind("click",function(){t.isCollapse?(t.parent.expand(),t.isCollapse=!1,t.$el.removeClass("yy-listgroup-header-collapse")):(t.isCollapse=!0,t.parent.collapse(),t.$el.addClass("yy-listgroup-header-collapse"))})),this.$el.addClass(a),this.initLayout(e.$$datasource,null,this)};e.extends(n,t);var a=function(e){a.baseConstructor.call(this,e);var t=this.parent.config.isCanCollapse;this.$el.attr("data-gval",e.groupValue);var i=$("<div class='yy-listgroup-body'></div>");this.groupBodyInner=$("<div class='yy-listgroup-body-inner'></div>"),i.append(this.groupBodyInner),this.groupHeader=new n({$$datasource:e.groupHeaderData,type:"listgroupheader",isCanCollapse:t,root:this.config.rootConfig.groupHeader,style:this.config.rootConfig.groupHeaderStyle,$$pageview:this.pageview,groupValue:e.groupValue,$$parent:this}),this.display="block",this.groupValue=e.groupValue,this.$el.append(this.groupHeader.$el).append(i),this.rows=[]};e.extends(a,t),a.prototype.expand=function(){this.groupBodyInner.removeClass("displaynone")},a.prototype.collapse=function(){this.groupBodyInner.addClass("displaynone")},a.prototype.insertRow=function(e,t){this.show();var i=this.rows[t];return i?(e.$el.insertBefore(i.$el),this.rows.splice(t,0,e)):(this.rows.push(e),this.groupBodyInner.append(e.$el)),e},a.prototype.append=function(e){this.show(),this.groupBodyInner.append(e)},a.prototype.show=function(){"block"!=this.display&&"none"==this.display&&(this.$el.removeClass("displaynone"),this.display="block")},a.prototype.remove=function(e){this.parent.groups[this.groupValue]&&delete this.parent.groups[this.groupValue],e&&this.$el.remove(),this.display="none",this.$el.addClass("displaynone")};var s=function(t){t.style||(t.style={}),t.style.flexDirection||t.style["flex-direction"]||(t.style.flexDirection="column"),this.config=t,this.ajaxConfig=t.ajaxConfig,s.baseConstructor.call(this,t),this.ajaxConfig=this.ajaxConfig||t.ajaxConfig,this.initAjaxConfig(this.ajaxConfig),this.groupKey=this.config.groupKey,this.isGroupList=null!=this.groupKey,this.groups={},this.autoLoadData=t.autoLoadData||!1,this.$el.addClass("displayflex yy-listview"),this.selectedMode=t.selectedMode,this.swipeOffsetX=e.getRealWidth(25),this.selectedRows=[],this.rows=[],this.canOpenOffsetRight=e.getRealWidth(70),this.splitStyle=t.splitStyle,this.showBlockClassNameDict={};var i=this.config.comKey+"_parsedata";this.pluginParseDataMethod=this.pageview.plugin[i];var n=this.config.comKey+"_beforeload";this.pluginBeforeLoadDataMethod=this.pageview.plugin[n];var a=this.config.comKey+"_afterload";this.pluginAfterLoadDataMethod=this.pageview.plugin[a];var r=this.config.comKey+"_demo演示";this.DemoMethod=this.pageview.plugin[r],this.init()};return e.extends(s,t),s.prototype.setLeftOpen=function(){if("edit"===this.status)return void this.setLeftClose();this.status="edit",this.$el.addClass(this.showBlockClassNameDict.left)},s.prototype.setLeftRightOpen=function(){if("edit"===this.status)return void this.setLeftRightClose();this.status="edit",this.$el.addClass((this.showBlockClassNameDict.left||"")+" "+(this.showBlockClassNameDict.right||""))},s.prototype.setLeftRightClose=function(){this.status="",this.$el.removeClass((this.showBlockClassNameDict.left||"")+" "+(this.showBlockClassNameDict.right||""))},s.prototype.setLeftClose=function(){this.status="",this.$el.removeClass(this.showBlockClassNameDict.left)},s.prototype.setRightOpen=function(){if("edit"===this.status)return void this.setRightClose();this.status="edit",this.$el.addClass(this.showBlockClassNameDict.right)},s.prototype.setRightClose=function(){this.status="",this.$el.removeClass(this.showBlockClassNameDict.right)},s.prototype.initLeftRightBlock=function(){this.initBlock(this.config.leftBlock,"left"),this.initBlock(this.config.rightBlock,"right")},s.prototype.initBlock=function(t,i){if(t){t.key&&t.width||console.error("listview 的"+i+"Block配置需要包括key和widt属性");try{t.width=parseInt(t.width)}catch(e){}isNaN(t.width)&&console.error("listview 的"+i+"Block的widt属性必须为数值"),t.width=e.getRealWidth(t.width);var n=this.getUniqueKey()+i;this.$el.addClass(n),this.showBlockClassNameDict||(this.showBlockClassNameDict={}),this.showBlockClassNameDict[i]=n+"_show"+i,e.createStyleSheet(n,"."+t.key+" {transition:width .12s ease;-webkit-transition:width .12s ease;} ."+this.showBlockClassNameDict[i]+" ."+t.key+" {width:"+t.width+"px !important;}")}},s.prototype.init=function(){var e=this;this.config.nodata&&this.getComponentInstanceByComKey(this.config.nodata,null,null,function(t){e.$el.append(t.$el),t.$el.addClass("displaynone"),e.noDataDom=t},function(){}),this.initEvent(),this.initLeftRightBlock(),this.autoLoadData&&window.setTimeout(function(){e.parent&&e.parent.setCanLoadMore&&e.parent.setPullLoadingState(),e.loadFirstPageData()},430)},s.prototype.getTargetRow=function(e){for(var t=e.target;"yy-listrow"!=t.className&&"yy-listview"!=t.className&&"BODY"!=t.tagName;)t=t.parentNode;var i=t.getAttribute("row-mark"),n=null;if(i)for(var a=0,s=this.rows.length;a<s;a++){var r=this.rows[a];if(r.rowMark===i){n=r;break}}return n},s.prototype.initEvent=function(){var t=this;this.curSwipRow=null;var i=e.getRealWidth(280);if(this.config.rowSwipeIcons){var n,a,s,r=!1;this.$el.bind("touchstart",function(a){if("edit"!==t.status){var o=a.touches[0];"1"!==a.target.getAttribute("data-swipeicon")?(t.curSwipRow&&t.curSwipRow.closeSwipe(),n=o.pageX,s=o.pageY,(r=e.viewport.width-n<i)&&(t.curSwipRow=t.getTargetRow(a),t.curSwipRow&&t.curSwipRow.initSwipeDom())):r=!1}}),this.$el.bind("touchmove",function(e){if("edit"!==t.status){if(!r||!t.curSwipRow||0==t.curSwipRow.SwipeIconsSumWidth)return void(r=!1);var i=e.touches[0],o=i.pageX;a=o-n;var l=Math.abs(a),c=s-i.pageY;if(Math.abs(c)>30&&l>0)return void(a=10);a<-10&&(l>10&&(e.preventDefault(),e.stopPropagation()),a=l>t.curSwipRow.SwipeIconsSumWidth+t.swipeOffsetX?0-t.curSwipRow.SwipeIconsSumWidth-t.swipeOffsetX:a,t.curSwipRow.swipeToLeft(a))}}),this.$el.bind("touchend",function(){if("edit"!==t.status){if(!r||a>=0)return void(a=0);r=!1,Math.abs(a)>t.canOpenOffsetRight?t.curSwipRow&&t.curSwipRow.setSwipeOpenPos():0!=a&&t.curSwipRow&&t.curSwipRow.closeSwipe(),a=0}})}},s.prototype.getRowCount=function(){if(this.isGroupList){var e=0;return this.eachRow(function(t){e+=1}),e}return this.rows.length},s.prototype.eachRow=function(e){if(this.isGroupList)for(var t in this.groups)for(var i=this.groups[t],n=0,a=i.rows.length;n<a;n++)e(i.rows[n],n,i);else for(var s=0,r=this.rows.length;s<r;s++)e(this.rows[s],s)},s.prototype.empty=function(){if(this.isGroupList)for(var e in this.groups)this.groups[e].remove(!0),delete this.groups[e];else{for(var t=this.rows.length-1;t>=0;t--)this.rows[t].remove();this.rows=[]}},s.prototype.selectAll=function(){var e=this;"m"===this.config.selectedMode&&(this.selectedRows=[],this.eachRow(function(t){e.selectedRows.push(t),t.selected()}))},s.prototype.clearSelectAll=function(){"m"===this.config.selectedMode&&(this.selectedRows=[],this.eachRow(function(e){e.unSelected()}))},s.prototype.loadFirstPageData=function(e){var t=this;e=e||{},t.parent.setInitLoadMessage&&t.parent.setInitLoadMessage(),this.pageNumKey||(this.pageNumKey=this.ajaxConfig.pageNumKey,this.pageNumKey||console.error("listview 配置没有设置页码字段属性pageNumKey")),this.parentAnimate=e.parentAnimate,!1!==e.parentAnimate&&this.parent.setPullLoadingState();var i=this.ajaxConfig.firstPageIndex||0===this.ajaxConfig.firstPageIndex?this.ajaxConfig.firstPageIndex:1;this.ajaxConfig.data[this.pageNumKey]=i,this.loadData({success:function(e,i){t.rowMarkSeed=0,t.empty(),t.bindData(e,!0),e&&0!=e.length||t.showNodata(!0)},isAutoLoad:!1,isFirstLoad:!0})},s.prototype._loadNextPageData=function(e){var t=this;this.pageNumKey||(this.pageNumKey=this.ajaxConfig.pageNumKey,this.pageNumKey||console.error("listview 配置没有设置页码字段属性pageNumKey"));var i=this.ajaxConfig.data[this.pageNumKey];if(i&&!isNaN(i)||0===i)!0===e||(i=parseInt(i)+1);else{i=this.ajaxConfig.firstPageIndex||0===this.ajaxConfig.firstPageIndex?this.ajaxConfig.firstPageIndex:1}this.ajaxConfig.data[this.pageNumKey]=i,this.loadData({success:function(e){t.bindData(e)},isAutoLoad:!1,isFirstLoad:!1})},s.prototype.loadNextPageData=function(){this._loadNextPageData(!1)},s.prototype.reload=function(){this._loadNextPageData(!0),this.parent.setCanLoadMore({isReload:!0})},s.prototype.showNodata=function(e){this.noDataDom&&(e?this.noDataDom.$el.removeClass("displaynone"):this.noDataDom.$el.addClass("displaynone"))},s.prototype.loadData=function(t){var i=this,n=t.isFirstLoad;if(this.pluginBeforeLoadDataMethod&&this.pluginBeforeLoadDataMethod.call(this.pageview.plugin,this,{ajaxConfig:this.ajaxConfig,isAutoLoad:t.isAutoLoad}),this.config.isStatic){var a=[];return i.pluginParseDataMethod&&(a=i.pluginParseDataMethod.call(i.pageview.plugin,i,{params:this.ajaxConfig,data:a,cancel:!1}),void 0===a&&console.error("程序错误："+i.config.comKey+"_parsedata 方法没有返回值或者返回值错误"),!1===a)?void i.setError(t):void t.success(a)}this.beforeAjaxConfig=e.copy(this.ajaxConfig);var s=this.ajaxConfig.data||{};e.ajax({type:this.ajaxConfig.type||"get",url:this.ajaxConfig.url,pageviewInstance:this.config.$$pageview,timeout:this.ajaxConfig.timeout||7e3,data:s,success:function(e){if(i.showNodata(!1),i.pluginParseDataMethod&&(e=i.pluginParseDataMethod.call(i.pageview.plugin,i,{params:s,data:e,isFirstLoad:n}),void 0===e&&console.error("程序错误："+i.config.comKey+"_parsedata 方法没有返回值或者返回值错误"),!1===e))return void i.setError(t);e instanceof Array||console.error(i.config.comKey+"返回的数据不是数组类型,或者在"+i.config.comKey+"_parsedata方法中进行预处理 "),t.success(e,n),i.pluginAfterLoadDataMethod&&i.pluginAfterLoadDataMethod.call(i.pageview.plugin,i,{isSuccess:!0,params:s,data:e,isFirstLoad:t.isFirstLoad})},error:function(e){if(i.DemoMethod){var a=i.DemoMethod.call(i.pageview.plugin,i,{params:s,isFirstLoad:t.isFirstLoad});null===a?(i.setError(t),t.error&&t.error(e)):t.success(a,n)}else i.setError(t),t.error&&t.error(e)}})},s.prototype.setError=function(e){var t=this;window.setTimeout(function(){e.isFirstLoad?t.parent.setLoadFirstError&&t.parent.setLoadFirstError():t.parent.setLoadMoreErrorState&&t.parent.setLoadMoreErrorState(),t.ajaxConfig=t.beforeAjaxConfig,t.pluginAfterLoadDataMethod&&t.pluginAfterLoadDataMethod.call(t.pageview.plugin,t,{isSuccess:!1})},100)},s.prototype.createFragmentByDataSource=function(e){for(var t=document.createDocumentFragment(),i=0,n=e.length;i<n;i++)if(e[i].hasOwnProperty("historicProcessInstanceResponse")){if(e[i].historicProcessInstanceResponse){var a=this.createRow(e[i]);this.rows.push(a),t.appendChild(a.$el[0])}}else{var s=this.createRow(e[i]);this.rows.push(s),t.appendChild(s.$el[0])}return t},s.prototype.bindData=function(e,t){var i=this;if(this.isGroupList)return void this.bindGroupListData(e,t);var n=this.createFragmentByDataSource(e);window.setTimeout(function(){i.$el[0].appendChild(n),i.setLoadStateWhenBindDone(e,t)},16)},s.prototype.setLoadStateWhenBindDone=function(e,t){var i=this;!1!==this.parentAnimate&&(e.length<i.ajaxConfig.pageSize?i.parent.setHasLoadDone&&i.parent.setHasLoadDone():i.parent.setCanLoadMore&&i.parent.setCanLoadMore()),t&&(i.parent.resetPullLoadState&&i.parent.resetPullLoadState(),e&&0!==e.length||i.parent.setInitLoadMessage&&i.parent.setInitLoadMessage()),0===i.getRowCount()&&(i.showNodata(!0),i.parent.hideLoadMore&&i.parent.hideLoadMore())},s.prototype.groupBy=function(e){this.empty();var t=this;e?(this.groupKey=e,this.isGroupList=!0,this.groups={}):(this.isGroupList=!1,this.groupKey=null,this.groups={}),t.parent&&t.parent.setCanLoadMore&&t.parent.setPullLoadingState(),t.loadFirstPageData()},s.prototype.bindGroupListData=function(e,t){for(var i=this,n={},s={},r=0,o=e.length;r<o;r++){var l=e[r],c=l[this.groupKey];c||(l[this.groupKey]=this.config.otherGroupName||"其他",c=this.config.otherGroupName||"其他"),n[c]||(n[c]=document.createDocumentFragment()),this.groups[c]||(this.groups[c]=new a({type:"listgroup",rootConfig:this.config,style:this.config.groupStyle,$$pageview:this.pageview,groupValue:c,groupHeaderData:l,$$parent:this}),s[c]=this.groups[c]);var p=this.createGroupListRow(l,this.groups[c]);n[c].appendChild(p.$el[0]),this.groups[c].rows.push(p)}window.setTimeout(function(){for(var a in n)i.groups[a].append(n[a]),s[a]&&i.$el.append(s[a].$el);i.setLoadStateWhenBindDone(e,t)},16)},s.prototype.createGroupListRow=function(e,t){return new i({type:"listrow",listview:this,root:this.config.root,style:this.config.rowStyle,$$pageview:this.pageview,$$datasource:e,$$parent:t,itemClassName:this.config.itemClassName})},s.prototype.setAjaxConfigParams=function(e){this.ajaxConfig||console.error("ListView未配置ajaxConfig属性"),this.ajaxConfig.data=this.ajaxConfig.data||{};for(var t in e)this.ajaxConfig.data[t]=e[t]},s.prototype.initAjaxConfig=function(e){if(this.config.isStatic)return void(this.ajaxConfig={});e||console.error("ListView未配置ajaxConfig属性"),e.pageSize||console.warn("ajaxConfig配置需要指定pageSize属性"),isNaN(e.pageSize)&&console.warn("ajaxConfig配置需要指定pageSize属性为number类型"),e.pageSize=parseInt(e.pageSize)},s.prototype.createRow=function(e){return new i({type:"listrow",listview:this,root:this.config.root,style:this.config.rowStyle,$$pageview:this.pageview,$$datasource:e,$$parent:this,itemClassName:this.config.itemClassName})},s.prototype.insertGroup=function(e,t){if(!this.isGroupList)return this;var i=e[this.groupKey],n=this.groups[i];if(n)return this;n=new a({type:"listgroup",rootConfig:this.config,style:this.config.groupStyle,$$pageview:this.pageview,groupValue:i,groupHeaderData:e,$$parent:this}),this.groups[i]=n;var s=this.getGroupByIndex(t);return s?n.$el.insertBefore(s.$el):this.$el.append(n.$el),this},s.prototype.getGroupByIndex=function(e){var t,i=this.$el.children(),n=i[e];if(n){var a=n.getAttribute("data-gval");t=this.groups[a]}return t},s.prototype.insertRow=function(e,t){if(this.isGroupList){var i=e[this.groupKey],n=this.groups[i];if(n){var a=this.createGroupListRow(e,n);return this.showNodata(!1),n.insertRow(a,t)}return this.insertGroup(e,0),void this.insertRow(e,t)}var a=this.rows[t],s=this.createRow(e);this.showNodata(!1),void 0!==t&&null!=t&&t>=0&&t<this.rows.length?this.rows.splice(t,0,s):this.rows.push(s),a?s.$el.insertBefore(a.$el):this.$el.append(s.$el)},s.prototype.deleteRowByPrimaryKey=function(e){},s}),define("../../components/mapdialog",["utils","base"],function(e,t){var i=function(t){var i=this,n=t.wrapper||$(document.body),a=t.mode||1,s=t.className;this.dialogBackCover=$("<div style='visibility: hidden;' class='yy-dialog-bk'></div>"),this.dialogWrapper=$("<div class='yy-dialog-wrapper yy-dialog-effect-"+a+" yy-dialog-hide + "+s+"'></div>");var r=$("<div class='yy-dialog-inner'></div>"),o=$("<div class='yy-dialog-body'></div>"),l="row"===t.btnDirection?"yy-fd-row":"yy-fd-column",c=$("<div style='margin: 0' class='yy-dialog-btn-wrapper displayflex "+l+"'></div>");this.dialogBackCover.bind("click",function(){i.hide()}),this.dialogWrapper.css({width:"100%;!important",top:"0%;!important"}),this.bodyContentDom=$("<div class=''></div>");var p=t.createContent;if(p)p(this.bodyContentDom);else{var d=t.contentText;this.contentTextDom=$("<div class=''>"+d+"</div>"),this.bodyContentDom.append(this.contentTextDom)}if(o.append(this.bodyContentDom),t.buttons)for(var h=0,u=t.buttons.length;h<u;h++){var f=t.buttons[h],g=f.title||e.getLanguageText("button"),m=f.style,y=f.onClick;!function(t,i,n,a,s){var r=$("<div class='yy-dialog-btn yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+t+"</div>");i&&e.css(r,i),a&&r.bind("click",function(e){a()}),n.append(r)}(g,m,c,y)}r.append(o).append(c),this.dialogWrapper.append(r),n.append(this.dialogWrapper).append(this.dialogBackCover)};return i.prototype.show=function(){var e=this;this.dialogWrapper.css({visibility:"visible"}),this.dialogBackCover.css({visibility:"visible"}),this.dialogBackCover.addClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.removeClass("yy-dialog-hide").addClass("yy-dialog-show")},1)},i.prototype.hide=function(){var e=this;this.dialogWrapper.removeClass("yy-dialog-show").addClass("yy-dialog-hide"),this.dialogBackCover.removeClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.css({visibility:"hidden"}),e.dialogBackCover.css({visibility:"hidden"})},200)},i}),define("../../components/pageview",["utils","base"],function(e,t){function i(e){var t=this;if(this.refs={},this.dialogsBks={},this.dialogs={},this.componentsInitActions={},i.baseConstructor.call(this,e),this.viewpagerParams=e.viewpagerParams,e.root=e.root||[],this.params=e.$$params,this.showPageParams=e.showPageParams||{},this.prePageView=e.prePageView,this.pageManager=e.$$pageManager,this.config=e,this.innerPages={},this.innerPagesWrappers={},e.pluginClass)try{this._preparePlugin(e.pluginClass)}catch(e){console.log(e)}this.components={};var n=e.style;this.$el.addClass("yy-pageview displayflex"),this.showPageBackCover=$("<div role='showPageBackCover' class='yy-backcover displaynone'></div>"),this.innerWrapper=$("<div class='displayflex yy-page-inner'></div>"),this.$$childrenWrapper=this.innerWrapper,this.$el.append(this.innerWrapper).append(this.showPageBackCover),n&&this.innerWrapper.css(n),this.showPageBackCover.bind("click",function(){t.hideCurShowPage()}),this.initLayout()}var n={fromLeft1:{zIndex:5,left:"0",top:0,transform:"translate3d(-100%,0,0)","-webkit-transform":"translate3d(-100%,0,0)"},fromLeft2:{zIndex:101,left:"0",top:0,transform:"translate3d(-100%,0,0)","-webkit-transform":"translate3d(-100%,0,0)"},fromLeft3:{left:0,top:0,zIndex:5,transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"},fromRight1:{zIndex:5,right:"0",top:0,transform:"translate3d(100%,0,0)","-webkit-transform":"translate3d(100%,0,0)"},fromRight2:{zIndex:101,right:"0",top:0,transform:"translate3d(100%,0,0)","-webkit-transform":"translate3d(100%,0,0)"},fromRight3:{zIndex:5,right:0,top:0,
transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"},opacity:{left:"0",top:0},fromBottom:{zIndex:101,left:"0",bottom:"0",transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)"}},a={fromLeft1:"yy-init-left",fromLeft2:"yy-init-left",fromLeft3:"yy-init-left",fromRight1:"yy-init-right",fromRight2:"yy-init-right",fromRight3:"yy-init-right",opacity:"yy-init-left",fromBottom:"yy-init-bottom"};return e.extends(i,t),i.prototype._preparePlugin=function(e){this.plugin=new e({pageview:this});var t=this.config.children;if(t&&t instanceof Array&&t.length>0)for(var i=0,n=t.length;i<n;i++){var a=t[i].pluginClass;if(a){var s=new a;this.plugin=$.extend(!0,this.plugin,s)}}},i.prototype.regeistPageDestory=function(){},i.prototype.destory=function(){this.$el.remove()},i.prototype.showDialog=function(e,t){var i=this;if(t=t||{},this.dialogs[e])return this.dialogs[e].addClass("yy-dialog-show"),this.dialogsBks[e].removeClass("displaynone"),void window.setTimeout(function(){i.dialogs[e].css({visibility:"visible"})},20);var n=t.datasource;this.getComponentInstanceByComKey(e,n,null,function(n){var a=$("<div style='visibility: hidden;' class='yy-dialog-out-wrap displayflex yy-ai-center yy-jc-center'></div>");t.zIndex&&a.css({zIndex:t.zIndex+1});var s=$("<div class='yy-dialog-inner-wrap'></div>");i.dialogs[e]=a,s.append(n.$el),a.append(s),a.appendTo(document.body);var r=$("<div class='yy-page-dialog-bk'></div>");t.zIndex&&r.css({zIndex:t.zIndex}),i.dialogsBks[e]=r,r.appendTo(document.body),window.setTimeout(function(){a.css({visibility:"visible"}),a.addClass("yy-dialog-show")},20)},function(e){})},i.prototype.hideDialog=function(e){var t=this;this.dialogsBks[e].addClass("displaynone"),this.dialogs[e].removeClass("yy-dialog-show"),window.setTimeout(function(){t.dialogs[e].css({visibility:"hidden"})},200)},i.prototype.ajax=function(t){t.pageviewInstance=this,e.ajax(t)},i.prototype.Enter=function(e,t){var i=this;if(this.$el[0].className=e,t){if(i.pageManager.getPageNameFromUrl()===i.config.pageKey){var n=i.plugin.onPageEnter;n&&n.call(i.plugin)}}else this.$el[0].addEventListener("webkitAnimationEnd",function(){if(i.pageManager.getPageNameFromUrl()===i.config.pageKey){var e=i.plugin.onPageEnter;e&&e.call(i.plugin)}})},i.prototype.bindShowPageEnterEvent=function(){var e=this;this.$el[0].parentNode.addEventListener("webkitTransitionEnd",function(){if(e.$$isshow){var t=e.plugin.onPageEnter;t&&t.call(e.plugin)}})},i.prototype.hideCurShowPage=function(){var t=this;if(this.pageManager.blur(),this.showpageInstance.showpageInstance)return this.showpageInstance.hideCurShowPage(),!0;if(this.showpage_wrapper){var i=this.showpageInstance.plugin.onPageBeforeLeave||this.showpageInstance.plugin.onPageClose;if(i){if(!1===i.call(this.showpageInstance.plugin))return!0}this.showpageInstance.$$isshow=!1;var s=this.showpage_wrapper.attr("data-mode");if(this.showPageBackCover.addClass("displaynone"),this.innerWrapper[0].className="displayflex yy-page-inner "+a[s]+"-im ",window.setTimeout(function(){t.innerWrapper.css(e.processTransitionTanformStyle("none","translate3d(0,0,0)"))},300),"fromLeft1"==s||"fromLeft2"==s)this.showpage_wrapper.css(e.processTransformStyle("translate3d(-100%,0,0)"));else if("fromRight1"==s||"fromRight2"==s)this.showpage_wrapper.css(e.processTransformStyle("translate3d(100%,0,0)"));else{var r=n[s]||{};"fromRight3"!=s&&"fromLeft3"!=s||(r.display="none"),this.showpage_wrapper.css(r)}}var o=this.plugin.onPageResume;return o&&o.call(this.plugin),this.showpage_wrapper=null,this.showpageInstance=null,!1},i.prototype.do=function(e,t){var i=this.refs[e];if(i)t(i);else{try{this.config.components[e].ref||console.error("请务必在"+e+"控件上设置ref:true")}catch(e){console.error(e)}this.componentsInitActions[e]=t}},i.prototype.delegate=function(e,t){this.do(e,t)},i.prototype.showLoadingProgressbar=function(){var e=this;this.loadingProgreessbar||(this.loadingProgreessbarWrapper=$("<div class='yy-loading-pbw displaynone'></div>"),this.loadingProgreessbar=$("<div class='yy-loading-pb'></div>"),this.loadingProgreessbarWrapper.append(this.loadingProgreessbar),this.loadingProgreessbarWrapper.appendTo(this.$el)),this.loadingProgreessbarWrapper.removeClass("displaynone"),window.setTimeout(function(){e.loadingProgreessbar.css({width:"90%"})},6)},i.prototype.hideLoadingProgressbar=function(){this.loadingProgreessbar&&(this.loadingProgreessbar.css({width:"0%"}),this.loadingProgreessbarWrapper.addClass("displaynone"))},i.prototype.close=function(){this.ownerPage&&this.ownerPage.hideCurShowPage()},i.prototype.showPage=function(t){if(t&&t.pageKey){this.pageManager.blur(),!1!==t.inRouter&&this.pageManager.regeistShowPageInRouter(this.config.pageKey);var i=this,a=t.mode||"fromLeft1";this.showpage_wrapper=this.innerPagesWrappers[t.pageKey],this.showpageInstance=this.innerPages[t.pageKey],this.showLoadingProgressbar(),!this.showpage_wrapper||void 0!==t.nocache&&t.nocache?this.pageview.pageManager.getPageConfigByPageKey(t.pageKey,function(s){var r=t.params||{};s.showPageParams=r;var o=i.pageview.pageManager.createPageView(s);o.$el.addClass("yy-pageview-show"),o.ownerPage=i,i.hideLoadingProgressbar(),i.showpageInstance=o,i.innerPages[t.pageKey]=o,i.showpage_wrapper=$("<div class='yy-showpage'></div>");var l=s.showPageStyle||{width:"100%",height:"100%"};l&&(delete l.top,delete l.right,delete l.left,delete l.bottom),i.showpage_wrapper.attr("data-mode",a);var c=l.width||"100%",p=l.height||"100%";l=l||{};var d=n[a]||n.fromLeft1;d=e.clone(d),i.showpage_wrapper.attr("data-width",c),i.showpage_wrapper.attr("data-height",p);var h=e.simpleExtendObj(l,d)||{};"fromLeft3"!==a&&"fromRight3"!==a||(h.display="block"),i.showpage_wrapper.css(h),i.innerPagesWrappers[t.pageKey]=i.showpage_wrapper,i.showpage_wrapper.append(o.$el),i.$el.append(i.showpage_wrapper),o.bindShowPageEnterEvent(),i._showpageAnimate(t,i.showpage_wrapper,o)},function(){}):(this.hideLoadingProgressbar(),"fromLeft3"!==a&&"fromRight3"!==a||this.showpage_wrapper.css({display:"block"}),this._showpageAnimate(t,this.showpage_wrapper,this.showpageInstance))}},i.prototype.goBack=function(e){this.pageManager.goBack(e)},i.prototype.go=function(e,t){t=t||{};var i=this.pageManager.appConfig.beforeGo;i&&i({params:t,pageviewInstance:this}),this.pageManager.go(e,t)},i.prototype.replaceGo=function(e,t){t=t||{};var i=this.pageManager.appConfig.beforeGo;i&&i({params:t,pageviewInstance:this}),this.pageManager.replaceGo(e,t)},i.prototype._showpageAnimate=function(t,i,n){var s=this;n.$$isshow=!0;var r=i.attr("data-width"),o=i.attr("data-mode");if(this.innerWrapper[0].className="displayflex yy-page-inner "+a[o],"fromLeft1"!=o&&"fromLeft2"!=o||(this.showPageBackCover.removeClass("displaynone").css({left:r,right:0}),window.setTimeout(function(){if("fromLeft1"==o){var t=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d("+r+",0,0)");t["box-shadow"]="0px 0px 13px 1px #929292",s.innerWrapper.css(t)}i.css(e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},12)),"fromLeft3"==o){this.showPageBackCover.removeClass("displaynone").css({left:r,right:0});var l=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d("+r+",0,0)");l["box-shadow"]="0px 0px 13px 1px #929292",window.setTimeout(function(){s.innerWrapper.css(l)},12)}if("fromRight1"!=o&&"fromRight2"!=o||(this.showPageBackCover.removeClass("displaynone").css({right:r,left:0}),window.setTimeout(function(){var t=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(-"+r+",0,0)");t["box-shadow"]="0px 0px 13px 1px #929292","fromRight1"==o&&s.innerWrapper.css(t),i.css(e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},12)),"fromRight3"==o){this.showPageBackCover.removeClass("displaynone").css({right:r,left:0});var l=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(-"+r+",0,0)");l["box-shadow"]="0px 0px 13px 1px #929292",window.setTimeout(function(){s.innerWrapper.css(l)},12)}if("fromBottom"==o){i.attr("data-height");this.showPageBackCover.removeClass("displaynone").css({left:"0",top:"0"}),window.setTimeout(function(){i.css(e.processTransitionTanformStyle("transform .2s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},12)}},i}),define("../../components/poplayer",["utils","base"],function(e,t){var i=function(e){var t=this;i.baseConstructor.call(this,e),this.mode=e.mode||"bottom";var n="displayflex yy-poplayer yy-poplayer-"+this.mode;this.showClassName="yy-poplayer-"+this.mode+"-show",this.hideClassName="yy-poplayer-"+this.mode+"-hide",this.bkCover=$("<div class='yy-poplayer-bk displaynone'></div>"),e.bkCoverStyle&&this.bkCover.css(e.bkCoverStyle),this.bkCover.appendTo(this.pageview.$$childrenWrapper),this.bkCover.bind("click",function(){t.hide()}),this.$el.addClass(n),this.initLayout(this.datasource)};return e.extends(i,t),i.prototype.show=function(){this.bkCover.removeClass("displaynone"),this.$el.removeClass(this.hideClassName).addClass(this.showClassName)},i.prototype.hide=function(){this.bkCover.addClass("displaynone"),this.$el.removeClass(this.showClassName).addClass(this.hideClassName)},i}),define("../../components/popover",["utils","base"],function(e,t){var i=function(t){var n=this;t.noNeedSetStyle=!0,t.style=t.style||{},t.arrowStyle=t.arrowStyle||{},t.arrowStyle=t.arrowStyle||"16px",t.arrowStyle.backgroundColor=t.arrowStyle.backgroundColor||"rgba(0,0,0,.9)",t.arrowStyle.height=t.arrowStyle.height||"14px",t.arrowStyle.width=t.arrowStyle.height,t.style.width,t.style.height||(t.style.height="200px"),i.baseConstructor.call(this,t),this.width_int=parseInt(this.config.style.width),this.height_int=parseInt(this.config.style.height),this.$el.addClass("yy-popover"),t.arrowStyle.transform="rotate(45deg)",t.arrowStyle["-webkit-transform"]="rotate(45deg)",this.animateAction="0",t.animate&&(this.animateAction=t.animate.mode),this.offset=t.offset||{x:0,y:0};var a=this.offset.x||0,s=this.offset.y||0;this.offset.x=parseInt(a),this.offset.y=parseInt(s),this.arrow_width_int=parseInt(t.arrowStyle.width),this.arrow=$("<div class='yy-pop-arrow'></div>"),this.bkCover=$("<div class='yy-pop-bk displaynone'></div>"),e.css(this.arrow,t.arrowStyle),this.contentWrapper=$("<div class='displayflex yy-pop-content'></div>"),this.$$childrenWrapper=this.contentWrapper,e.css(this.contentWrapper,this.config.style),this.$el.append(this.arrow).append(this.contentWrapper),t.bkCoverStyle&&e.css(this.bkCover,t.bkCoverStyle),this.bkCover.appendTo(this.pageview.$$childrenWrapper),this.bkCover.bind("click",function(){n.hide()}),this.initLayout(t.$$datasource)};return e.extends(i,t),i.prototype.getHeight=function(){return this.$el.height()},i.prototype.hide=function(){var e=this;"0"!=this.animateAction&&"1"!=this.animateAction?(this.$el.css({opacity:0}),window.setTimeout(function(){e.$el.css({visibility:"hidden"})},300)):this.$el.css(this.hidePos),e.bkCover.addClass("displaynone")},i.prototype.show=function(t,i){i=i||{};var n=this,a=i.direction;if(t){var s=t.getClientRect();a||(s.top>this.getHeight()+this.arrow_width_int?a="top":e.viewport.height-s.bottom>this.getHeight()+this.arrow_width_int&&(a="bottom"));var r={visibility:"visible",transition:"transform .3s ease"};if(this.hidePos={},"top"==a){var o=s.top-this.getHeight()-this.arrow_width_int;r.top=o+"px","0"==this.animateAction?this.hidePos.visibility="hidden":"1"==this.animateAction?(this.hidePos.transform="translate3d(0,"+(e.viewport.height-o)+"px,0)",r.transform="translate3d(0,"+(e.viewport.height-o)+"px,0)"):(r.transition="opacity .3s ease",this.hidePos.visibility="hidden",r.opacity="0",r.transform="translate3d(0,0,0)")}else if("bottom"==a){var o=s.bottom+this.arrow_width_int/2;r.top=o+"px","0"==this.animateAction?this.hidePos.visibility="hidden":"1"==this.animateAction?(this.hidePos.transform="translate3d(0,"+(0-this.getHeight()-o-10)+"px,0)",r.transform="translate3d(0,"+(0-this.getHeight()-o-10)+"px,0)"):(r.transition="opacity .3s ease",this.hidePos.visibility="hidden",r.opacity="0",r.transform="translate3d(0,0,0)")}var l;if(isNaN(this.width_int))r.right=6,l={right:26};else{r.left=s.left+s.width/2-this.width_int/2+this.offset.x;var c=r.left+this.width_int-e.viewport.width;c>0&&(r.left=r.left-c-6),r.left<0&&(r.left=6),l={left:s.left+s.width/2-this.arrow_width_int/2-r.left+"px"}}"bottom"==a?(l["border-top-left-radius"]="4px",l.top="-"+this.arrow_width_int/2+"px"):(l["border-bottom-right-radius"]="4px",l.bottom="-"+this.arrow_width_int/2+"px"),e.css(this.arrow,l),e.css(this.$el,r),this.bkCover.removeClass("displaynone"),"0"==this.animateAction?n.$el.css({visibility:"visible"}):"1"==this.animateAction?window.setTimeout(function(){n.$el.css({transform:"translate3d(0,0,0)"})},0):window.setTimeout(function(){n.$el.css({opacity:"1"})},0)}},i}),define("../../components/radiobox",["utils","base"],function(e,t){var i=e.getRealWidth(22),n=e.getRealWidth(14),a={width:i,height:i,border:"1px solid rgb(229, 229, 229)",backgroundColor:"#fff",fontSize:n},s={width:i,height:i,color:"#fff",border:"1px solid rgb(144, 151, 255)",backgroundColor:"rgb(144, 151, 255)",fontSize:n},r=function(t){var i=this;t.style=t.style||{},this.uss=e.simpleExtendObj(e.clone(a),t.radioStyle),this.uss=e.simpleExtendObj(this.uss,t.unSelectedRadioStyle||{}),this.ss=e.simpleExtendObj(e.clone(s),t.radioStyle||{}),this.ss=e.simpleExtendObj(this.ss,t.selectedRadioStyle||{}),this.selectedBackgroundColor=this.ss.backgroundColor||"#0093ff",r.baseConstructor.call(this,t),this.value=!!this.config.value,this.$el.addClass("yy-icommon"),this.$el.addClass("yy-radio-warpper displayflex yy-fd-row yy-jc-center yy-ai-center"),this.radioDom=$("<div class='yy-radio'></div>"),this.textDom=$("<div class='yy-radio-text'>"+(this.config.text||"")+"</div>"),this.config.textStyle&&e.css(this.textDom,this.config.textStyle),this.$el.append(this.radioDom).append(this.textDom),this.setValue(this.value),this.$el.bind("click",function(){i.change()});var n=this.config.comKey+"_change";this.changeMethod=this.pageview.plugin[n],this.config.selectedRadioStyle&&this.config.selectedRadioStyle.fontSize&&(this.config.selectedRadioStyle.fontSize+="",-1===this.config.selectedRadioStyle.fontSize.indexOf("px")&&(this.config.selectedRadioStyle.fontSize=this.config.selectedRadioStyle.fontSize+"px"),$("head").find("style.yy-radio-head").remove(),$('<style class="yy-radio-head">.yy-radio-selected .yy-radio:before {font-size: '+this.config.selectedRadioStyle.fontSize+"!important;}</style>").appendTo("head"))};return e.extends(r,t),r.prototype.change=function(){this.changeMethod&&this.changeMethod.call(this.pageview.plugin,this,{value:!this.value})},r.prototype.selected=function(t){t&&this.config.disableParentSelect||(this.value=!0,e.css(this.radioDom,this.ss),this.$el.addClass("yy-radio-selected"))},r.prototype.unSelected=function(t){t&&this.config.disableParentSelect||(this.value=!1,e.css(this.radioDom,this.uss),this.$el.removeClass("yy-radio-selected"))},r.prototype.setValue=function(t){this.value=t,t?(this.$el.addClass("yy-radio-selected"),e.css(this.radioDom,this.ss)):(this.$el.removeClass("yy-radio-selected"),e.css(this.radioDom,this.uss))},r}),define("../../components/radiolist",["utils","base"],function(e,t){var i=function(t){if(this.itemData=t.itemData,this.parent=t.parent,this.parent.primaryKey,0)if(this.parent.primaryKey instanceof Array){for(var i=[],n=0,a=this.parent.primaryKey.length;n<a;n++)i.push(this.itemData[this.parent.primaryKey[n]]);this.key=i.join("_")}else console.error("radiolist控件primaryKey属性 错误的数据类型");else this.key=this.itemData[this.parent.primaryKey];this.$el=$("<div data-key='"+this.key+"' class='yy-radiolist-item yy-icommon' style='height:"+t.parent.itemHeight+"px;line-height:"+t.parent.itemHeight+"px;font-size:"+e.fontSize13()+"px'>"+(t.itemData[t.parent.labelKey]||"")+"</div>")};i.prototype={selected:function(){this.$el.addClass("yy-radiolist-item-selected")},unSelected:function(){this.$el.removeClass("yy-radiolist-item-selected")}};var n=function(t){var i=this;n.baseConstructor.call(this,t);var a=e.getRealHeight("36");this.itemHeight=e.getRealHeight("48"),this.$el.addClass("yy-checklist"),this.items=[],this.selectedValue=this.config.selectedValue||[],this.primaryKey=this.config.primaryKey,this.primaryKey||console.error(this.config.comKey+"控件没有指定primaryKey数据的主键"),this.loadWrapper=$("<div class='yy-cs-loading-wrapper displayflex jc-center ai-center'><div class='preloader'></div></div>"),this.backCoverLayer=$("<div class='yy-cl-coverlayer displaynone'></div>"),this.backCoverLayer.bind("touchmove",function(e){e.preventDefault(),e.stopPropagation()});var s=$("<div style='height:"+a+"px;font-size:"+e.fontSize(14)+"px;line-height:"+a+"px' class='yy-rl-title-wrapper'>"+(t.title||e.getLanguageText("pleaseSelect"))+"</div>");this.listWrapper=$("<div style='max-height:"+6.7*this.itemHeight+"px;' class='yy-cl-list-wrapper'></div>"),this.listWrapper.append(this.loadWrapper),this.$el.append(s).append(this.listWrapper),this.labelKey=this.config.labelKey||"text",this.backCoverLayer.bind("click",function(){i.hide()}),this.listWrapper.bind("click",function(e){i.itemClick(e)});var r=this.config.comKey+"_selected";this.selectedMethod=this.pageview.plugin[r],this.pageview.$el.append(this.backCoverLayer)};return e.extends(n,t),n.prototype._getPrimaryValue=function(e){var t="";if("string"==typeof this.primaryKey)t=e[this.primaryKey];else if(this.primaryKey instanceof Array){for(var i=[],n=0,a=this.primaryKey.length;n<a;n++)i.push(e[this.primaryKey[n]]);t=i.join("_")}else console.error("radiolist控件primaryKey属性 错误的数据类型");return t},n.prototype.itemClick=function(e){var t=e.target.getAttribute("data-key");if(t){for(var i=null,n=0,a=this.items.length;n<a;n++)if(t==this.items[n].key){i=this.items[n];break}this.selectedValue[0]&&this.selectedValue[0].selectionId===i.itemData.selectionId?i&&(this.selectedValue=[],this.setItemSelected(this.selectedValue),this.selectedMethod&&this.selectedMethod.call(this.pageview.plugin,this,{selectedValue:this.selectedValue}),this.hide()):i&&(this.selectedValue=[i.itemData],this.setItemSelected(this.selectedValue),this.selectedMethod&&this.selectedMethod.call(this.pageview.plugin,this,{selectedValue:this.selectedValue}),this.hide())}},n.prototype.show=function(){this.$el.addClass("yy-checklist-show"),this.backCoverLayer.removeClass("displaynone"),this.init()},n.prototype.setItemSelected=function(e){for(var t=0,i=this.items.length;t<i;t++){var n=this.items[t];n.unSelected()}if(e.length>0){this.selectedValue=[];for(var a=0;a<1;a++)if(void 0!==e[a])for(var s=this._getPrimaryValue(e[a]),t=0,i=this.items.length;t<i;t++){var n=this.items[t];n.key==s&&(n.selected(),this.selectedValue.push(n.itemData))}}},n.prototype.setSelectedValue=function(e){e instanceof Array||console.error("radiolist setSelectedValue方法必须是数组"),this.items&&this.items.length>0?this.setItemSelected(e):this._midSelectedValue=e},n.prototype.createItems=function(e){this.dataSource=e,this.items=[],this.listWrapper.empty();for(var t=this.dataSource.length,n=0,a=t;n<a;n++){var s=this.dataSource[n],r=new i({itemData:s,parent:this});this.listWrapper.append(r.$el),this.items.push(r),t>1&&n!=t-1&&this.listWrapper.append("<div class='yy-checklist-line'></div>")}this._midSelectedValue&&(this.setItemSelected(this._midSelectedValue),this.config.selectedValue=this._midSelectedValue,this._midSelectedValue=null),this.setSelectedValue(this.config.selectedValue||[])},n.prototype.init=function(){var e=this;this.dataSource||(e.loadWrapper.removeClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),this.loadData(function(t){e.loadWrapper.addClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),e.createItems(t)},function(){e.loadErrorWrapper||e.initLoadErrorDom(),e.loadErrorWrapper.removeClass("displaynone"),e.loadWrapper.addClass("displaynone")}))},n.prototype.loadData=function(e,t){if(this.dataSource)return void e(this.dataSource);var i=this.config.comKey+"_loaddata",n=this.pageview.plugin[i];n&&n.call(this.pageview.plugin,this,{success:e,error:t})},n.prototype.initLoadErrorDom=function(){var t=this,i=e.getRealWidth(11),n=e.getRealWidth(20);this.loadErrorWrapper=$("<div style='height:100px' class='yy-loadmore-wrapper displayflex jc-center ai-center flex-h'></div>");var a=$("<i style='font-size:"+n+"px' class='yy-icommon yy-loadmore-erroricon'></i>"),s=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>"+e.getLanguageText("NetworkError")+"</span>"),r=$("<span style='font-size:"+i+"px' class='yy-loadmore-reload-babel'>"+e.getLanguageText("reLoading")+"</span>");r.bind("click",function(){t.init()}),this.loadErrorWrapper.append(a).append(s).append(r),this.listWrapper.append(this.loadErrorWrapper)},n.prototype.hide=function(){this.$el.removeClass("yy-checklist-show"),this.backCoverLayer.addClass("displaynone")},n}),define("../../components/repeat",["utils","base"],function(e,t){var i=function(e){var t=this;this.datasource=e.$$datasource,this.parent=e.$$parent,e.style&&(e.style.flexDirection||e.style["flex-direction"]||(e.style.flexDirection="column",e.style.webkitFlexDirection="column")),this.parent.useFloatToWrap&&(e.style.float="left",e.style.display="inline-block"),e.$$datasource.picOnly&&(e.style.float="left"),i.baseConstructor.call(this,e),this.parent.rowMarkSeed||(this.parent.rowMarkSeed=0),this.parent.rowMarkSeed+=1,this.itemMark="item"+this.parent.rowMarkSeed,this.$el.attr("data-role","repeatitem"),this.$el.attr("item-mark",this.itemMark);var n=this.parent.useFloatToWrap?"yy-repeatitem":"displayflex yy-repeatitem";this.$el.addClass(n),!e.root||"item_select_icon"!==e.root[0]&&"checkbox_select_icon"!==e.root[0]||this.$el.addClass("only_for_select"),this.$el.bind("click",function(e){"edit"!==t.parent.status&&t.parent._itemClick(t,e)}),e.itemClassName&&this.$el.addClass(e.itemClassName),this.initLayout(e.$$datasource,null,this)};e.extends(i,t),i.prototype.select=function(){if("m"===this.parent.selectedMode){var e=this.parent.selectedItems.indexOf(this);e>=0?(this.parent.selectedItems.splice(e,1),this.unSelected()):(this.parent.selectedItems.push(this),this.selected())}else{var t=this.parent.selectedItems[0];t&&t.unSelected(),this.parent.selectedItems[0]=this,this.selected()}},i.prototype.delegate=function(e,t){var i=this.refs[e];i?t(i):(this.config.components[e].ref||console.log("请务必在"+e+"控件上设置ref:true"),this.componentsInitActions[e]=t)},i.prototype.showPlaceHolder=function(){this.placeHolder||(this.placeHolder=$("<div class='yy-repeat-placeholder displaynone'></div>"),this.$el.append(this.placeHolder)),this.placeHolder.removeClass("displaynone")},i.prototype.moveTo=function(e){if(null!==e&&void 0!==e){var t=this.parent.components.indexOf(this);if(t!=e){var i=this.parent.components[e];if(i){this.$el.insertBefore(i.$el),this.parent.components.splice(t,1),this.parent.datasource.splice(t,1);var n=e;t<e&&(n-=1),this.parent.components.splice(n,0,this),this.parent.datasource.splice(n,0,this.datasource)}else this.parent.components.splice(t,1),this.parent.datasource.splice(t,1),this.parent.components.push(this),this.parent.datasource.push(this.datasource),this.parent.subComponent?this.$el.insertBefore(this.parent.subComponent.$el):this.$el.appendTo(this.parent.$el)}}},i.prototype.hidePlaceHolder=function(){this.placeHolder.addClass("displaynone")},i.prototype.remove=function(e){var t=this,i=this.parent.datasource.indexOf(this.datasource),n=this.parent.components.indexOf(this);i>=0&&this.parent.datasource.splice(i,1),n>=0&&this.parent.components.splice(n,1),this.splitLine&&this.splitLine.remove(),e?(this.$el.css({height:this.$el.height()+1+"px"}),window.setTimeout(function(){t.$el.css({transition:"height .12s linear","-webkit-transition":"height .12s linear",height:"0px"})},40),window.setTimeout(function(){t.$el.remove()},345)):t.$el.remove()},i.prototype.rebind=function(e){this.$el.empty(),this.datasource=e,this.initLayout(e,null,this)};var n=function(t){this.initSourceLength=0;var i=t.style||{};this.useFloatToWrap=!e.isSupportFlexWrap()&&("wrap"==i.flexWrap||"wrap"==i["flex-wrap"]),this.selectedItems=[],this.splitStyle=t.splitStyle,t.subComponent&&(t.$$pageview.config.components[t.subComponent].ref=!0),n.baseConstructor.call(this,t),this.subComponentInBefore=!0===this.config.subComponentInBefore,this.datasource=[];var a=this.useFloatToWrap?"yy-repeat ":"displayflex yy-repeat ";this.$el.addClass(a),this.selectedMode=t.selectedMode,this.subComponent=null,this.init(),this.hasAttachSortEvent=!1};return e.extends(n,t),n.prototype.setLeftOpen=function(){if("edit"===this.status)return this.setLeftClose(),void this.showOrHideSubComponent(!0);this.status="edit",this.showOrHideSubComponent(!1),this.$el.addClass(this.showBlockClassNameDict.left)},n.prototype.eachItem=function(e){for(var t=0,i=this.components.length;t<i;t++){if(!1===e(this.components[t],t))break}},n.prototype.clearSelectAll=function(){this.selectedItems=[],this.eachItem(function(e){e.unSelected()})},n.prototype.selectAllItems=function(){var e=this;this.selectedItems=[],this.eachItem(function(t){t.selected(),e.selectedItems.push(t)})},n.prototype.setLeftRightOpen=function(){if("edit"===this.status)return this.setLeftRightClose(),void this.showOrHideSubComponent(!0);this.status="edit",this.showOrHideSubComponent(!1),this.$el.addClass((this.showBlockClassNameDict.left||"")+" "+(this.showBlockClassNameDict.right||""))},n.prototype.setLeftRightClose=function(){this.status="",this.$el.removeClass((this.showBlockClassNameDict.left||"")+" "+(this.showBlockClassNameDict.right||""))},n.prototype.setLeftClose=function(){this.status="",this.$el.removeClass(this.showBlockClassNameDict.left)},n.prototype.setRightOpen=function(){if("edit"===this.status)return this.setRightClose(),void this.showOrHideSubComponent(!0);this.status="edit",this.showOrHideSubComponent(!1),this.$el.addClass(this.showBlockClassNameDict.right)},n.prototype.setRightClose=function(){this.status="",this.$el.removeClass(this.showBlockClassNameDict.right)},n.prototype.initLeftRightBlock=function(){this.initBlock(this.config.leftBlock,"left"),this.initBlock(this.config.rightBlock,"right")},n.prototype.initBlock=function(t,i){if(t){t.key&&t.width||console.error("listview 的"+i+"Block配置需要包括key和widt属性");try{t.width=parseInt(t.width)}catch(e){}isNaN(t.width)&&console.error("listview 的"+i+"Block的widt属性必须为数值"),t.width=e.getRealWidth(t.width);var n=this.getUniqueKey()+i;this.$el.addClass(n),this.showBlockClassNameDict||(this.showBlockClassNameDict={}),this.showBlockClassNameDict[i]=n+"_show"+i,e.createStyleSheet(n,"."+t.key+" {transition:width .3s ease;-webkit-transition:width .3s ease;} ."+this.showBlockClassNameDict[i]+" ."+t.key+" {width:"+t.width+"px !important;}")}},n.prototype.init=function(){var e=this,t=this.config.items||[];this.initSourceLength=t.length;for(var i=0,n=t.length;i<n;i++)this.addItem(t[i],i,n);this.config.subComponent&&this.getComponentInstanceByComKey(this.config.subComponent,this.datasource,null,function(t){e.$el.append(t.$el),e.subComponent=t},function(){}),this.config.nodata&&this.getComponentInstanceByComKey(this.config.nodata,null,null,function(t){e.$el.append(t.$el),e.components.length>0&&t.$el.addClass("displaynone"),e.noDataDom=t},function(){}),this.initLeftRightBlock()},n.prototype.showOrHideSubComponent=function(e){this.config.subComponent&&this.pageview.do(this.config.subComponent,function(t){e?t.$el.removeClass("displaynone"):t.$el.addClass("displaynone")})},n.prototype.empty=function(){for(var e=this.components.length-1;e>=0;e--)this.components[e].remove();this.datasource=[],this.components=[]},n.prototype.bindData=function(e){if(this.empty(),e&&e instanceof Array&&e.length>0){this.noDataDom?(this.noDataDom.$el.addClass("displaynone"),this.showOrHideSubComponent(!0)):this.showOrHideSubComponent(!0),this.initSourceLength=e.length;for(var t=0,i=e.length;t<i;t++)this.addItem(e[t],t,i)}else this.noDataDom&&this.noDataDom.$el.removeClass("displaynone"),this.config.subComponentAlwaysShow?this.showOrHideSubComponent(!0):this.showOrHideSubComponent(!1)},n.prototype.getItem=function(e){for(var t=0,i=this.components.length;t<i;t++){var n=this.components[t];if(e(n))return n}return null},n.prototype.insertItem=function(e,t){this.noDataDom&&this.noDataDom.$el.addClass("displaynone"),this.addItem(e,t)},n.prototype.getTargetItem=function(e,t){var i=e.target,n=this.config.sortHandle,a=!1,s=i.getAttribute("item-mark");for(n&&(i.getAttribute("data-comname")!=n?s=null:a=!0);!s&&"BODY"!==i.tagName.toUpperCase();)if(i=i.parentNode,n&&i.getAttribute("data-comname")==n&&(a=!0),s=i.getAttribute("item-mark")){n&&(a||(s=null));break}var r=null;if(s)for(var o=0,l=this.components.length;o<l;o++){var c=this.components[o];if(c.itemMark===s){r=c;break}}return r},n.prototype.startSort=function(){var e,t,i=this,n=this.parent;if(this.pageview.plugin){var a=this.config.comKey+"_sortend";t=this.pageview.plugin[a]}this.isInSort=!0;var s,r,o,l,c,p=null;this.hasAttachSortEvent||(this.hasAttachSortEvent=!0,this.$el.bind("touchstart",function(t){if(e=i.getTargetItem(t,!0),i.repeatOffsetY=i.$el.offset().top,o=0,l=0,e&&i.isInSort){p=e.$el.position();var a=t.touches[0];s=a.pageX,r=a.pageY,c=e.$el.clone(),n&&(scrollTop=n.$el[0].scrollTop),c.css({position:"absolute",zIndex:50,left:p.left+"px",top:p.top+"px"}),e.showPlaceHolder(),i.$el.append(c)}}),this.$el.bind("touchmove",function(t){if(e&&i.isInSort){var a=t.touches[0];t.preventDefault(),t.stopPropagation();var d=a.pageX,h=a.pageY;o=d-s,l=h-r;var u=0;if(n&&(u=n.$el[0].scrollTop),Math.abs(parseInt(h))%3==1){var f=i.getItemIndexByPosY(h+u-(u+i.repeatOffsetY));e.moveTo(f)}var g=l+p.top;g=g<0?0:g,c.css({position:"absolute",zIndex:50,top:g+"px"})}}),this.$el.bind("touchend",function(n){e&&i.isInSort&&(t&&t.call(i.pageview.plugin,this,{}),e.hidePlaceHolder(),c.remove(),c=null)}))},n.prototype.endSort=function(){this.isInSort=!1},n.prototype.getItemIndexByPosY=function(e){for(var t,i=0,n=this.components.length,a=0,s=n;a<s;a++){var r=this.components[a],o=r.$el.height();if(e>i&&e<i+o/2){t=a;break}if(e>=i+o/2&&e<i+o){t=a+1;break}i+=o}return t},n.prototype.addItem=function(t,n,a){var s=!1;void 0===n||null===n||n<0||n>=this.datasource.length?(n=this.datasource.length,this.datasource.push(t)):(this.datasource.splice(n,0,t),s=!0);var r,o=new i({type:"repeatitem",root:this.config.root,style:this.config.itemStyle,$$pageview:this.pageview,$$datasource:t,$$parent:this,index:n,itemClassName:this.config.itemClassName,selectedClassName:this.config.itemSelectedClassName});if(this.splitStyle&&this.components.length>0){var l="repeat-splitline-"+n;r=$("<div class='"+l+"'></div>"),o.splitLine=r,e.css(r,this.splitStyle)}if(s?this.components.splice(n,0,o):this.components.push(o),s){var c=this.components[n+1];0!==n&&r&&r.insertBefore(c.$el),o.$el.insertBefore(c.$el),0===n&&r&&r.insertBefore(c.$el)}else this.subComponent?this.subComponentInBefore?(r&&this.$el.append(r),this.$el.append(o.$el)):(r&&r.insertBefore(this.subComponent.$el),o.$el.insertBefore(this.subComponent.$el)):(r&&this.$el.append(r),this.$el.append(o.$el))},n.prototype._itemClick=function(e,t){var i=this.config.comKey+"_itemclick";if(this.pageview.plugin){var n=this.pageview.plugin[i];if(e.disabled)return;n&&n.call(this.pageview.plugin,e,{index:e.$el.index(),e:t})}this.config.$$itemClick&&this.config.$$itemClick(e)},n}),define("../../components/searchview",["utils","base"],function(e,t){var i=function(t){var n=this;i.baseConstructor.call(this,t);this.$el.addClass("displayflex yy-seachview yy-fd-column"),this.cancelBtnWidth=e.getRealWidth(60),this.inputWidth=e.getRealWidth(355);var a=e.getRealHeight(30),s=e.getRealHeight(10),r=e.getRealWidth(30);this.inputFocusWidth=this.inputWidth-this.cancelBtnWidth+s,this.searchBarClassName="yy-sv-bar yy-fd-row displayflex yy-ai-center",
this.searchBar=$("<div class='"+this.searchBarClassName+" yy-sv-defalut'></div>"),this.config.searchBarStyle&&(this.config.searchBarStyle.paddingLeft||(this.config.searchBarStyle.paddingLeft=e.getRealWidth(10)),this.config.searchBarStyle.paddingRight||(this.config.searchBarStyle.paddingRight=e.getRealWidth(10)),e.css(this.searchBar,this.config.searchBarStyle)),this.form=$("<form class='yy-sv-form' style='height:"+a+"px;width:"+this.inputWidth+"px'></form>");var o=$("<div class='yy-sv-input-div' style=''></div>");this.clearBtn=$("<div class='yy-sv-clear yy-icommon displaynone' style='height:"+a+"px;width:"+a+"px'></div>");var l=this.config.placeholder||e.getLanguageText("search");this.input=$("<input style='font-size:"+e.fontSize(14)+"px;padding-left:"+r+"px' placeholder='"+l+"' type='search'/>"),this.input.bind("focus",function(){n._focus()}),this.input.bind("input",function(){n.inputChange()}),this.clearBtn.bind("click",function(){n.input.val(""),n.input.focus(),n.inputChange()}),o.append(this.clearBtn).append(this.input),this.form.append(o),this.form.bind("submit",function(e){return e.preventDefault(),!1});var c=$("<div style='width:"+this.cancelBtnWidth+"px;height:"+a+"px;font-size:"+e.fontSize(16)+"px' class='yy-sv-cancel displayflex yy-jc-center yy-ai-center'>"+e.getLanguageText("cancel")+"</div>");c.bind("click",function(){n._cancelSearch()}),this.body=$("<div class='yy-flex-1 yy-sv-body'></div>"),this.config.bodyStyle&&e.css(this.body,this.config.bodyStyle);var p=this.config.comKey+"_change";this.changePluginMethod=this.pageview.plugin[p],this._init(),this.time=this.config.time,!this.time||isNaN(this.time)?this.time=1e3:this.time=parseInt(this.time),this.input.bind("keydown",function(e){13===e.keyCode&&n.input.blur()}),this.searchBar.append(this.form).append(c),this.$el.append(this.searchBar).append(this.body)};return e.extends(i,t),i.prototype.inputChange=function(e){var t=this,i=this.input.val();if(""==i?this.clearBtn.addClass("displaynone"):this.clearBtn.removeClass("displaynone"),0==this.time)return void(t.changePluginMethod&&t.changePluginMethod.call(t.pageview.plugin,t.input,{searchview:t,value:i}));this.timeid&&window.clearTimeout(this.timeid),e?t.changePluginMethod&&t.changePluginMethod.call(t.pageview.plugin,t.input,{searchview:t,value:i}):this.timeid=window.setTimeout(function(){t.changePluginMethod&&t.changePluginMethod.call(t.pageview.plugin,t.input,{searchview:t,value:i})},this.time)},i.prototype._cancelSearch=function(){this.form.css({width:this.inputWidth+"px"}),this.clearBtn.addClass("displaynone"),this.searchBar[0].className=this.searchBarClassName+" yy-sv-defalut",this.defaultComyWrapper&&(this.defaultComyWrapper.removeClass("displaynone"),this.resultComWrapper&&this.resultComWrapper.addClass("displaynone"))},i.prototype.search=function(e,t){this._focus(),this.input.val(e),this.inputChange(t)},i.prototype.value=function(){return $.trim(this.input.val())},i.prototype.blur=function(e){this.input.blur()},i.prototype.focus=function(e){this.input.focus()},i.prototype._focus=function(){this.form.css({width:this.inputFocusWidth+"px"}),this.input.val().length>0&&this.clearBtn.removeClass("displaynone"),this.searchBar[0].className=this.searchBarClassName+" yy-sv-active",this.resultComWrapper&&(this.resultComWrapper.removeClass("displaynone"),this.defaultComyWrapper&&this.defaultComyWrapper.addClass("displaynone"))},i.prototype._init=function(){var e=this,t=this.config.defaultComponent;t&&(this.defaultComyWrapper=$("<div class='yy-sv-body-wrapper displayflex yy-fd-column'></div>"),this.body.append(this.defaultComyWrapper),this.getComponentInstanceByComKey(t,null,null,function(t){e.defaultComyWrapper.append(t.$el)},function(){}));var i=this.config.resultComponent;i&&(this.resultComWrapper=$("<div class='yy-sv-body-wrapper displayflex yy-fd-column displaynone'></div>"),this.body.append(this.resultComWrapper),this.getComponentInstanceByComKey(i,null,null,function(t){e.resultComWrapper.append(t.$el)},function(){}))},i}),define("../../components/segment_android",["utils","base"],function(e,t){var i=function(e){var t=this;this.index=e.index,e.style=e.style||{},e.style.flexDirection||e.style["flex-direction"]||(e.style.flexDirection="column",e.style.webkitFlexDirection="column"),e.style.alignItems||e.style["align-items"]||(e.style.alignItems="center",e.style.webkitAlignItems="center"),e.style.justifyContent||e.style["justify-content"]||(e.style.justifyContent="center",e.style.webkitJustifyContent="center"),e.style.width||(e.style.flex=1,e.style.webkitFlex=1),e.style.height=e.style.height||"25px",i.baseConstructor.call(this,e),this.$el.addClass("displayflex yy-segmentitem-android"),this.$el.bind("click",function(){t.disabled||t.parent._itemClick(t)}),this.childHasInited=!1,this.initLayout(e.$$datasource,null,null,function(){t.childHasInited=!0,!0===t.wantToSelected&&(t.selected(),t.wantToSelected=!1)})};e.extends(i,t),i.prototype.initSetSelected=function(){this.childHasInited?this.selected():this.wantToSelected=!0};var n=function(e){e.itemStyle=e.itemStyle||{},e.style=e.style||{},e.style.width=e.style.width||"100%";var t=e.itemStyle.height||e.style.height||"25px";e.itemStyle.height=t,delete e.style.height,n.baseConstructor.call(this,e),this.$el.css({height:t}),this.$el.addClass("yy-sgm-android"),this.$innerWraper=$("<div class='displayflex yy-sgm-android-inner flex-h'></div>"),this.indicator=$("<div class='yy-sgm-indicator'></div>"),this.selectedMode=e.selectedMode,this.selectedIndex=parseInt(e.selectedIndex)||0,this.selectedItems,this.components=[],this.dataSource=[],this.splitStyle=e.splitStyle,this.offsetX=0,this.$innerWraper.appendTo(this.$el),this.init()};return e.extends(n,t),n.prototype.init=function(){var e=this;this.getdata(function(t){e.createItems(t)},function(){})},n.prototype.createItems=function(e){var t=this.config.indicatorStyle||{};this.itemCount=e.length,this.config.itemStyle.width?(this.itemWidth_int=parseFloat(this.config.itemStyle.width),this.itemWidth=this.itemWidth_int+"px",t.left=this.itemWidth_int*this.selectedIndex+"px",t.width=this.itemWidth_int+"px",this.maxWidth=this.itemWidth_int*this.itemCount,this.$innerWraper.css({width:this.maxWidth+3+"px"}),this.initEvent()):(this.itemWidth_int=100/e.length,this.itemWidth=this.itemWidth_int+"%",t.left=this.itemWidth_int*this.selectedIndex+"%",t.width=this.itemWidth_int+"%",this.$innerWraper.css({width:"100%"})),this.indicator.css(t),this.$innerWraper.append(this.indicator);for(var i=0,n=e.length;i<n;i++)this.addItem(e[i])},n.prototype.getdata=function(e,t){if(this.config.items)return void e(this.config.items);var i=this.config.comKey+"_getdata",n=this.pageview.plugin[i];n&&n.call(this.pageview.plugin,this,{success:function(t){e(t)},error:function(){t()}})},n.prototype.addItem=function(t){this.dataSource.push(t);var n=new i({type:"segmentitem",root:this.config.root,style:this.config.itemStyle,$$pageview:this.pageview,$$datasource:t,$$parent:this,index:this.components.length,selectedClassName:this.config.itemSelectedClassName});if(this.components.push(n),this.components.length==this.selectedIndex+1&&(this.selectedItems=n,n.initSetSelected()),this.$innerWraper.append(n.$el),this.splitStyle&&this.components.length>0&&this.components.length<this.config.items.length){var a=$("<div></div>");e.css(a,this.splitStyle),this.$innerWraper.append(a)}},n.prototype._itemClick=function(t){var i=this.selectedItems===t,n=this.config.comKey+"_change";if(this.pageview.plugin&&this.pageview.plugin[n]){var a=this.pageview.plugin[n];if(a){if(a.call(this.pageview.plugin,this,{item:t,nochange:i}))return}}if(i);else if(this.selectedItems&&this.selectedItems.unSelected(),this.selectedItems=t,this.selectedItems.selected(),this.config.itemStyle.width){if(this.indicator.css({left:this.itemWidth_int*t.index+"px"}),t.index!=this.itemCount-1){var s=this.itemWidth_int*(t.index-2);s=s<0?0:s,0!=t.index?s+=30:s=0,this.offsetX=0-s,this.$innerWraper.css(e.processTransformStyle("translate3d(-"+s+"px,0,0)"))}}else this.indicator.css({left:this.itemWidth_int*t.index+"%"});var r=t.datasource,o=r.key,l=this.pageview.refs[this.config.viewpager];l&&o&&l.showItem(o)},n.prototype.initEvent=function(){var t,i=0,n=0,a=0,s=this,r=e.viewport.width,o=this.maxWidth-r;o=o<=0?0:o,this.$el.bind("touchstart",function(e){var a=e.touches[0];i=a.pageX,n=0,t=(new Date).valueOf()}),this.$el.bind("touchmove",function(t){var r=t.touches[0],o=r.pageX;n=o-i,a=n+s.offsetX;var l=e.processTransformStyle("translate3d("+a+"px,0,0)");l.transition="none",l.webkitTransition="none",s.$innerWraper.css(l)}),this.$el.bind("touchend",function(i){var l=(new Date).valueOf(),c=l-t,p=0;c<400&&(p=o*(1-Math.abs(n)/r)),n>0?a+=p:a-=p,a>0&&(a=0),a<0-o&&(a=0-o),s.offsetX=a,c+=200;var d=e.processTransformStyle("translate3d("+a+"px,0,0)");d.transition="transform "+c+"ms ease",d.webkitTransition="transform "+c+"ms ease",s.$innerWraper.css(d)})},n}),define("../../components/segment_ios",["utils","base"],function(e,t){var i=function(e){var t=this;e.style=e.style||{},e.style.flexDirection||e.style["flex-direction"]||(e.style.flexDirection="column"),e.style.alignItems||e.style["align-items"]||(e.style.alignItems="center"),e.style.justifyContent||e.style["justify-content"]||(e.style.justifyContent="center"),e.style.flex=1,e.style.height=e.style.height||"25px",i.baseConstructor.call(this,e),this.$el.addClass("displayflex yy-segmentitem"),this.$el.bind("click",function(){t.parent._itemClick(t)}),this.initLayout(e.$$datasource)};e.extends(i,t),i.prototype.render=function(){};var n=function(e){e.itemStyle=e.itemStyle||{},e.style=e.style||{},e.style.width=e.style.width||"300px",e.style.border=e.style.border||"1px solid rgb(0, 147, 255)",e.style.borderRadius=e.style.borderRadius||"4px";var t=e.itemStyle.height||e.style.height||"25px";e.itemStyle.height=t,delete e.style.height,n.baseConstructor.call(this,e),this.$el.addClass("displayflex yy-sgm-ios flex-h"),this.selectedMode=e.selectedMode,this.selectedIndex=e.selectedIndex||0,this.selectedItems,this.components=[],this.dataSource=[],this.splitStyle=e.splitStyle||{borderLeft:"1px solid rgb(0, 147, 255)",height:t,width:0},this.init()};return e.extends(n,t),n.prototype.init=function(){for(var e=this.config.items||[],t=0,i=e.length;t<i;t++)this.addItem(e[t])},n.prototype.addItem=function(t){this.dataSource.push(t);var n=new i({type:"segmentitem",root:this.config.root,style:this.config.itemStyle,$$pageview:this.pageview,$$datasource:t,$$parent:this,selectedClassName:this.config.itemSelectedClassName||"yy-sgm-ios-selected"});if(this.components.push(n),this.components.length==this.selectedIndex+1&&(this.selectedItems=n,n.selected()),this.$el.append(n.$el),this.components.length>0&&this.components.length<this.config.items.length){var a=$("<div></div>");e.css(a,this.splitStyle),this.$el.append(a)}},n.prototype._itemClick=function(e){if(this.selectedItems===e){var t=this.config.comKey+"_selectedagin";if(this.pageview.plugin&&this.pageview.plugin[t]){var i=this.pageview.plugin[t];i&&i.call(this.pageview.plugin,this,{item:e})}}else{this.selectedItems&&this.selectedItems.unSelected(),this.selectedItems=e,this.selectedItems.selected();var t=this.config.comKey+"_change";if(this.pageview.plugin&&this.pageview.plugin[t]){var i=this.pageview.plugin[t];i&&i.call(this.pageview.plugin,this,{item:e})}var n=e.datasource,a=n.key,s=this.pageview.refs[this.config.viewpager];s&&a&&s.showItem(a)}},n}),define("../../components/simplesearchview",["utils","base"],function(e,t){var i=function(t){var n=this;i.baseConstructor.call(this,t);this.$el.addClass("displayflex yy-seachview yy-fd-column"),this.cancelBtnWidth=e.getRealWidth(60),this.inputWidth=e.getRealWidth(355);var a=e.getRealWidth(10),s=e.getRealHeight(30),r=e.getRealHeight(10),o=e.getRealWidth(0);this.inputFocusWidth=this.inputWidth-this.cancelBtnWidth+r,this.searchBarClassName="yy-sv-bar yy-fd-row displayflex yy-ai-center",this.searchBar=$("<div class='"+this.searchBarClassName+" yy-sv-defalut'></div>"),this.config.searchBarStyle&&(this.config.searchBarStyle.paddingLeft||(this.config.searchBarStyle.paddingLeft=e.getRealWidth(10)),this.config.searchBarStyle.paddingRight||(this.config.searchBarStyle.paddingRight=e.getRealWidth(10)),e.css(this.searchBar,this.config.searchBarStyle)),this.form=$("<form class='yy-sv-form' style='margin-left:"+a+"px;height:"+s+"px;width:"+this.inputWidth+"px'></form>"),this.formdiv=$("<div class='yy-sv-input-div' style=''></div>"),this.clearBtn=$("<div class='yy-sv-clear yy-icommon displaynone' style='height:"+s+"px;width:"+s+"px'></div>");var l=this.config.placeholder||e.getLanguageText("search");this.input=$("<input style='text-align:center;font-size:"+e.fontSize(14)+"px;padding-left:"+o+"px' placeholder='"+l+"' type='search'/>"),this.input.bind("focus",function(){n._focus()}),this.input.bind("input",function(){n.inputChange()}),this.clearBtn.bind("click",function(){n.input.val(""),n.input.focus(),f&&f.call(n.pageview.plugin,n,{value:n.input.val()})}),this.formdiv.append(this.clearBtn).append(this.input),this.form.append(this.formdiv),this.form.bind("submit",function(e){return e.preventDefault(),!1});var c=this.config.cancel||e.getLanguageText("cancel"),p=$("<div style='width:"+this.cancelBtnWidth+"px;height:"+s+"px;font-size:"+e.fontSize(16)+"px' class='yy-sv-cancel displayflex yy-jc-center yy-ai-center'>"+c+"</div>");this.config.cancelBtnStyle&&e.css(p,this.config.cancelBtnStyle);var d=this.config.comKey+"_cancel",h=this.pageview.plugin[d];p.bind("click",function(){n._cancelSearch(),"index"!==n.pageview.pageManager.fromPage&&"moreTemplate"!==n.pageview.pageManager.fromPage||n.$el.addClass("yy-sv-input-hide"),h&&h.call(n.pageview.plugin,n,{value:n.input.val()})});var u=this.config.comKey+"_search",f=this.pageview.plugin[u];this.input.bind("keydown",function(e){13===e.keyCode&&(n.input.blur(),f&&f.call(n.pageview.plugin,n,{value:n.input.val()}))}),this.searchBar.append(this.form).append(p),this.$el.append(this.searchBar)};return e.extends(i,t),i.prototype.inputChange=function(e){""==this.input.val()?(this.clearBtn.addClass("displaynone"),this.formdiv.removeClass("yy-input-index-state")):(this.formdiv.addClass("yy-input-index-state"),this.clearBtn.removeClass("displaynone"))},i.prototype._cancelSearch=function(){this.form.css({width:this.inputWidth+"px"}),this.clearBtn.addClass("displaynone"),this.formdiv.removeClass("yy-input-index-state"),this.input[0].setAttribute("placeholder",this.config.placeholder),this.searchBar[0].className=this.searchBarClassName+" yy-sv-defalut",this.defaultComyWrapper&&(this.defaultComyWrapper.removeClass("displaynone"),this.resultComWrapper&&this.resultComWrapper.addClass("displaynone"))},i.prototype._focus=function(){this.formdiv.addClass("yy-input-index-state"),this.clearBtn.removeClass("displaynone"),this.form.css({width:this.inputFocusWidth+"px"}),this.input[0].removeAttribute("placeholder"),this.input.val().length,this.searchBar[0].className=this.searchBarClassName+" yy-sv-active",this.resultComWrapper&&(this.resultComWrapper.removeClass("displaynone"),this.defaultComyWrapper&&this.defaultComyWrapper.addClass("displaynone"))},i}),define("../../components/statusview",["utils","base"],function(e,t){var i=function(e){i.baseConstructor.call(this,e),this.$el.addClass("yy-statusview displayflex"),this.selectedKey=e.selectedKey||e.defaultKey,this.components={},this.change(this.selectedKey)};return e.extends(i,t),i.prototype.change=function(e){var t=this;t.curComponent&&t.curComponent.$el.addClass("displaynone");var i=t.components[e];if(i)return i.$el.removeClass("displaynone"),void(t.curComponent=i);e&&"null"!=e&&(this.curStatusKey=e,this.getComponentInstanceByComKey(e,this.datasource,this.rowInstance,function(i){t.components[e]=i,t.curComponent=i,e!==t.curStatusKey&&i.$el.addClass("displaynone"),t.$el.append(i.$el)},function(){}))},i}),define("../../components/swiper",["utils","base"],function(e,t){var i=function(e){this.config=e,this.$el=$("<div style='"+e.style+"' class='yy-swiper-item-wrapper'></div>")};i.prototype={css:function(t){e.css(this.$el,t)}};var n=function(t){this.config=t||{},this.$el=$("<div class='yy-swiper-wrapper flex-1'></div>"),this.itemWrappers=[],this.posArr=[0,1,2],this.limit=e.getRealWidth(90),this.minOffsetX=t.minOffsetX||0,this.tanKeys=e.getTransitionKeys(),this.initLayout(),this.direction="h",this.config.init&&this.config.init(this)};return n.prototype={_posArrGoNext:function(){var e=this.posArr[0];this.posArr[0]=this.posArr[1],this.posArr[1]=this.posArr[2],this.posArr[2]=e},_resetPosArr:function(){this.posArr=[0,1,2]},_posArrGoPre:function(){var e=this.posArr[2];this.posArr[2]=this.posArr[1],this.posArr[1]=this.posArr[0],this.posArr[0]=e},initLayout:function(){var t=this;this.initPos=[0-e.viewport.width,0,e.viewport.width];for(var n=0;n<3;n++){var a=this.tanKeys.transform+":translate3d("+this.initPos[n]+"px,0,0)",s=new i({style:a});this.itemWrappers.push(s),this.config.initItem&&this.config.initItem(s,n),this.$el.append(s.$el)}var r,o,l;t.isIntransition=!1,this.$el.bind("touchstart",function(e){l=t.isIntransition,t.isIntransition||(r=e.touches[0].pageX)}),this.$el.bind("touchmove",function(e){if(!t.isIntransition&&!l){var i=e.touches[0];o=i.pageX-r,"h"===t.direction&&Math.abs(o)>4&&(e.preventDefault(),e.stopPropagation()),t.setPos("move",o)}}),this.$el.bind("touchend",function(e){if(!t.isIntransition&&!l&&o&&0!=o){if(Math.abs(o)<t.limit)return t.setPos(),void(t.isIntransition=!1);o>0?t.goPre():t.goNext(),o=0}})},transitionEnd:function(e){this.isIntransition=!1},goPre:function(){if(this.config.beforeGoPre){if(!1===this.config.beforeGoPre())return this.setPos(),void(this.isIntransition=!1)}var e=this;this.isIntransition=!0,this._posArrGoPre(),this.setPos("gopre"),this.config.onChange&&this.config.onChange({swiper:this,action:"gopre",itemWrapper:this.itemWrappers[this.posArr[0]]}),window.setTimeout(function(){e.transitionEnd("gopre")},280)},goNext:function(){if(this.config.beforeGoNext){if(!1===this.config.beforeGoNext())return this.setPos(),void(this.isIntransition=!1)}var e=this;this.isIntransition=!0,this._posArrGoNext(),this.setPos("gonext"),this.config.onChange&&this.config.onChange({swiper:this,action:"gonext",itemWrapper:this.itemWrappers[this.posArr[2]]}),window.setTimeout(function(){e.transitionEnd("gonext")},280)},reset:function(){this._resetPosArr(),this.setPos("move",0)},getMidWrapper:function(){return this.itemWrappers[this.posArr[1]]},getPreWrapper:function(){return this.itemWrappers[this.posArr[0]]},getNextWrapper:function(){return this.itemWrappers[this.posArr[2]]},setPos:function(e,t){var i=this;t=t||0;for(var n=0;n<3;n++){var a=i.posArr[n],s=i.itemWrappers[a],r={};r[i.tanKeys.transition]="move"==e?"none":this.tanKeys.transform+" .35s ease","gopre"==e&&0==n&&(r[i.tanKeys.transition]="none"),"gonext"==e&&2==n&&(r[i.tanKeys.transition]="none"),r[i.tanKeys.transform]="translate3d("+(this.initPos[n]+t)+"px,0,0)",s.css(r)}}},n}),define("../../components/switch",["utils","base"],function(e,t){var i=function(t){var n=this;t.style=t.style||{};var a=e.getRealHeight(28),s=e.getRealWidth(48),r=t.style.height||a,o=t.style.width||s;this.height=isNaN(r)?a:parseInt(r),this.width=isNaN(o)?s:parseInt(o),t.style.height=this.height+"px",t.style.width=this.width+"px",t.style.borderRadius=this.height/2+"px";var l=this.height-2;this.switchPoint=$("<div class='yy-swith-pointer'></div>"),this.pointerStartStyle={top:"1px",left:"1px",right:this.width-l-1+"px",bottom:"1px"},this.pointerEndStyle={top:"1px",left:this.width-l-1+"px",right:"1px",bottom:"1px"},i.baseConstructor.call(this,t),this.value=this.config.value,this.switchPoint.appendTo(this.$el),this.$el.addClass("yy-swith"),this.setValue(this.value),this.$el.bind("click",function(){n.change()});var c=this.config.comKey+"_change";this.changeMethod=this.pageview.plugin[c]};return e.extends(i,t),i.prototype.change=function(){this.changeMethod&&this.changeMethod.call(this.pageview.plugin,this,{value:!this.value})},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(e){this.value=e,e?(this.switchPoint.css(this.pointerEndStyle),this.$el.addClass("yy-swith-selected")):(this.switchPoint.css(this.pointerStartStyle),this.$el.removeClass("yy-swith-selected"))},i}),define("../../components/tabbarview",["utils","base"],function(e,t){var i=function(t){var n=this;i.baseConstructor.call(this,t),this.tabPages={},this.$el.addClass("yy-tabbarview"),this.tabbarWrapper=$("<div class='yy-tabbar flex-h displayflex'></div>"),this.pageWrapper=$("<div class='yy-tabbbar-pages'></div>");var a=t.tabbarStyle;a&&e.css(this.tabbarWrapper,a),this.selectedItem=null,this.curPageInstance=null;var s=this.config.root.length,r=0;this.initLayout(this.datasource,function(e){e.$el.bind("click",function(){n._itemClick(e)}),r+=1,r==s&&n.tabdidmount(),n.tabbarWrapper.append(e.$el)}),this.$el.append(this.pageWrapper),this.tabbarWrapper.appendTo(this.$el)};return e.extends(i,t),i.prototype.tabdidmount=function(){var e=this.config.root[0],t=this.pageview.params.$$pn,i=t||e,n=this.components[i]||this.components[e];this._itemClick(n,!!t)},i.prototype._itemClick=function(e,t){var i=this;if(this.selectedItem===e)return void alert("点了又点");if(this.selectedItem&&this.selectedItem.unSelected(),this.selectedItem=e,this.selectedItem.selected(),this.curPageInstance&&this.curPageInstance.$el.css({left:"-100%"}),this.curPageInstance=this.tabPages[e.config.comKey],this.pageview.showLoadingProgressbar(),this.curPageInstance){this.curPageInstance.$el.css({left:"0"});var n=this.curPageInstance.plugin.onPageResume;n&&n.call(this.curPageInstance.plugin,this.curPageInstance,{isForward:!1}),this.pageview.hideLoadingProgressbar()}else this.pageview.pageManager.getPageConfigByPageKey(e.config.comKey,function(t){i.curPageInstance=i.pageview.pageManager.createPageView(t),i.tabPages[e.config.comKey]=i.curPageInstance,i.pageWrapper.append(i.curPageInstance.$el),i.pageview.hideLoadingProgressbar()});this.pageview.pageManager.tabSeleced(e.config.comKey,t)},i}),define("../../components/text",["utils","base"],function(e,t){var i=function(t){t.style=t.style||{},t.numberofline&&(n=t.numberofline||1),i.baseConstructor.call(this,t);var n;this.$el[0].className.indexOf("yy-ai")>=0?this.$el.addClass("yy-text displayflex "):this.datasource.comHeight?this.$el.addClass("yy-text displayflex"):this.$el.addClass("yy-text displayflex yy-ai-center"),this.config&&"title"===this.config.text_bind&&this.datasource.isTextArea&&this.$el.css("marginTop",10),this.preText=this.config.preText||"",this.preTextDom=$("<span class='yy-pretext'>"+this.preText+"</span>"),this.config.preTextStyle&&e.css(this.preTextDom,this.config.preTextStyle),this.nextText=this.config.nextText||"",this.nextTextDom=$("<span class='yy-nexttext'>"+this.nextText+"</span>"),this.config.nextTextStyle&&e.css(this.nextTextDom,this.config.nextTextStyle),t.text=0===t.text?"0":t.text,this.innerText=$("<span class='yy-inner-text yy-text-box'>"+(t.text||"")+"</span>"),n&&(t.text&&t.text.length>200&&"row_title"!==t.comKey&&(this.innerText=$("<span class='yy-inner-text yy-text-box yy-inner-text_limit'>"+(t.text||"")+"</span>")),this.innerText[0].style["-webkit-line-clamp"]=n,this.innerText[0].style["word-break"]="break-word"),t.$$datasource&&t.$$datasource.taskAuditDesc&&(t.text&&t.text.length>200&&(this.innerText=$("<span class='yy-inner-text yy-text-box yy-inner-text_limit' style='overflow: hidden'>"+(t.text||"")+"</span>")),this.innerText[0].style["word-break"]="break-word"),t.textStyle&&this.innerText.css(t.textStyle),this.$el.append(this.preTextDom).append(this.innerText).append(this.nextTextDom)};return e.extends(i,t),i.prototype.setText=function(e){this.innerText.html(e)},i.prototype.getText=function(){return this.innerText.html()},i.prototype.setPreText=function(e){this.preTextDom.html(e)},i.prototype.setNextText=function(e){this.nextTextDom.html(e)},i.prototype.hideLoading=function(){this.loadingDom&&this.loadingDom.addClass("displaynone")},i.prototype.showLoading=function(){this.loadingDom||(this.loadingDom=$("<div class='preloader yy-text-loading displaynone'></div>"),this.loadingDom.insertBefore(this.preTextDom)),this.loadingDom.removeClass("displaynone")},i}),define("../../components/textarea",["utils","base"],function(e,t){var i=function(t){var n=this;i.baseConstructor.call(this,t);var a=t.placeholder||"";this.input=$("<textarea placeholder='"+a+"'></textarea>"),this.max=this.config.max,(this.config.value||0===this.config.value)&&this.input.val(this.config.value),isNaN(this.max)?this.max=null:this.max=parseInt(this.max),this.$el.addClass("yy-textarea");var s={fontSize:this.config.style.fontSize||this.config.style["font-size"]||"15px",color:this.config.style.color||this.config.style.color||"#262626",backgroundColor:this.config.style.backgroundColor||this.config.style["background-color"]||"white"};if(this.input.css(s),this.input.bind("input",function(e){if(n.max){var t=n.input.val(),i=t.length;i>n.max&&(t=t.substring(0,n.max),i=n.max,n.input.val(t)),n.numDom.html(i)}}),this.max){this.limitDom=$("<span class='yy-textarea-limit'></span>"),this.numDom=$("<span>0</span>"),this.config.numStyle&&e.css(this.numDom,this.config.numStyle);var r=$("<span>/</span>"),o=$("<span>"+this.max+"</span>");this.config.maxStyle&&e.css(o,this.config.maxStyle),this.config.limitStyle&&e.css(this.limitDom,this.config.limitStyle),this.limitDom.append(this.numDom).append(r).append(o),this.$el.append(this.limitDom)}this.$el.append(this.input);var l=t.comKey+"_compositionend",c=n.pageview.plugin[l];c&&this.$el.on("input",function(e){n.$el.prop("comStart")||!n.disabled&&c&&c.call(n.pageview.plugin,n,{e:e})}).on("compositionstart",function(){n.$el.prop("comStart",!0)}).on("compositionend",function(e){n.$el.prop("comStart",!1),!n.disabled&&c&&c.call(n.pageview.plugin,n,{e:e})});var p=t.comKey+"_input",d=n.pageview.plugin[p];d&&this.input.bind("input",function(e){!n.disabled&&d&&d.call(n.pageview.plugin,n,{e:e})}),$(this.input).bind("keydown",function(e){13==e.keyCode&&(e.preventDefault(),this.value+="\n",this.scrollTop=this.scrollHeight)})};return e.extends(i,t),i.prototype.getValue=function(){var e=this.input.val().replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]|[\uD800-\uDBFF]|[\uDC00-\uDFFF]/g,"");return this.setValue(e),e},i.prototype.setDisabled=function(e){this.disabled=e,this.disabled?(this.input.attr("disabled","disabled"),this.$el.addClass(this.disabledClassName)):(this.input.removeAttr("disabled"),this.$el.remove(this.disabledClassName))},i.prototype.setValue=function(e){if(this.max){var t=e.length;t>this.max&&(e=e.substring(this.max),t=this.max),this.numDom.html(t)}this.input.val(e)},i.prototype.blur=function(){this.input.blur()},i.prototype.focus=function(e){var t=this;t.input&&t.input.focus()},i}),define("../../components/textareadialog",["utils","base"],function(e,t){var i=function(t){var i=this,n=t.wrapper||$(document.body),a=t.mode||1,s=t.className;this.dialogBackCover=$("<div style='visibility: hidden;' class='yy-dialog-bk'></div>"),this.dialogWrapper=$("<div class='yy-dialog-wrapper yy-dialog-effect-"+a+" yy-dialog-hide + "+s+"'></div>");var r=$("<div class='yy-dialog-inner'></div>"),o=$("<div class='yy-dialog-body'></div>"),l="row"===t.btnDirection?"yy-fd-row":"yy-fd-column",c=$("<div class='yy-dialog-btn-wrapper displayflex "+l+"'></div>");this.dialogBackCover.bind("click",function(){i.hide()});var p=t.title||"",d=e.getLanguageText("example");if(this.input=$("<textarea placeholder='"+d+"' style='width: 94%;margin-left: 3%;height: 100px;font-size: 13px;padding: 6px;outline: none;resize: none;border: 1px solid #e6e6e6;-webkit-tap-highlight-color: transparent;tap-highlight-color:transparent;-webkit-appearance: none;appearance: none'></textarea>"),this.titleDom=$("<div class='yy-dialog-title' style='font-weight: bold;color: #333;font-size: 16px'>"+p+"</div>"),o.append(this.titleDom).append(this.input),t.buttons)for(var h=0,u=t.buttons.length;h<u;h++){var f=t.buttons[h],p=f.title||"按钮",g=f.style,m=f.onClick;!function(t,i,n,a,s){var r=$("<div class='yy-dialog-btn yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+t+"</div>");i&&e.css(r,i),a&&r.bind("click",function(e){a()}),n.append(r)}(p,g,c,m)}r.append(o).append(c),this.dialogWrapper.append(r),n.append(this.dialogWrapper).append(this.dialogBackCover)};return i.prototype.show=function(){var e=this;this.dialogWrapper.css({visibility:"visible"}),this.dialogBackCover.css({visibility:"visible"}),this.dialogBackCover.addClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.removeClass("yy-dialog-hide").addClass("yy-dialog-show")},1)},i.prototype.hide=function(){var e=this;this.dialogWrapper.removeClass("yy-dialog-show").addClass("yy-dialog-hide"),this.dialogBackCover.removeClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.css({visibility:"hidden"}),e.dialogBackCover.css({visibility:"hidden"})},200)},i.prototype.getValue=function(){return this.input.val()},i}),define("../../components/timepicker",["utils"],function(e){var t=function(e){var t=e.root.itemHeight;this.$el=$("<div style='height:"+t+"px' class='yy-tp-cell'>1</div>")},i=function(t){this.config=t,this.itemHeight=t.root.itemHeight,this.$el=$("<div class='yy-tp-column yy-flex-1'></div>"),this.innerWrapper=$("<div data-math='"+10*Math.random()+"' class='yy-tp-column-inner'></div>"),this.innerWrapper.appendTo(this.$el),this.tanKeys=e.getTransitionKeys(),this.initLayout(),this.diff=0,this.startPosY=0,this.posY=0,this.selectedIndex=0};i.prototype={initLayout:function(){for(var e=0;e<20;e++){var i=new t(this.config);this.innerWrapper.append(i.$el)}},touchStart:function(e){this.startPosY=e.touches[0].pageY,this.diff=0},touchMove:function(e){e.preventDefault(),e.stopPropagation();var t=e.touches[0];this.diff=t.pageY-this.startPosY,this.curY=this.posY+this.diff;var i={};i[this.tanKeys.transition]="none",i[this.tanKeys.transform]="translate3d(0,"+this.curY+"px,0)",this.innerWrapper.css(i)},touchEnd:function(){this.posY=this.curY,this.diff>0?console.log("向下"):console.log("向上")}};var n=function(t){var n=t.wrapper||$(document.body);this.$el=$("<div class='yy-tp-wrapper'></div>"),this.itemHeight=parseInt(e.getRealHeight(36));var a=4*this.itemHeight;this.body=$("<div style='height:"+a+"px' class='yy-tp-body displayflex yy-fd-row'></div>"),this.columns=[];for(var s=0;s<3;s++){var r=new i({root:this});this.columns.push(r),this.body.append(r.$el)}var o=$("<div style='height:"+this.itemHeight+"px;top:"+this.itemHeight+"px' class='yy-tp-indicator'></div>");this.body.append(o),this.$el.append(this.body),n.append(this.$el),this.initEvent()};return n.prototype={initEvent:function(){var t=this;this.body.bind("touchstart",function(i){t.curTouchColumnIndex=Math.floor(i.touches[0].pageX*t.columns.length/e.viewport.width),t.columns[t.curTouchColumnIndex].touchStart(i)}),this.body.bind("touchmove",function(e){t.columns[t.curTouchColumnIndex].touchMove(e)}),this.body.bind("touchend",function(){t.columns[t.curTouchColumnIndex].touchEnd()})}},n}),define("../../components/tip",["utils"],function(e){var t=function(e,t){var i=this;e=e||$(document.body),this.tipWrapper=t?$("<div class='yy-tip displayflex jc-center ai-center displaynone' style='position:absolute;left: 80px;transform: rotate(90deg)'></div>"):$("<div class='yy-tip displayflex jc-center ai-center displaynone'></div>"),this.textDom=$('<div class="yy-tip-text displaynone"></div>'),this.backCover=$('<div class="yy-tip-backcover displaynone"></div>'),this.backCover.bind("click",function(){i.clickBackCover()}),this.tipWrapper.append(this.textDom),e.append(this.tipWrapper).append(this.backCover),this.hideTimeoutId=null};return t.prototype={show:function(t){var i=this;this.textPos=t.textPos||"bottom","left"==this.textPos||"right"==this.textPos?this.tipWrapper.addClass("flex-h"):this.tipWrapper.addClass("flex-v");var n=t.pos||"center";this.config=t,this.hideTimeoutId&&window.clearTimeout(this.hideTimeoutId),t=t||{};var a=t.style
;a&&this.tipWrapper.css(e.processStyle(a)),this._setText(t.text,t.textStyle),this._setIcon(t.font,t.iconStyle),this.config.withoutBackCover||this.backCover.removeClass("displaynone"),this.startClass="yy-tip-ani-"+n+"-start",this.tipWrapper.removeClass("displaynone").addClass(this.startClass),window.setTimeout(function(){i.endClass="yy-tip-ani-"+n+"-end",i.tipWrapper.addClass(i.endClass)},3),t.duration&&!isNaN(t.duration)&&(this.hideTimeoutId=window.setTimeout(function(){i.hide()},parseInt(t.duration)))},_setText:function(t,i){t?(this.textDom.removeClass("displaynone"),i&&this.textDom.css(e.processStyle(i)),this.textDom.html(t)):this.textDom.addClass("displaynone")},_setIcon:function(t,i){this.iconDom&&this.iconDom.remove();var n,a;t=t||"";var s=t.split("_");2==s.length?(n=s[0],a=s[1],this.iconDom=$('<i class="yy-tip-icon displayflex jc-center ai-center yy-icon-code displaynone" data-icon="&#x'+a+';"></i>'),i&&this.iconDom.css(e.processStyle(i)),this.iconDom.removeClass("displaynone"),this.iconDom.css({"font-family":n}),"top"==this.textPos||"left"==this.textPos?this.iconDom.appendTo(this.tipWrapper):this.iconDom.insertBefore(this.textDom)):this.icomDom&&this.iconDom.addClass("displaynone")},clickBackCover:function(){this.config.clickNoHide||(this.hideTimeoutId&&window.clearTimeout(this.hideTimeoutId),this.hide())},hide:function(){var e=this;this.tipWrapper.removeClass(this.endClass),window.setTimeout(function(){e.tipWrapper.addClass("displaynone").removeClass(e.startClass),e.tipWrapper.remove(),e.backCover.remove()},300),e.backCover.addClass("displaynone")}},t}),define("../../components/view",["utils","base"],function(e,t){function i(){var e=window.navigator.userAgent,t=e.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/);return t&&t[2]&&parseInt(t[2].replace(/_/g,"."),10)>=6}function n(t){var i=this;this.isIOS=e.deviceInfo().isIOS,this.hasFixed=!1,this.isSticky=!1;var a="displayflex yy-view";t.style&&(!t.style.alignItems&&t.style["align-items"],t.style.justifyContent||t.style["justify-content"]||(a+=" yy-jc-flex-start"),t.style.flexDirection||t.style["flex-direction"]||(a+=" yy-fd-column")),this.LoadMoreWrapper=$("<div style='height:"+e.getRealHeight(36)+"px' class='yy-loadmore-wrapper displayflex yy-jc-center yy-ai-center flex-h displaynone'></div>"),n.baseConstructor.call(this,t),this.stickyHeaderIndices=this.config.stickyHeaderIndices,i.isInLoading=!1,i.canRefresh=!1;var s=this.config.comKey+"_pulltorefresh",r=this.config.comKey+"_canpulltorefresh";this.pluginCanPullToRefreshMethod=this.pageview.plugin[r];var o=this.config.comKey+"_loadmore";this.pluginPullToRefreshMethod=this.pageview.plugin[s],this.pluginLoadMoreMethod=this.pageview.plugin[o];var l=this.config.comKey+"_reload";this.pluginLoadMoreErrorToReloadMethod=this.pageview.plugin[l],this.pluginPullToRefreshMethod&&(this.innerWrapper=$("<div class='yy-view-innerwrapper yy-fd-column"+a+"'></div>"),this.$el.css({zIndex:1}),this.$$childrenWrapper=this.innerWrapper,this._initLoadFirstErrorDom(),this._initPullToRefreshDom(),this.$el.append(this.innerWrapper)),this._initTouchEvent(),this.LoadMoreOffsetBottom=e.getRealHeight(120),this.$el.addClass(a),t.root=t.root||[],this.initLayout(t.$$datasource,null,this.rowInstance,function(){i.childInitOver()})}return e.extends(n,t),n.prototype.scrollTop=function(e){if(!e)return this.$el.scrollTop();this.$el.scrollTop(e)},n.prototype.hideLoadMore=function(){this.LoadMoreWrapper&&this.LoadMoreWrapper.addClass("displaynone")},n.prototype.showLoadMore=function(){this.LoadMoreWrapper&&this.LoadMoreWrapper.removeClass("displaynone")},n.prototype._initPullToRefreshDom=function(){var t=e.getRealHeight(40),i=e.getRealWidth(11),n=e.getRealWidth(15);this.pullLimitHeight=e.getRealHeight(40),this.pullToRefreshWrapper=$("<div style='height:"+t+"px;margin-top:-"+t+"px' class='yy-pull-wrapper'></div>"),this.pullMessWrapper=$("<div style='height:"+this.pullLimitHeight+"px' class='displayflex yy-jc-center yy-ai-center flex-h yy-pull-mes-wrapper'></div>"),this.pullArrowIcon=$("<i style='font-size:"+n+"px' class='yy-pull-arrow'></i>"),this.pullMesLabel=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>"+e.getLanguageText("pullToRefresh")+"</span>");var a=$("<div class='preloader yy-pull-loadingicon'></div>");this.pullMessWrapper.append(a).append(this.pullArrowIcon).append(this.pullMesLabel).appendTo(this.pullToRefreshWrapper),this.innerWrapper.append(this.pullToRefreshWrapper)},n.prototype._initLoadMoreDom=function(){var t=(e.getRealHeight(36),e.getRealWidth(11)),i=$("<div class='preloader yy-loadmore-loadingicon'></div>");this.loadMoreLabel=$("<span style='font-size:"+t+"px' class='yy-pull-meslabel'>"+e.getLanguageText("loading")+"</span>"),this.LoadMoreWrapper.append(i).append(this.loadMoreLabel),this.$el.append(this.LoadMoreWrapper)},n.prototype._initLoadMoreErrorDom=function(){var t=this,i=e.getRealHeight(42),n=e.getRealWidth(11),a=e.getRealWidth(15);this.LoadMoreErrorWrapper=$("<div style='height:"+i+"px' class='yy-loadmore-wrapper displayflex yy-jc-center yy-ai-center flex-h displaynone'></div>");var s=$("<i style='font-size:"+a+"px' class='yy-icommon yy-loadmore-erroricon'></i>");this.loadErrorLabel=$("<span style='font-size:"+n+"px' class='yy-pull-meslabel'>"+e.getLanguageText("NetworkError")+"</span>");var r=$("<span style='font-size:"+n+"px' class='yy-loadmore-reload-babel'>"+e.getLanguageText("reLoading")+"</span>");r.bind("click",function(){t.pluginLoadMoreErrorToReloadMethod&&t.pluginLoadMoreErrorToReloadMethod.call(t.pageview.plugin,t,{})}),this.LoadMoreErrorWrapper.append(s).append(this.loadErrorLabel).append(r),this.$el.append(this.LoadMoreErrorWrapper)},n.prototype._initLoadFirstErrorDom=function(){var t=e.getRealHeight(36),i=e.getRealWidth(11),n=e.getRealWidth(15);this.LoadFirstErrorWrapper=$("<div data-mark='loadfirsterror' style='height:"+t+"px' class='yy-loadfirsterror-wrapper displayflex yy-jc-center yy-ai-center flex-h displaynone'></div>");var a=$("<i style='font-size:"+n+"px' class='yy-icommon yy-loadmore-erroricon'></i>");this.loadFirstErrorLabel=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>"+e.getLanguageText("networkerrorLoading")+"</span>"),this.LoadFirstErrorWrapper.append(a).append(this.loadFirstErrorLabel),this.$el.append(this.LoadFirstErrorWrapper)},n.prototype._initTouchEvent=function(){var t=this;if(this.pluginPullToRefreshMethod){var i,n=0;this.$el.bind("touchstart",function(e){if(!0!==t.config.onlyForSticky&&!t.isInLoading){t.isInLoading=!1,t.canRefresh=!1;var a=e.touches[0];n=a.pageY,i=t.$el.scrollTop()}}),this.$el.bind("scroll",function(e){t.pageview.refs.searchInput&&!t.pageview.refs.searchInput.$el.find("input").val()&&(t.pageview.refs.searchInput.$el.addClass("yy-sv-input-hide"),$(t.pageview.refs.searchInput.clearBtn[0]).addClass("displaynone"))}),this.$el.bind("touchmove",function(a){if(!0!==t.config.onlyForSticky&&!t.isInLoading){var s=a.touches[0],r=s.pageY,o=r-n;if(o>0){if(t.pluginCanPullToRefreshMethod){if(!0!==t.pluginCanPullToRefreshMethod.call(t.pageview.plugin,t))return}if(t.$el.scrollTop()<=0){t.$el.css({overflow:"hidden"}),a.preventDefault(),a.stopPropagation();var l=o-i;t.pageview.refs.searchInput&&(t.pageview.refs.searchInput.$el.hasClass("yy-sv-input-hide")?t.pageview.refs.searchInput.$el.removeClass("yy-sv-input-hide"):t.pageview.refs.searchInput.$el.show()),l>4*t.pullLimitHeight?(t.pullMesLabel.html(e.getLanguageText("releaseToUpdate")),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-release-refresh",t.canRefresh=!0):(t.pullMesLabel.html(e.getLanguageText("pullToRefresh")),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-push-refresh",t.canRefresh=!1),t.innerWrapper.css(e.processTransitionTanformStyle("none","translate3d(0,"+l/3+"px,0)"))}}}}),this.$el.bind("touchend",function(e){if(!0===t.config.onlyForSticky)return void t.resetPullLoadState();!0===t.config.noScroll||t.$el.css({"overflow-y":"auto"}),t.isInLoading||(t.canRefresh?(t.setPullLoadingState(),t.pluginPullToRefreshMethod&&t.pluginPullToRefreshMethod.call(t.pageview.plugin,t,{})):t.resetPullLoadState())})}},n.prototype.refreshStickyHeaderIndices=function(){var e=this;this.stickyHeaderIndicesComponent&&window.setTimeout(function(){e.navOffsetY=e.stickyHeaderIndicesComponent.$el[0].offsetTop},150)},n.prototype.childInitOver=function(){var e,t=this;this.stickyHeaderIndices&&(e=this.components[this.stickyHeaderIndices],this.stickyHeaderIndicesComponent=e,this.stickyHeaderIndicesIndex=e.$el.index()),this.pluginLoadMoreMethod&&(this._initLoadMoreDom(),this._initLoadMoreErrorDom(),this.scrollTimeId=null),null==e||this.pluginLoadMoreMethod?this.pluginLoadMoreMethod&&e?(this.stickyComHeight=e.$el.height(),this.isSupportSticky=i(),this.isSupportSticky?e.$el.addClass("sticky"):t.toFixedComponent(e),this.$el.bind("scroll",function(i){t.triggerLoadMore(),t.isSupportSticky||t.toFixedComponent(e)})):this.pluginLoadMoreMethod&&this.$el.bind("scroll",function(e){t.triggerLoadMore()}):(this.stickyComHeight=e.$el.height(),this.isSupportSticky=i(),this.isSupportSticky?e.$el.addClass("sticky"):t.toFixedComponent(e),this.$el.bind("scroll",function(i){this.isSupportSticky||t.toFixedComponent(e)}))},n.prototype.toFixedComponent=function(e){this.clientRect||(this.clientRect=this.$el[0].getBoundingClientRect()),this.hasFixed||(this.navOffsetY=e.$el[0].offsetTop),this.$el.scrollTop()>this.navOffsetY+20?(this.hasFixed=!0,e.$el.addClass("fixed")):e.$el.removeClass("fixed")},n.prototype.triggerLoadMore=function(e){var t=this;t.scrollTimeId&&window.clearTimeout(t.scrollTimeId),t.scrollTimeId=window.setTimeout(function(){t._onScroll(e)},80)},n.prototype.setPullLoadingState=function(){var t=this;t.pullMesLabel&&(t.isInLoading=!0,t.LoadMoreErrorWrapper&&t.LoadMoreErrorWrapper.addClass("displaynone"),t.LoadFirstErrorWrapper.addClass("displaynone"),this.loadErrorWrapWhenNoPullRefrsh&&this.loadErrorWrapWhenNoPullRefrsh.addClass("displaynone"),t.pullMesLabel.html(e.getLanguageText("loading")),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-push-refreshing",t.innerWrapper.css(e.processTransitionTanformStyle("transform .2s ease","translate3d(0,"+t.pullLimitHeight+"px,0)")))},n.prototype.resetPullLoadState=function(){var t=this;t.pullMesLabel&&(t.isInLoading=!1,t.canRefresh=!1,t.pullMesLabel.html(e.getLanguageText("pullToRefresh")),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-push-refresh",t.innerWrapper.css(e.processTransitionTanformStyle("transform .3s ease","translate3d(0,0,0)")))},n.prototype.setLoadFirstError=function(){var t=this;if(this.LoadFirstErrorWrapper)this.LoadFirstErrorWrapper.removeClass("displaynone");else{if(!this.loadErrorWrapWhenNoPullRefrsh){var i=e.getRealHeight(42),n=e.getRealWidth(11),a=e.getRealWidth(15);this.loadErrorWrapWhenNoPullRefrsh=$("<div style='height:"+i+"px' class='yy-loadmore-wrapper displayflex yy-jc-center yy-ai-center flex-h displaynone'></div>");var s=$("<i style='font-size:"+a+"px' class='yy-icommon yy-loadmore-erroricon'></i>");this.loadErrorLabelWhenNoPullRefrsh=$("<span style='font-size:"+n+"px' class='yy-pull-meslabel'>"+e.getLanguageText("NetworkError")+"</span>");var r=$("<span style='font-size:"+n+"px' class='yy-loadmore-reload-babel'>"+e.getLanguageText("reLoading")+"</span>");r.bind("click",function(){t.pluginLoadMoreErrorToReloadMethod&&t.pluginLoadMoreErrorToReloadMethod.call(t.pageview.plugin,t,{})}),this.loadErrorWrapWhenNoPullRefrsh.append(s).append(this.loadErrorLabelWhenNoPullRefrsh).append(r),this.$el.append(this.loadErrorWrapWhenNoPullRefrsh)}this.loadErrorWrapWhenNoPullRefrsh.removeClass("displaynone")}this.resetPullLoadState()},n.prototype.setCanLoadMore=function(t){this.loadMoreLabel&&(t&&t.isReload?this.canLoadMore=!1:this.canLoadMore=!0,this.loadMoreLabel.html(e.getLanguageText("loading")),this.LoadMoreErrorWrapper.addClass("displaynone"),this.LoadFirstErrorWrapper&&this.LoadFirstErrorWrapper.addClass("displaynone"),this.loadErrorWrapWhenNoPullRefrsh&&this.loadErrorWrapWhenNoPullRefrsh.addClass("displaynone"),this.LoadMoreWrapper.removeClass("displaynone yy-loaddone"))},n.prototype.setHasLoadDone=function(){this.loadMoreLabel&&(this.canLoadMore=!1,this.loadMoreLabel.html(e.getLanguageText("showDone")),this.LoadFirstErrorWrapper&&this.LoadFirstErrorWrapper.addClass("displaynone"),this.loadErrorWrapWhenNoPullRefrsh&&this.loadErrorWrapWhenNoPullRefrsh.addClass("displaynone"),this.LoadMoreErrorWrapper.addClass("displaynone"),this.LoadMoreWrapper.addClass("yy-loaddone").removeClass("displaynone"))},n.prototype.setHasLoadDone1=function(){this.pullToRefreshWrapper[0].className="yy-pull-wrapper"},n.prototype.setInitLoadMessage=function(){this.loadMoreLabel&&(this.LoadFirstErrorWrapper&&this.LoadFirstErrorWrapper.addClass("displaynone"),this.loadErrorWrapWhenNoPullRefrsh&&this.loadErrorWrapWhenNoPullRefrsh.addClass("displaynone"),this.LoadMoreErrorWrapper.addClass("displaynone"),this.LoadMoreWrapper.addClass("yy-loaddone displaynone"))},n.prototype.setLoadMoreErrorState=function(){this.canLoadMore=!1,this.resetPullLoadState(),this.LoadMoreWrapper.addClass("displaynone"),this.LoadMoreErrorWrapper.removeClass("displaynone"),this.scrollToBottom()},n.prototype.scrollToBottom=function(){this.$el.scrollTop(this.$el[0].scrollHeight)},n.prototype._onScroll=function(e){this.canLoadMore&&this.$el[0].offsetHeight+this.$el.scrollTop()+this.LoadMoreOffsetBottom>=this.$el[0].scrollHeight&&(this.canLoadMore=!1,this.pluginLoadMoreMethod.call(this.pageview.plugin,this,{}))},n}),define("../../components/viewpager",["utils","base"],function(e,t){function i(e){var t=this;i.baseConstructor.call(this,e),this.autoHeight=e.autoHeight,this.$el.addClass("yy-viewpager"),this.autoHeight&&this.$el.addClass("yy-autoheight-viewpager"),this.height=0,this.items={},this.paramsDict={};var n=e.defaultKey;n||console.error("viewpager控件为提供defalutKey属性"),this.curPageViewItem=null,this._getViewPagerItem(n,this.config.params||{},function(e){t.curPageViewItem=e},function(){})}var n=function(e){n.baseConstructor.call(this,e),this.$el.addClass("displayflex yy-viewpager-item"),this.contentInstance=e.contentInstance,this.$el.append(e.contentInstance.$el)};return e.extends(n,t),n.prototype.hide=function(){e.css(this.$el,{display:"none"})},n.prototype.show=function(){e.css(this.$el,{display:"block"})},e.extends(i,t),i.prototype._createViewPagerItem=function(e,t,i,a){var s=new n({type:"viewpageritem",contentType:t,contentInstance:i,$$pageview:this.pageview,$$datasource:this.datasource,$$parent:this});this.items[e]=s,this.$el.append(s.$el),a(s)},i.prototype.showItem=function(e,t){var i=this;this.paramsDict[e]=t,this._getViewPagerItem(e,t,function(e){i.curPageViewItem&&(i.curPageViewItem.contentInstance.plugin.onHideItem&&i.curPageViewItem.contentInstance.plugin.onHideItem(i,t),i.curPageViewItem.hide()),i.curPageViewItem=e,i.curPageViewItem.contentInstance.plugin.onShowItem&&i.curPageViewItem.contentInstance.plugin.onShowItem(i,t),i.curPageViewItem.show()},function(){})},i.prototype._getViewPagerItem=function(e,t,i,n){var a=this,s=this.items[e];if(s){if(s.contentInstance.plugin){s.contentInstance.viewpagerParams=t;var r=s.contentInstance.plugin.onPageResume;r&&r.call(s.contentInstance.plugin,s.contentInstance,{})}return void i(s)}var o=e.split("_")[0];this.pageview.config.components[o];this.pageview.pageManager.getPageConfigByPageKey(o,function(n){n.viewpagerParams=t,n.viewpager=a,n.fullPageKey=e;var s=a.pageview.pageManager.createPageView(n);a._createViewPagerItem(e,"pageview",s,i)},function(){n&&n()})},i}),define("parts/common",["utils","md5"],function(e,t){var i=/(\.thumb\.jpg|\.middle\.jpg|\.big\.jpg)$/;return{thumbImg:function(e){return e&&e.replace(i,".thumb.jpg")||"#"},descColor:"#666666",backColor:"#f7f7f7",mainColor:"#29B6F6",seTitleColor:"#999999",labelColor:"#666666",titleColor:"#333333",HeadColor:"#37B7FD",ADDITIONAL_FORM_DATA:"ADDITIONAL_FORM_DATA",replaceUrl:function(e,t,i){var n,a=window.location.href.split("taskId="+e);n=1===a.length?window.location.href+"&taskId="+t:window.location.href.split("taskId="+e).join("taskId="+t),i.pageManager.preventHasChange(),window.location.replace(n)},gotoDetail:function(e,t){var i=t.params.token,n=t.pageManager.appConfig.taskhost+"/dist/index.html#TaskDetailView?token="+i+"&taskId="+(e.datasource.mirrorId||e.datasource.id);window.location.href=n},MoneyDX:function(e){var t="",i="仟佰拾万仟佰拾亿仟佰拾万仟佰拾元角分",n="";if(!e||0==e)return"";0===(e+"").indexOf("-")&&(e=e.slice(1)),(e+"").indexOf(",")>0&&(e=e.replace(",","")),e+="00";var a=e.indexOf(".");a>=0&&(e=e.substring(0,a)+e.substr(a+1,2)),i=i.substr(i.length-e.length);for(var s=0;s<e.length;s++)t+="零壹贰叁肆伍陆柒捌玖".substr(e.substr(s,1),1)+i.substr(s,1);return n=t.replace(/零角零分$/,"整").replace(/零[仟佰拾]/g,"零").replace(/零{2,}/g,"零").replace(/零([亿|万])/g,"$1").replace(/零+元/,"元").replace(/亿零{0,3}万/,"亿").replace(/^元/,"零元"),n=n.replace(/零分/,""),n.replace(/零角/,"零")},customTimestamp:function(t,i,n){var a="";try{t=parseFloat(t);var s=new Date(t),r=new Date,o=r.getTime(),l=e.getDateInfo(s),c=e.getDateInfo(r);o=parseInt((o-t)/1e3),a=c.year===l.year&&c.day===l.day&&c.month===l.month&&n?"今天 "+this.formatTime(s,"hh:mm"):i?this.formatTime(s,i):this.formatTime(s,"yyyy-MM-dd hh:mm")}catch(e){}return a},formatTime:function(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t},sumVal:function(e,t){for(var i=[],n=0,a=0,s=0,r=0,o=e.length;r<o;r++)if(void 0!==e[r]){var l=e[r].toString(),c=l.split(".");2===c.length&&(a=c[1].length)>s&&(s=a);try{l=parseFloat(l),isNaN(l)||i.push(l)}catch(e){}}if(s>0){for(var p=Math.pow(10,s),d=0,h=i.length;d<h;d++)n+=Math.round(i[d]*p*1e3)/1e3;n/=p}else for(var u=0,f=i.length;u<f;u++)n+=i[u];return t>=1?n.toFixed(t):parseInt(n)},avgVal:function(e,t){var i=this.sumVal(e),n=0;return e.length&&(n=i/e.length),t>=1?n.toFixed(t):parseInt(n)},maxVal:function(e){var t=[];return e.forEach(function(e){t.push(e)}),Math.max.apply(Math,t)},minVal:function(e){var t=[];return e.forEach(function(e){t.push(e)}),Math.min.apply(Math,t)},thousandthValue:function(e){var t=/(-?\d)(\d{3})/;if(e){for(e+="";t.test(e);)e=e.replace(t,"$1,$2");return e}}}}),define("parts/language",[],function(){var e=navigator.language||"zh-CN";"tw"==e.toLowerCase()&&(e="zh-CN"),e=/^zh/.test(e)?"zh-CN":/^en/.test(e)?"en":/^es/.test(e)?"es":e;return"zh-CN"===e?{iconUrl:{refuse:"./imgs/refuse.png",agreee:"./imgs/agree.png"},formTips:{tasksToProcess:" 待审批 ",tasksProcessed:" 已审批 ",onLoading:" 加载中... ",formDetail:" 详情 ",processDetail:" 流程 ",attachment:" 附件 ",noAttachment:" 暂无附件 ",noContent:" 暂无内容 ",SubmitApplication:" 提交申请 ",delete:" 删除中... ",going:" 审批中 ",deleteSuccess:" 删除成功！ ",deleteFail:" 删除失败，稍后再试 ",makeSureDeleteFile:"确定要删除该附件吗? "},formAction:{agree:" 同意 ",attaContributor:" 贡献者：",reject:" 驳回 ",cancel:" 取消 ",confirm:" 确认 ",clear:" 清除 "}}:{iconUrl:{refuse:"./imgs/refuse_e.png",agreee:"./imgs/agree_e.png"},formTips:{tasksToProcess:" Pending ",tasksProcessed:" Approved ",onLoading:" Loading... ",formDetail:" Form ",processDetail:" Process ",attachment:" Attachment ",noAttachment:" No Attachment ",noContent:" No Content ",SubmitApplication:" Submitted an application ",delete:" Deleting... ",going:" In Approval Process ",deleteSuccess:" Delete Success ",deleteFail:" Delete Fail, Please try again later ",makeSureDeleteFile:"Are you sure you wish to delete this attachment? "},formAction:{agree:" Consent ",attaContributor:" Contributor：",reject:" Reject ",cancel:" Cancel ",confirm:" Confirm ",clear:" Clear "}}}),define("logic/../../../components/dialog",["utils","base"],function(e,t){var i=function(t){var i=this,n=t.wrapper||$(document.body),a=t.mode||1,s=t.className;this.dialogBackCover=$("<div style='visibility: hidden;' class='yy-dialog-bk'></div>"),this.dialogWrapper=$("<div class='yy-dialog-wrapper yy-dialog-effect-"+a+" yy-dialog-hide + "+s+"'></div>");var r=$("<div class='yy-dialog-inner'></div>"),o=$("<div class='yy-dialog-body'></div>"),l="row"===t.btnDirection?"yy-fd-row":"yy-fd-column",c=$("<div class='yy-dialog-btn-wrapper displayflex "+l+"'></div>");this.dialogBackCover.bind("click",function(){i.hide()});var p=t.title||"";this.titleDom=$("<div class='yy-dialog-title'>"+p+"</div>"),this.bodyContentDom=$("<div class='yy-dialog-content'></div>");var d=t.createContent;if(d)d(this.bodyContentDom);else{var h=t.contentText;this.contentTextDom=$("<div class='yy-dialog-content-text'>"+h+"</div>"),this.bodyContentDom.append(this.contentTextDom)}if(o.append(this.titleDom).append(this.bodyContentDom),t.buttons)for(var u=0,f=t.buttons.length;u<f;u++){var g=t.buttons[u],p=g.title||e.getLanguageText("button"),m=g.style,y=g.onClick;!function(t,i,n,a,s){var r=$("<div class='yy-dialog-btn yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+t+"</div>");i&&e.css(r,i),a&&r.bind("click",function(e){a()}),n.append(r)}(p,m,c,y)}r.append(o).append(c),this.dialogWrapper.append(r),n.append(this.dialogWrapper).append(this.dialogBackCover)};return i.prototype.show=function(){var e=this;this.dialogWrapper.css({visibility:"visible"}),this.dialogBackCover.css({visibility:"visible"}),this.dialogBackCover.addClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.removeClass("yy-dialog-hide").addClass("yy-dialog-show")},1)},i.prototype.hide=function(){var e=this;this.dialogWrapper.removeClass("yy-dialog-show").addClass("yy-dialog-hide"),this.dialogBackCover.removeClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.css({visibility:"hidden"}),e.dialogBackCover.css({visibility:"hidden"})},200)},i}),define("logic/commonlist",["../parts/common","utils","../parts/language","../../../components/dialog"],function(e,t,i,n){function a(e){this.pageview=e.pageview;this.pageview.params.type;this.fullPageKey=this.pageview.config.fullPageKey,this.listDataSource=[],this.searchValue=!1,this.searchKey=!0}return a.prototype={body_init:function(e){this.body=e},searchBtn_click:function(e,t){this.pageview.refs.leftview.$el.hide(),this.pageview.refs.searchInput.$el.show(),this.pageview.refs.searchInput._focus(),this.pageview.refs.approveSelector.hideDropDown()},loadNum:function(){},searchview_init:function(e,t){e.config.style.display="none"},nodata_init:function(e,t){e.config.text=i.formTips.noContent},searchInput_cancel:function(e,t){(t.value||this.searchValue)&&(this.searchValue=!1,e.input.val(""),this.listviewSender.config.ajaxConfig.data.keyword="",this.pageview.refs.listview.loadFirstPageData({parentAnimate:!0})),this.pageview.refs.searchInput.$el.hide()},searchInput_search:function(e,t){t.value&&(this.searchValue=!0),this.pageview.refs.listview.ajaxConfig.data.start=0,this.pageview.refs.listview.ajaxConfig.data.pageNum=1,this.listviewSender.config.ajaxConfig.data.categoryIds=null,this.listviewSender.config.ajaxConfig.data.keyword=t.value,this.pageview.refs.listview.loadFirstPageData({parentAnimate:!0})},onPageResume:function(){this.pageview.refs.listview.ajaxConfig.data.start=0,this.pageview.refs.listview.ajaxConfig.data.pageNum=1,"commonlist_myapproverunning"===this.fullPageKey&&!0===window.needRefresMyApproveListData&&(window.needRefresMyApproveListData=!1,this.pageview.refs.listview.loadFirstPageData({parentAnimate:!0})),"commonlist_copyapprove"===this.fullPageKey&&!0===window.needRefresCopyApproveListData&&(window.needRefresCopyApproveListData=!1,this.pageview.refs.listview.loadFirstPageData({parentAnimate:!0}))},body_pulltorefresh:function(e,t){this.pageview.refs.listview.ajaxConfig.data.start=0,this.pageview.refs.listview.ajaxConfig.data.pageNum=1,this.pageview.refs.listview.setAjaxConfigParams(),this.pageview.refs.listview.loadFirstPageData()},body_reload:function(e){this.pageview.refs.listview.reload()},body_loadmore:function(e,t){var i=this.pageview.refs.listview.ajaxConfig.data.size,n=this.pageview.refs.listview.ajaxConfig.data.start,a=i+n;this.pageview.refs.listview.ajaxConfig.data.start=a,this.pageview.refs.listview.ajaxConfig.data.pageNum++,this.pageview.refs.listview.setAjaxConfigParams(),this.pageview.refs.listview.loadNextPageData()},listview_parsedata:function(e,t){var i=t.data;return 500===i.code&&(i.data||(i.data=[]),i.data)},listview_init:function(e){var t="";e.config.style.marginTop=5,t="/process/listTodo",this.listviewSender=e,e.config.ajaxConfig={url:t,type:"GET",pageSize:10,pageNumKey:"pageNum",data:{pageNum:1,start:0,size:10}},e.config.autoLoadData=!0},row_status_init:function(e,t){e.config.text=i.formTips.going,e.config.style.color="rgb(231, 167, 87)"},row_title_init:function(e,t){e.config.text=e.datasource.title},row_time_init:function(e,i){e.datasource.date&&(e.config.text=t.timestampToTimeStr(e.datasource.date,!0))},listview_rowclick:function(e,t){this.pageview.go("detail",{taskId:e.datasource.taskid,cuserId:e.datasource.cuserId,billId:e.datasource.billId,billType:e.datasource.billType})}},a}),define("pages/commonlist",["../logic/commonlist","../parts/common","utils"],function(e,t,i){return{pluginClass:e,style:{backgroundColor:t.backColor},root:["body"],components:{body:{type:"view",style:{flex:1,overflowY:"auto",overflowX:"hidden"},root:["listview"]},icons:{type:"icon",font:"ap_e903"},searchview:{type:"view",root:["leftview","searchInput"],style:{width:"100%"}},leftview:{type:"view",ref:!0,root:["selectItem","searchBtn"]},selectItem:{type:"view",ref:!0,root:["approveSelector"],style:{background:"#fff",width:331}},approveSelector:{type:"conditionselector",mode:1,ref:!0,menu1ClassName:"approveSelector",style:{backgroundColor:"#fff",borderBottom:"1px solid #e2e8ed"},items:["全部状态","全部时间","全部类型"],menu0LabelKey:"name",menu1LabelKey:"name",menu2LabelKey:"name",menu0selectedKey:0,menu1selectedKey:0,menu2selectedKey:0,menu2LeftStyle:{width:90},menu1Style:{minHeight:40},menu2Style:{minHeight:40},menu0Style:{minHeight:40},menu0Col:2},searchBtn:{type:"icon",ref:!0,font:"cap_e90c",style:{borderBottom:"solid 1px #e2e8ed",backgroundColor:"#fff",color:"#ccc",width:45,position:"absolute",right:0,top:0,bottom:0}},searchInput:{cancelBtnStyle:{color:"#37B7FD",fontSize:15},style:{backgroundColor:"#fff",display:"none"},iconStyle:{},placeholder:"搜索标题",font:"ap_e903",ref:!0,type:"simplesearchview"},searchInput1:{cancelBtnStyle:{color:"#37B7FD",fontSize:15},style:{backgroundColor:"#fff",display:"none"},iconStyle:{},placeholder:"搜索标题",font:"ap_e903",ref:!0,type:"simplesearchview"},nodata:{ref:"true",type:"icon",text:"暂无内容",textPos:"bottom",src:"./imgs/yunshen_nodata.png?v=1",textStyle:{fontSize:"15px",color:"#ADADAD",paddingLeft:11,paddingTop:10},style:{width:"100%",alineItems:"center",justifyContent:"center",backgroundColor:"#F7F7F7",paddingTop:180},iconStyle:{w:80,h:80}},listview:{ref:!0,type:"listview",nodata:"nodata",itemClassName:"bottom-half-line",rowStyle:{flexDirection:"row",paddingTop:12,paddingBottom:12},style:{flexDirection:"column"},root:["row_mide","row_right"]},row_mide:{type:"view",ref:!0,style:{flex:1,flexDirection:"column",justifyContent:"center",paddingLeft:15},root:["row_title","row_feature_repeat"]},row_right:{type:"view",style:{width:100,alignItems:"flex-end",paddingRight:15},root:["row_time","row_view"]},row_view:{type:"view",root:["row_state","row_status"],style:{marginTop:6,flexDirection:"row"}},row_state:{type:"text",text:"逾期",ref:!0,style:{display:"none",fontSize:10,borderRadius:4,backgroundColor:"#FDE6E7",color:"#FA4F52",justifyContent:"center",verticalAlign:"middle",textAlign:"center",width:36,marginTop:-2}},row_status:{type:"text",style:{fontSize:12,color:"#8C8D8E",width:"100%"},textStyle:{wordBreak:"break-word",width:"100%",textAlign:"right"}},row_title:{type:"text",numberofline:2,style:{color:"#292F33",fontSize:14,lineHeight:"18px",maxWidth:"100%"},text_bind:"processInstance.name"},row_feature_repeat:{type:"repeat",root:["rep_view"],ref:!0,style:{display:"inline",paddingTop:6},itemStyle:{}},rep_view:{type:"view",style:{width:"100%"},root:["row_feature_text"]},row_feature_text:{type:"text",numberofline:1,style:{color:"#ADADAD",fontSize:12,lineHeight:16},text_bind:"text"},row_time:{type:"text",style:{top:2,color:"#999999",fontSize:12},text_bind:"createTime"}}}}),define("logic/deal",["../parts/language"],function(e){function t(e){this.pageview=e.pageview,this.params=this.pageview.params||{},this.comment=""}return t.prototype={onPageResume:function(){},input_textarea_init:function(t,i){"agree"===this.params.action?(t.config.placeholder=e.formAction.agree||e.placeholder.agreeComments,t.config.text=e.formAction.agree||e.placeholder.agreeComments):"disagreee"===this.params.action?t.config.placeholder=e.formAction.reject||"不同意":t.config.placeholder=e.formAction.reject||e.placeholder.rejectComments},submitbtn_init:function(t,i){"agree"===this.params.action?t.config.title=e.formAction.agree:"disagree"===this.params.action?t.config.title=e.formAction.disagreee||"不同意":t.config.title=e.formAction.reject},submitbtn_click:function(t,i){var n={};try{n.approveMessage=t.parent.parent.components.input_textarea_container.$el.find("textarea").val()||""}catch(e){console.log(e)}n.taskId=this.params.taskId,n.action=this.params.action,n.cuserId=this.params.cuserId,n.billId=this.params.billId,n.billType=this.params.billType,n.groupid=this.params.groupid,"agree"===this.params.action?(n.comment=this.beforeSubmit(n.comment)||e.formAction.agree,this.doAgree(n)):"disagree"===this.params.action?(n.comment=this.beforeSubmit(n.comment)||e.formAction.disagreee||"不同意",this.doAgree(n)):"reject"===this.params.action&&(n.comment=this.beforeSubmit(n.comment)||e.formAction.reject,this.doAgree(n))},doAgree:function(t){var i=this,n=t,a="/process/audit";"reject"===n.action&&(a="/process/rejectTask"),this.pageview.showLoading({text:e.formTips.onLoading,timeout:8e3}),this.pageview.ajax({url:a,data:n,type:"GET",success:function(t){i.pageview.hideLoading(!0),0===t.code?(i.pageview.showTip({text:e.formTips.successfullyApproved,duration:800}),setTimeout(function(){i.pageview.goBack(-1)},800)):i.pageview.showTip({text:t.desc,duration:2e3})},error:function(e){}})},beforeSubmit:function(e){return this.filterEmoji(e)},filterEmoji:function(e){return e?e.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]|[\uD800-\uDBFF]|[\uDC00-\uDFFF]/g,""):""}},t}),define("pages/deal",["../logic/deal","../parts/common","utils"],function(e,t,i){return{pluginClass:e,style:{backgroundColor:"#F2F3F4"},root:["main_view"],components:{main_view:{type:"view",root:["main_view_content"],style:{flexDirection:"column",height:"100%",overflowY:"auto",overflowX:"hidden"}},main_view_content:{type:"view",root:["input_textarea_container","bottomToolBar"],style:{flexDirection:"column",flex:"1 1 1px",marginTop:5}},input_textarea_container:{type:"view",root:["input_textarea"],style:{flexDirection:"column",paddingBottom:12,backgroundColor:"#fff",marginBottom:20}},input_textarea:{type:"textarea",ref:!0,max:2e3,limitStyle:{right:10,color:"#aaa",display:"none"},numStyle:{},maxStyle:{},placeholder:"",style:{height:150,paddingLeft:15,paddingRight:15,fontSize:15,paddingTop:15,width:"100%"}},bottomToolBar:{type:"view",ref:!0,style:{flexDirection:"row",alignItems:"center"},root:["submitbtn"]},submitbtn:{type:"button",title:"提交",mode:2,style:{height:42,fontSize:16,width:"90%",backgroundColor:"#29b6f6",margin:"auto"}}}}}),function(e,t){"use strict";function i(e,t){for(var i,n=[],r=0;r<e.length;++r){if(!(i=s[e[r]]||a(e[r])))throw"module definition dependecy not found: "+e[r];n.push(i)}t.apply(null,n)}function n(e,n,a){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(n===t)throw"invalid module definition, dependencies must be specified";if(a===t)throw"invalid module definition, definition function must be specified";i(n,function(){s[e]=a.apply(null,arguments)})}function a(t){
for(var i=e,n=t.split(/[.\/]/),a=0;a<n.length;++a){if(!i[n[a]])return;i=i[n[a]]}return i}var s={},r="moxie/core/utils/Basic",o="moxie/core/I18n",l="moxie/core/utils/Mime",c="moxie/core/utils/Env",p="moxie/core/utils/Dom",d="moxie/core/Exceptions",h="moxie/core/EventTarget",u="moxie/core/utils/Encode",f="moxie/runtime/Runtime",g="moxie/runtime/RuntimeClient",m="moxie/file/Blob",y="moxie/file/File",v="moxie/file/FileInput",w="moxie/file/FileDrop",b="moxie/runtime/RuntimeTarget",x="moxie/file/FileReader",C="moxie/core/utils/Url",_="moxie/file/FileReaderSync",S="moxie/xhr/FormData",I="moxie/xhr/XMLHttpRequest",D="moxie/runtime/Transporter",$="moxie/image/Image",T="moxie/runtime/html5/Runtime",k="moxie/core/utils/Events",E="moxie/runtime/html5/file/FileReader",R="moxie/runtime/html5/utils/BinaryReader",L="moxie/runtime/html5/image/JPEGHeaders",P="moxie/runtime/html5/image/ExifParser",W="moxie/runtime/html5/image/JPEG",A="moxie/runtime/html5/image/PNG",N="moxie/runtime/html5/image/ImageInfo",M="moxie/runtime/html5/image/MegaPixel",O="moxie/runtime/html5/image/Image",F="moxie/runtime/flash/Runtime",B="moxie/runtime/flash/file/Blob",z="moxie/runtime/flash/file/FileReader",j="moxie/runtime/flash/file/FileReaderSync",H="moxie/runtime/flash/xhr/XMLHttpRequest",K="moxie/runtime/flash/runtime/Transporter",U="moxie/runtime/flash/image/Image",V="moxie/runtime/silverlight/Runtime",G="moxie/runtime/html4/Runtime";n(r,[],function(){var e=function(e){return void 0===e?"undefined":null===e?"null":e.nodeType?"node":{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},t=function(n){return i(arguments,function(a,s){s>0&&i(a,function(i,a){void 0!==i&&(e(n[a])===e(i)&&~r(e(i),["array","object"])?t(n[a],i):n[a]=i)})}),n},i=function(e,t){var i,n,a,s;if(e){try{i=e.length}catch(e){i=s}if(i===s){for(n in e)if(e.hasOwnProperty(n)&&!1===t(e[n],n))return}else for(a=0;i>a;a++)if(!1===t(e[a],a))return}},n=function(t){var i;if(!t||"object"!==e(t))return!0;for(i in t)return!1;return!0},a=function(t,i){function n(s){"function"===e(t[s])&&t[s](function(e){++s<a&&!e?n(s):i(e)})}var a=t.length;"function"!==e(i)&&(i=function(){}),t&&t.length||i(),n(0)},s=function(e,t){var n=0,a=e.length,s=new Array(a);i(e,function(e,i){e(function(e){if(e)return t(e);var r=[].slice.call(arguments);r.shift(),s[i]=r,++n===a&&(s.unshift(null),t.apply(this,s))})})},r=function(e,t){if(t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i}return-1},o=function(t,i){var n=[];"array"!==e(t)&&(t=[t]),"array"!==e(i)&&(i=[i]);for(var a in t)-1===r(t[a],i)&&n.push(t[a]);return!!n.length&&n},l=function(e,t){var n=[];return i(e,function(e){-1!==r(e,t)&&n.push(e)}),n.length?n:null},c=function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i},p=function(){var e=0;return function(t){var i,n=(new Date).getTime().toString(32);for(i=0;5>i;i++)n+=Math.floor(65535*Math.random()).toString(32);return(t||"o_")+n+(e++).toString(32)}}(),d=function(e){return e?String.prototype.trim?String.prototype.trim.call(e):e.toString().replace(/^\s*/,"").replace(/\s*$/,""):e},h=function(e){if("string"!=typeof e)return e;var t,i={t:1099511627776,g:1073741824,m:1048576,k:1024};return e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")),t=e[2],e=+e[1],i.hasOwnProperty(t)&&(e*=i[t]),e};return{guid:p,typeOf:e,extend:t,each:i,isEmptyObj:n,inSeries:a,inParallel:s,inArray:r,arrayDiff:o,arrayIntersect:l,toArray:c,trim:d,parseSizeStr:h}}),n(o,[r],function(e){var t={};return{addI18n:function(i){return e.extend(t,i)},translate:function(e){return t[e]||e},_:function(e){return this.translate(e)},sprintf:function(t){var i=[].slice.call(arguments,1);return t.replace(/%[a-z]/g,function(){var t=i.shift();return"undefined"!==e.typeOf(t)?t:""})}}}),n(l,[r,o],function(e,t){var i={mimes:{},extensions:{},addMimeType:function(e){var t,i,n,a=e.split(/,/);for(t=0;t<a.length;t+=2){for(n=a[t+1].split(/ /),i=0;i<n.length;i++)this.mimes[n[i]]=a[t];this.extensions[a[t]]=n}},extList2mimes:function(t,i){var n,a,s,r,o=this,l=[];for(a=0;a<t.length;a++)for(n=t[a].extensions.split(/\s*,\s*/),s=0;s<n.length;s++){if("*"===n[s])return[];if(r=o.mimes[n[s]])-1===e.inArray(r,l)&&l.push(r);else{if(!i||!/^\w+$/.test(n[s]))return[];l.push("."+n[s])}}return l},mimes2exts:function(t){var i=this,n=[];return e.each(t,function(t){if("*"===t)return n=[],!1;var a=t.match(/^(\w+)\/(\*|\w+)$/);a&&("*"===a[2]?e.each(i.extensions,function(e,t){new RegExp("^"+a[1]+"/").test(t)&&[].push.apply(n,i.extensions[t])}):i.extensions[t]&&[].push.apply(n,i.extensions[t]))}),n},mimes2extList:function(i){var n=[],a=[];return"string"===e.typeOf(i)&&(i=e.trim(i).split(/\s*,\s*/)),a=this.mimes2exts(i),n.push({title:t.translate("Files"),extensions:a.length?a.join(","):"*"}),n.mimes=i,n},getFileExtension:function(e){var t=e&&e.match(/\.([^.]+)$/);return t?t[1].toLowerCase():""},getFileMime:function(e){return this.mimes[this.getFileExtension(e)]||""}};return i.addMimeType("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe"),i}),n(c,[r],function(e){function t(e,t,i){var n=0,a=0,s=0,r={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},o=function(e){return e=(""+e).replace(/[_\-+]/g,"."),e=e.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),e.length?e.split("."):[-8]},l=function(e){return e?isNaN(e)?r[e]||-7:parseInt(e,10):0};for(e=o(e),t=o(t),a=Math.max(e.length,t.length),n=0;a>n;n++)if(e[n]!=t[n]){if(e[n]=l(e[n]),t[n]=l(t[n]),e[n]<t[n]){s=-1;break}if(e[n]>t[n]){s=1;break}}if(!i)return s;switch(i){case">":case"gt":return s>0;case">=":case"ge":return s>=0;case"<=":case"le":return 0>=s;case"==":case"=":case"eq":return 0===s;case"<>":case"!=":case"ne":return 0!==s;case"":case"<":case"lt":return 0>s;default:return null}}var i=function(e){var t="function",i="object",n="major",a="name",s="version",r={has:function(e,t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()}},o={rgx:function(){for(var n,a,s,r,o,l,c,p=0,d=arguments;p<d.length;p+=2){var h=d[p],u=d[p+1];if(void 0===n){n={};for(r in u)o=u[r],typeof o===i?n[o[0]]=e:n[o]=e}for(a=s=0;a<h.length;a++)if(l=h[a].exec(this.getUA())){for(r=0;r<u.length;r++)c=l[++s],o=u[r],typeof o===i&&o.length>0?2==o.length?n[o[0]]=typeof o[1]==t?o[1].call(this,c):o[1]:3==o.length?n[o[0]]=typeof o[1]!==t||o[1].exec&&o[1].test?c?c.replace(o[1],o[2]):e:c?o[1].call(this,c,o[2]):e:4==o.length&&(n[o[0]]=c?o[3].call(this,c.replace(o[1],o[2])):e):n[o]=c||e;break}if(l)break}return n},str:function(t,n){for(var a in n)if(typeof n[a]===i&&n[a].length>0){for(var s=0;s<n[a].length;s++)if(r.has(n[a][s],t))return"?"===a?e:a}else if(r.has(n[a],t))return"?"===a?e:a;return t}},l={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},c={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[a,s,n],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[a,"Opera"],s,n],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[a,s,n],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[a,"IE"],s,n],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[a,"Yandex"],s,n],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[a,/_/g," "],s,n],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[a,s,n],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[a,"Dolphin"],s,n],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[a,"Chrome"],s,n],[/((?:android.+))version\/((\d+)?[\w\.]+)\smobile\ssafari/i],[[a,"Android Browser"],s,n],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[s,n,[a,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[s,n,a],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[a,[n,o.str,l.browser.oldsafari.major],[s,o.str,l.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[a,s,n],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[a,"Netscape"],s,n],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[a,s,n]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,s],[/rv\:([\w\.]+).*(gecko)/i],[s,a]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[s,o.str,l.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[s,o.str,l.os.windows.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],s],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[a,s],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[a,"Symbian"],s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],s],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[a,s],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],s],[/(sunos)\s?([\w\.]+\d)*/i],[[a,"Solaris"],s],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[a,s],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[a,"iOS"],[s,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[a,[s,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[a,s]]};return(new function(e){var t=e||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"");this.getBrowser=function(){return o.rgx.apply(this,c.browser)},this.getEngine=function(){return o.rgx.apply(this,c.engine)},this.getOS=function(){return o.rgx.apply(this,c.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return t},this.setUA=function(e){return t=e,this},this.setUA(t)}).getResult()}(),n=function(){var t={define_property:!1,create_canvas:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),return_response_type:function(t){try{if(-1!==e.inArray(t,["","text","document"]))return!0;if(window.XMLHttpRequest){var i=new XMLHttpRequest;if(i.open("get","/"),"responseType"in i)return i.responseType=t,i.responseType===t}}catch(e){}return!1},use_data_uri:function(){var e=new Image;return e.onload=function(){t.use_data_uri=1===e.width&&1===e.height},setTimeout(function(){e.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return t.use_data_uri&&("IE"!==a.browser||a.version>=9)},use_data_uri_of:function(e){return t.use_data_uri&&33e3>e||t.use_data_uri_over32kb()},use_fileinput:function(){var e=document.createElement("input");return e.setAttribute("type","file"),!e.disabled}};return function(i){var n=[].slice.call(arguments);return n.shift(),"function"===e.typeOf(t[i])?t[i].apply(this,n):!!t[i]}}(),a={can:n,browser:i.browser.name,version:parseFloat(i.browser.major),os:i.os.name,osVersion:i.os.version,verComp:t,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return a.OS=a.os,a}),n(p,[c],function(e){var t=function(e){return"string"!=typeof e?e:document.getElementById(e)},i=function(e,t){return!!e.className&&new RegExp("(^|\\s+)"+t+"(\\s+|$)").test(e.className)},n=function(e,t){i(e,t)||(e.className=e.className?e.className.replace(/\s+$/,"")+" "+t:t)},a=function(e,t){if(e.className){var i=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(i,function(e,t,i){return" "===t&&" "===i?" ":""})}},s=function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null)[t]:void 0},r=function(t,i){function n(e){var t,i,n=0,a=0;return e&&(i=e.getBoundingClientRect(),t="CSS1Compat"===c.compatMode?c.documentElement:c.body,n=i.left+t.scrollLeft,a=i.top+t.scrollTop),{x:n,y:a}}var a,s,r,o=0,l=0,c=document;if(t=t,i=i||c.body,t&&t.getBoundingClientRect&&"IE"===e.browser&&(!c.documentMode||c.documentMode<8))return s=n(t),r=n(i),{x:s.x-r.x,y:s.y-r.y};for(a=t;a&&a!=i&&a.nodeType;)o+=a.offsetLeft||0,l+=a.offsetTop||0,a=a.offsetParent;for(a=t.parentNode;a&&a!=i&&a.nodeType;)o-=a.scrollLeft||0,l-=a.scrollTop||0,a=a.parentNode;return{x:o,y:l}};return{get:t,hasClass:i,addClass:n,removeClass:a,getStyle:s,getPos:r,getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}}}}),n(d,[r],function(e){function t(e,t){var i;for(i in e)if(e[i]===t)return i;return null}return{RuntimeError:function(){function i(e){this.code=e,this.name=t(n,e),this.message=this.name+": RuntimeError "+this.code}var n={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};return e.extend(i,n),i.prototype=Error.prototype,i}(),OperationNotAllowedException:function(){function t(e){this.code=e,this.name="OperationNotAllowedException"}return e.extend(t,{NOT_ALLOWED_ERR:1}),t.prototype=Error.prototype,t}(),ImageError:function(){function i(e){this.code=e,this.name=t(n,e),this.message=this.name+": ImageError "+this.code}var n={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2};return e.extend(i,n),i.prototype=Error.prototype,i}(),FileException:function(){function i(e){this.code=e,this.name=t(n,e),this.message=this.name+": FileException "+this.code}var n={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return e.extend(i,n),i.prototype=Error.prototype,i}(),DOMException:function(){function i(e){this.code=e,this.name=t(n,e),this.message=this.name+": DOMException "+this.code}var n={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return e.extend(i,n),i.prototype=Error.prototype,i}(),EventException:function(){function t(e){this.code=e,this.name="EventException"}return e.extend(t,{UNSPECIFIED_EVENT_TYPE_ERR:0}),t.prototype=Error.prototype,t}()}}),n(h,[d,r],function(e,t){function i(){var i={};t.extend(this,{uid:null,init:function(){this.uid||(this.uid=t.guid("uid_"))},addEventListener:function(e,n,a,s){var r,o=this;return e=t.trim(e),/\s/.test(e)?void t.each(e.split(/\s+/),function(e){o.addEventListener(e,n,a,s)}):(e=e.toLowerCase(),a=parseInt(a,10)||0,r=i[this.uid]&&i[this.uid][e]||[],r.push({fn:n,priority:a,scope:s||this}),i[this.uid]||(i[this.uid]={}),void(i[this.uid][e]=r))},hasEventListener:function(e){return e?!(!i[this.uid]||!i[this.uid][e]):!!i[this.uid]},removeEventListener:function(e,n){e=e.toLowerCase();var a,s=i[this.uid]&&i[this.uid][e];if(s){if(n){for(a=s.length-1;a>=0;a--)if(s[a].fn===n){s.splice(a,1);break}}else s=[];s.length||(delete i[this.uid][e],t.isEmptyObj(i[this.uid])&&delete i[this.uid])}},removeAllEventListeners:function(){i[this.uid]&&delete i[this.uid]},dispatchEvent:function(n){var a,s,r,o,l,c={},p=!0;if("string"!==t.typeOf(n)){if(o=n,"string"!==t.typeOf(o.type))throw new e.EventException(e.EventException.UNSPECIFIED_EVENT_TYPE_ERR);n=o.type,o.total!==l&&o.loaded!==l&&(c.total=o.total,c.loaded=o.loaded),c.async=o.async||!1}if(-1!==n.indexOf("::")?function(e){a=e[0],n=e[1]}(n.split("::")):a=this.uid,n=n.toLowerCase(),s=i[a]&&i[a][n]){s.sort(function(e,t){return t.priority-e.priority}),r=[].slice.call(arguments),r.shift(),c.type=n,r.unshift(c);var d=[];t.each(s,function(e){r[0].target=e.scope,d.push(c.async?function(t){setTimeout(function(){t(!1===e.fn.apply(e.scope,r))},1)}:function(t){t(!1===e.fn.apply(e.scope,r))})}),d.length&&t.inSeries(d,function(e){p=!e})}return p},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},convertEventPropsToHandlers:function(e){var i;"array"!==t.typeOf(e)&&(e=[e]);for(var n=0;n<e.length;n++)i="on"+e[n],"function"===t.typeOf(this[i])?this.addEventListener(e[n],this[i]):"undefined"===t.typeOf(this[i])&&(this[i]=null)}})}return i.instance=new i,i}),n(u,[],function(){var e=function(e){return unescape(encodeURIComponent(e))},t=function(e){return decodeURIComponent(escape(e))},i=function(e,i){if("function"==typeof window.atob)return i?t(window.atob(e)):window.atob(e);var n,a,s,r,o,l,c,p,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,u=0,f="",g=[];if(!e)return e;e+="";do{r=d.indexOf(e.charAt(h++)),o=d.indexOf(e.charAt(h++)),l=d.indexOf(e.charAt(h++)),c=d.indexOf(e.charAt(h++)),p=r<<18|o<<12|l<<6|c,n=p>>16&255,a=p>>8&255,s=255&p,g[u++]=64==l?String.fromCharCode(n):64==c?String.fromCharCode(n,a):String.fromCharCode(n,a,s)}while(h<e.length);return f=g.join(""),i?t(f):f};return{utf8_encode:e,utf8_decode:t,atob:i,btoa:function(t,i){if(i&&e(t),"function"==typeof window.btoa)return window.btoa(t);var n,a,s,r,o,l,c,p,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,u=0,f="",g=[];if(!t)return t;do{n=t.charCodeAt(h++),a=t.charCodeAt(h++),s=t.charCodeAt(h++),p=n<<16|a<<8|s,r=p>>18&63,o=p>>12&63,l=p>>6&63,c=63&p,g[u++]=d.charAt(r)+d.charAt(o)+d.charAt(l)+d.charAt(c)}while(h<t.length);f=g.join("");var m=t.length%3;return(m?f.slice(0,m-3):f)+"===".slice(m||3)}}}),n(f,[r,p,h],function(e,t,i){function n(i,a,r,o,l){var c,p=this,d=e.guid(a+"_"),h=l||"browser";i=i||{},s[d]=this,r=e.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},r),i.preferred_caps&&(h=n.getMode(o,i.preferred_caps,h)),c=function(){var t={};return{exec:function(e,i,n,a){return c[i]&&(t[e]||(t[e]={context:this,instance:new c[i]}),t[e].instance[n])?t[e].instance[n].apply(this,a):void 0},removeInstance:function(e){delete t[e]},removeAllInstances:function(){var i=this;e.each(t,function(t,n){"function"===e.typeOf(t.instance.destroy)&&t.instance.destroy.call(t.context),i.removeInstance(n)})}}}(),e.extend(this,{initialized:!1,uid:d,type:a,mode:n.getMode(o,i.required_caps,h),shimid:d+"_container",clients:0,options:i,can:function(t,i){var a=arguments[2]||r;if("string"===e.typeOf(t)&&"undefined"===e.typeOf(i)&&(t=n.parseCaps(t)),"object"===e.typeOf(t)){for(var s in t)if(!this.can(s,t[s],a))return!1;return!0}return"function"===e.typeOf(a[t])?a[t].call(this,i):i===a[t]},getShimContainer:function(){var i,n=t.get(this.shimid);return n||(i=this.options.container?t.get(this.options.container):document.body,n=document.createElement("div"),n.id=this.shimid,n.className="moxie-shim moxie-shim-"+this.type,e.extend(n.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),i.appendChild(n),i=null),n},getShim:function(){return c},shimExec:function(e,t){var i=[].slice.call(arguments,2);return p.getShim().exec.call(this,this.uid,e,t,i)},exec:function(e,t){var i=[].slice.call(arguments,2);return p[e]&&p[e][t]?p[e][t].apply(this,i):p.shimExec.apply(this,arguments)},destroy:function(){if(p){var e=t.get(this.shimid);e&&e.parentNode.removeChild(e),c&&c.removeAllInstances(),this.unbindAll(),delete s[this.uid],this.uid=null,d=p=c=e=null}}}),this.mode&&i.required_caps&&!this.can(i.required_caps)&&(this.mode=!1)}var a={},s={};return n.order="html5,flash,silverlight,html4",n.getRuntime=function(e){return!!s[e]&&s[e]},n.addConstructor=function(e,t){t.prototype=i.instance,a[e]=t},n.getConstructor=function(e){return a[e]||null},n.getInfo=function(e){var t=n.getRuntime(e);return t?{uid:t.uid,type:t.type,mode:t.mode,can:function(){return t.can.apply(t,arguments)}}:null},n.parseCaps=function(t){var i={};return"string"!==e.typeOf(t)?t||{}:(e.each(t.split(","),function(e){i[e]=!0}),i)},n.can=function(e,t){var i,a,s=n.getConstructor(e);return!!s&&(i=new s({required_caps:t}),a=i.mode,i.destroy(),!!a)},n.thatCan=function(e,t){var i=(t||n.order).split(/\s*,\s*/);for(var a in i)if(n.can(i[a],e))return i[a];return null},n.getMode=function(t,i,n){var a=null;if("undefined"===e.typeOf(n)&&(n="browser"),i&&!e.isEmptyObj(t)){if(e.each(i,function(i,n){if(t.hasOwnProperty(n)){var s=t[n](i);if("string"==typeof s&&(s=[s]),a){if(!(a=e.arrayIntersect(a,s)))return a=!1}else a=s}}),a)return-1!==e.inArray(n,a)?n:a[0];if(!1===a)return!1}return n},n.capTrue=function(){return!0},n.capFalse=function(){return!1},n.capTest=function(e){return function(){return!!e}},n}),n(g,[d,r,f],function(e,t,i){return function(){var n;t.extend(this,{connectRuntime:function(a){function s(t){var r,l;return t.length?(r=t.shift(),(l=i.getConstructor(r))?(n=new l(a),n.bind("Init",function(){n.initialized=!0,setTimeout(function(){n.clients++,o.trigger("RuntimeInit",n)},1)}),n.bind("Error",function(){n.destroy(),s(t)}),n.mode?void n.init():void n.trigger("Error")):void s(t)):(o.trigger("RuntimeError",new e.RuntimeError(e.RuntimeError.NOT_INIT_ERR)),void(n=null))}var r,o=this;if("string"===t.typeOf(a)?r=a:"string"===t.typeOf(a.ruid)&&(r=a.ruid),r){if(n=i.getRuntime(r))return n.clients++,n;throw new e.RuntimeError(e.RuntimeError.NOT_INIT_ERR)}s((a.runtime_order||i.order).split(/\s*,\s*/))},getRuntime:function(){return n&&n.uid?n:(n=null,null)},disconnectRuntime:function(){n&&--n.clients<=0&&(n.destroy(),n=null)}})}}),n(m,[r,u,g],function(e,t,i){function n(s,r){function o(t,i,s){var r,o=a[this.uid];return"string"===e.typeOf(o)&&o.length?(r=new n(null,{type:s,size:i-t}),r.detach(o.substr(t,r.size)),r):null}i.call(this),s&&this.connectRuntime(s),r?"string"===e.typeOf(r)&&(r={data:r}):r={},e.extend(this,{uid:r.uid||e.guid("uid_"),ruid:s,size:r.size||0,type:r.type||"",slice:function(e,t,i){return this.isDetached()?o.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),e,t,i)},getSource:function(){return a[this.uid]?a[this.uid]:null},detach:function(e){this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),e=e||"";var i=e.match(/^data:([^;]*);base64,/);i&&(this.type=i[1],e=t.atob(e.substring(e.indexOf("base64,")+7))),this.size=e.length,a[this.uid]=e},isDetached:function(){return!this.ruid&&"string"===e.typeOf(a[this.uid])},destroy:function(){this.detach(),delete a[this.uid]}}),r.data?this.detach(r.data):a[this.uid]=r}var a={};return n}),n(y,[r,l,m],function(e,t,i){function n(n,a){var s,r;if(a||(a={}),r=a.type&&""!==a.type?a.type:t.getFileMime(a.name),a.name)s=a.name.replace(/\\/g,"/"),s=s.substr(s.lastIndexOf("/")+1);else{var o=r.split("/")[0];s=e.guid((""!==o?o:"file")+"_"),t.extensions[r]&&(s+="."+t.extensions[r][0])}i.apply(this,arguments),e.extend(this,{type:r||"",name:s||e.guid("file_"),lastModifiedDate:a.lastModifiedDate||(new Date).toLocaleString()})}return n.prototype=i.prototype,n}),n(v,[r,l,p,d,h,o,y,f,g],function(e,t,i,n,a,s,r,o,l){function c(a){var c,d,h,u=this;if(-1!==e.inArray(e.typeOf(a),["string","node"])&&(a={browse_button:a}),!(d=i.get(a.browse_button)))throw new n.DOMException(n.DOMException.NOT_FOUND_ERR);h={accept:[{title:s.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:d.parentNode||document.body},a=e.extend({},h,a),"string"==typeof a.required_caps&&(a.required_caps=o.parseCaps(a.required_caps)),"string"==typeof a.accept&&(a.accept=t.mimes2extList(a.accept)),c=i.get(a.container),c||(c=document.body),"static"===i.getStyle(c,"position")&&(c.style.position="relative"),c=d=null,l.call(u),e.extend(u,{uid:e.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){u.convertEventPropsToHandlers(p),u.bind("RuntimeInit",function(t,n){u.ruid=n.uid,u.shimid=n.shimid,u.bind("Ready",function(){u.trigger("Refresh")},999),u.bind("Change",function(){var t=n.exec.call(u,"FileInput","getFiles");u.files=[],e.each(t,function(e){return 0===e.size||void u.files.push(new r(u.ruid,e))})},999),u.bind("Refresh",function(){var t,s,r,o;r=i.get(a.browse_button),o=i.get(n.shimid),r&&(t=i.getPos(r,i.get(a.container)),s=i.getSize(r),o&&e.extend(o.style,{top:t.y+"px",left:t.x+"px",width:s.w+"px",height:s.h+"px"})),o=r=null}),n.exec.call(u,"FileInput","init",a)}),u.connectRuntime(e.extend({},a,{required_caps:{select_file:!0}}))},disable:function(t){var i=this.getRuntime();i&&i.exec.call(this,"FileInput","disable","undefined"===e.typeOf(t)||t)},refresh:function(){u.trigger("Refresh")},destroy:function(){var t=this.getRuntime();t&&(t.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===e.typeOf(this.files)&&e.each(this.files,function(e){e.destroy()}),this.files=null}})}var p=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return c.prototype=a.instance,c}),n(w,[o,p,d,r,y,g,h,l],function(e,t,i,n,a,s,r,o){function l(i){var r,l=this;"string"==typeof i&&(i={drop_zone:i}),r={accept:[{title:e.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},i="object"==typeof i?n.extend({},r,i):r,i.container=t.get(i.drop_zone)||document.body,"static"===t.getStyle(i.container,"position")&&(i.container.style.position="relative"),"string"==typeof i.accept&&(i.accept=o.mimes2extList(i.accept)),s.call(l),n.extend(l,{uid:n.guid("uid_"),ruid:null,files:null,init:function(){l.convertEventPropsToHandlers(c),l.bind("RuntimeInit",function(e,t){l.ruid=t.uid,l.bind("Drop",function(){var e=t.exec.call(l,"FileDrop","getFiles");l.files=[],n.each(e,function(e){l.files.push(new a(l.ruid,e))})},999),t.exec.call(l,"FileDrop","init",i),l.dispatchEvent("ready")}),l.connectRuntime(i)},destroy:function(){var e=this.getRuntime();e&&(e.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null}})}var c=["ready","dragenter","dragleave","drop","error"];return l.prototype=r.instance,l}),n(b,[r,g,h],function(e,t,i){function n(){this.uid=e.guid("uid_"),t.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return n.prototype=i.instance,n}),n(x,[r,u,d,h,m,y,b],function(e,t,i,n,a,s,r){function o(){function n(e,n){function p(e){c.readyState=o.DONE,c.error=e,c.trigger("error"),d()}function d(){s.destroy(),s=null,c.trigger("loadend")}if(s=new r,this.convertEventPropsToHandlers(l),this.readyState===o.LOADING)return p(new i.DOMException(i.DOMException.INVALID_STATE_ERR));if(this.readyState=o.LOADING,this.trigger("loadstart"),n instanceof a)if(n.isDetached()){var h=n.getSource();switch(e){case"readAsText":case"readAsBinaryString":this.result=h;break;case"readAsDataURL":this.result="data:"+n.type+";base64,"+t.btoa(h)}this.readyState=o.DONE,this.trigger("load"),d()}else!function(t){s.bind("Error",function(e,t){p(t)}),s.bind("Progress",function(e){c.result=t.exec.call(s,"FileReader","getResult"),c.trigger(e)}),s.bind("Load",function(e){c.readyState=o.DONE,c.result=t.exec.call(s,"FileReader","getResult"),c.trigger(e),d()}),t.exec.call(s,"FileReader","read",e,n)}(s.connectRuntime(n.ruid));else p(new i.DOMException(i.DOMException.NOT_FOUND_ERR))}var s,c=this;e.extend(this,{uid:e.guid("uid_"),readyState:o.EMPTY,result:null,error:null,readAsBinaryString:function(e){n.call(this,"readAsBinaryString",e)},readAsDataURL:function(e){n.call(this,"readAsDataURL",e)},readAsText:function(e){n.call(this,"readAsText",e)},abort:function(){this.result=null,-1===e.inArray(this.readyState,[o.EMPTY,o.DONE])&&(this.readyState===o.LOADING&&(this.readyState=o.DONE),s&&s.getRuntime().exec.call(this,"FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),s&&(s.getRuntime().exec.call(this,"FileReader","destroy"),s.disconnectRuntime()),c=s=null}})}var l=["loadstart","progress","load","abort","error","loadend"];return o.EMPTY=0,o.LOADING=1,o.DONE=2,o.prototype=n.instance,o}),n(C,[],function(){var e=function(t,i){for(var n=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],a=n.length,s={http:80,https:443},r={},o=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,l=o.exec(t||"");a--;)l[a]&&(r[n[a]]=l[a]);if(!r.scheme){i&&"string"!=typeof i||(i=e(i||document.location.href)),r.scheme=i.scheme,r.host=i.host,r.port=i.port;var c="";/^[^\/]/.test(r.path)&&(c=i.path,/(\/|\/[^\.]+)$/.test(c)?c+="/":c=c.replace(/\/[^\/]+$/,"/")),r.path=c+(r.path||"")}return r.port||(r.port=s[r.scheme]||80),r.port=parseInt(r.port,10),r.path||(r.path="/"),delete r.source,r},t=function(t){var i={http:80,https:443},n=e(t);return n.scheme+"://"+n.host+(n.port!==i[n.scheme]?":"+n.port:"")+n.path+(n.query?n.query:"")},i=function(t){function i(e){return[e.scheme,e.host,e.port].join("/")}return"string"==typeof t&&(t=e(t)),i(e())===i(t)};return{parseUrl:e,resolveUrl:t,hasSameOrigin:i}}),n(_,[r,g,u],function(e,t,i){return function(){function n(e,t){if(!t.isDetached()){
var n=this.connectRuntime(t.ruid).exec.call(this,"FileReaderSync","read",e,t);return this.disconnectRuntime(),n}var a=t.getSource();switch(e){case"readAsBinaryString":return a;case"readAsDataURL":return"data:"+t.type+";base64,"+i.btoa(a);case"readAsText":for(var s="",r=0,o=a.length;o>r;r++)s+=String.fromCharCode(a[r]);return s}}t.call(this),e.extend(this,{uid:e.guid("uid_"),readAsBinaryString:function(e){return n.call(this,"readAsBinaryString",e)},readAsDataURL:function(e){return n.call(this,"readAsDataURL",e)},readAsText:function(e){return n.call(this,"readAsText",e)}})}}),n(S,[d,r,m],function(e,t,i){function n(){var e,n=[];t.extend(this,{append:function(a,s){var r=this,o=t.typeOf(s);s instanceof i?e={name:a,value:s}:"array"===o?(a+="[]",t.each(s,function(e){r.append(a,e)})):"object"===o?t.each(s,function(e,t){r.append(a+"["+t+"]",e)}):"null"===o||"undefined"===o||"number"===o&&isNaN(s)?r.append(a,"false"):n.push({name:a,value:s.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return e&&e.value||null},getBlobName:function(){return e&&e.name||null},each:function(i){t.each(n,function(e){i(e.value,e.name)}),e&&i(e.value,e.name)},destroy:function(){e=null,n=[]}})}return n}),n(I,[r,d,h,u,C,f,b,m,_,S,c,l],function(e,t,i,n,a,s,r,o,l,c,p,d){function h(){this.uid=e.guid("uid_")}function u(){function i(e,t){return D.hasOwnProperty(e)?1===arguments.length?p.can("define_property")?D[e]:I[e]:void(p.can("define_property")?D[e]=t:I[e]=t):void 0}function l(t){function n(){_&&(_.destroy(),_=null),o.dispatchEvent("loadend"),o=null}function a(a){_.bind("LoadStart",function(e){i("readyState",u.LOADING),o.dispatchEvent("readystatechange"),o.dispatchEvent(e),P&&o.upload.dispatchEvent(e)}),_.bind("Progress",function(e){i("readyState")!==u.LOADING&&(i("readyState",u.LOADING),o.dispatchEvent("readystatechange")),o.dispatchEvent(e)}),_.bind("UploadProgress",function(e){P&&o.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:e.total,loaded:e.loaded})}),_.bind("Load",function(t){i("readyState",u.DONE),i("status",Number(a.exec.call(_,"XMLHttpRequest","getStatus")||0)),i("statusText",f[i("status")]||""),i("response",a.exec.call(_,"XMLHttpRequest","getResponse",i("responseType"))),~e.inArray(i("responseType"),["text",""])?i("responseText",i("response")):"document"===i("responseType")&&i("responseXML",i("response")),B=a.exec.call(_,"XMLHttpRequest","getAllResponseHeaders"),o.dispatchEvent("readystatechange"),i("status")>0?(P&&o.upload.dispatchEvent(t),o.dispatchEvent(t)):(A=!0,o.dispatchEvent("error")),n()}),_.bind("Abort",function(e){o.dispatchEvent(e),n()}),_.bind("Error",function(e){A=!0,i("readyState",u.DONE),o.dispatchEvent("readystatechange"),W=!0,o.dispatchEvent(e),n()}),a.exec.call(_,"XMLHttpRequest","send",{url:y,method:v,async:$,user:w,password:b,headers:T,mimeType:E,encoding:k,responseType:o.responseType,withCredentials:o.withCredentials,options:F},t)}var o=this;x=(new Date).getTime(),_=new r,"string"==typeof F.required_caps&&(F.required_caps=s.parseCaps(F.required_caps)),F.required_caps=e.extend({},F.required_caps,{return_response_type:o.responseType}),t instanceof c&&(F.required_caps.send_multipart=!0),N||(F.required_caps.do_cors=!0),F.ruid?a(_.connectRuntime(F)):(_.bind("RuntimeInit",function(e,t){a(t)}),_.bind("RuntimeError",function(e,t){o.dispatchEvent("RuntimeError",t)}),_.connectRuntime(F))}function m(){i("responseText",""),i("responseXML",null),i("response",null),i("status",0),i("statusText",""),x=C=null}var y,v,w,b,x,C,_,S,I=this,D={timeout:0,readyState:u.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},$=!0,T={},k=null,E=null,R=!1,L=!1,P=!1,W=!1,A=!1,N=!1,M=null,O=null,F={},B="";e.extend(this,D,{uid:e.guid("uid_"),upload:new h,open:function(s,r,o,l,c){var p;if(!s||!r)throw new t.DOMException(t.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(s)||n.utf8_encode(s)!==s)throw new t.DOMException(t.DOMException.SYNTAX_ERR);if(~e.inArray(s.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(v=s.toUpperCase()),~e.inArray(v,["CONNECT","TRACE","TRACK"]))throw new t.DOMException(t.DOMException.SECURITY_ERR);if(r=n.utf8_encode(r),p=a.parseUrl(r),N=a.hasSameOrigin(p),y=a.resolveUrl(r),(l||c)&&!N)throw new t.DOMException(t.DOMException.INVALID_ACCESS_ERR);if(w=l||p.user,b=c||p.pass,!1===($=o||!0)&&(i("timeout")||i("withCredentials")||""!==i("responseType")))throw new t.DOMException(t.DOMException.INVALID_ACCESS_ERR);R=!$,L=!1,T={},m.call(this),i("readyState",u.OPENED),this.convertEventPropsToHandlers(["readystatechange"]),this.dispatchEvent("readystatechange")},setRequestHeader:function(a,s){var r=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(i("readyState")!==u.OPENED||L)throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(a)||n.utf8_encode(a)!==a)throw new t.DOMException(t.DOMException.SYNTAX_ERR);return a=e.trim(a).toLowerCase(),!~e.inArray(a,r)&&!/^(proxy\-|sec\-)/.test(a)&&(T[a]?T[a]+=", "+s:T[a]=s,!0)},getAllResponseHeaders:function(){return B||""},getResponseHeader:function(t){return t=t.toLowerCase(),A||~e.inArray(t,["set-cookie","set-cookie2"])?null:B&&""!==B&&(S||(S={},e.each(B.split(/\r\n/),function(t){var i=t.split(/:\s+/);2===i.length&&(i[0]=e.trim(i[0]),S[i[0].toLowerCase()]={header:i[0],value:e.trim(i[1])})})),S.hasOwnProperty(t))?S[t].header+": "+S[t].value:null},overrideMimeType:function(n){var a,s;if(~e.inArray(i("readyState"),[u.LOADING,u.DONE]))throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);if(n=e.trim(n.toLowerCase()),/;/.test(n)&&(a=n.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(n=a[1],a[2]&&(s=a[2])),!d.mimes[n])throw new t.DOMException(t.DOMException.SYNTAX_ERR);M=n,O=s},send:function(i,a){if(F="string"===e.typeOf(a)?{ruid:a}:a||{},this.convertEventPropsToHandlers(g),this.upload.convertEventPropsToHandlers(g),this.readyState!==u.OPENED||L)throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);if(i instanceof o)F.ruid=i.ruid,E=i.type||"application/octet-stream";else if(i instanceof c){if(i.hasBlob()){var s=i.getBlob();F.ruid=s.ruid,E=s.type||"application/octet-stream"}}else"string"==typeof i&&(k="UTF-8",E="text/plain;charset=UTF-8",i=n.utf8_encode(i));this.withCredentials||(this.withCredentials=F.required_caps&&F.required_caps.send_browser_cookies&&!N),P=!R&&this.upload.hasEventListener(),A=!1,W=!i,R||(L=!0),l.call(this,i)},abort:function(){if(A=!0,R=!1,~e.inArray(i("readyState"),[u.UNSENT,u.OPENED,u.DONE]))i("readyState",u.UNSENT);else{if(i("readyState",u.DONE),L=!1,!_)throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);_.getRuntime().exec.call(_,"XMLHttpRequest","abort",W),W=!0}},destroy:function(){_&&("function"===e.typeOf(_.destroy)&&_.destroy(),_=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}})}var f={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};h.prototype=i.instance;var g=["loadstart","progress","abort","error","load","timeout","loadend"];return u.UNSENT=0,u.OPENED=1,u.HEADERS_RECEIVED=2,u.LOADING=3,u.DONE=4,u.prototype=i.instance,u}),n(D,[r,u,g,h],function(e,t,i,n){function a(){function n(){p=d=0,c=this.result=null}function s(t,i){var n=this;l=i,n.bind("TransportingProgress",function(t){d=t.loaded,p>d&&-1===e.inArray(n.state,[a.IDLE,a.DONE])&&r.call(n)},999),n.bind("TransportingComplete",function(){d=p,n.state=a.DONE,c=null,n.result=l.exec.call(n,"Transporter","getAsBlob",t||"")},999),n.state=a.BUSY,n.trigger("TransportingStarted"),r.call(n)}function r(){var e,i=this,n=p-d;h>n&&(h=n),e=t.btoa(c.substr(d,h)),l.exec.call(i,"Transporter","receive",e,p)}var o,l,c,p,d,h;i.call(this),e.extend(this,{uid:e.guid("uid_"),state:a.IDLE,result:null,transport:function(t,i,a){var r=this;if(a=e.extend({chunk_size:204798},a),(o=a.chunk_size%3)&&(a.chunk_size+=3-o),h=a.chunk_size,n.call(this),c=t,p=t.length,"string"===e.typeOf(a)||a.ruid)s.call(r,i,this.connectRuntime(a));else{var l=function(e,t){r.unbind("RuntimeInit",l),s.call(r,i,t)};this.bind("RuntimeInit",l),this.connectRuntime(a)}},abort:function(){var e=this;e.state=a.IDLE,l&&(l.exec.call(e,"Transporter","clear"),e.trigger("TransportingAborted")),n.call(e)},destroy:function(){this.unbindAll(),l=null,this.disconnectRuntime(),n.call(this)}})}return a.IDLE=0,a.BUSY=1,a.DONE=2,a.prototype=n.instance,a}),n($,[r,p,d,_,I,f,g,D,c,h,m,y,u],function(e,t,i,n,a,s,r,o,l,c,p,d,h){function u(){function n(e){e||(e=this.getRuntime().exec.call(this,"Image","getInfo")),this.size=e.size,this.width=e.width,this.height=e.height,this.type=e.type,this.meta=e.meta,""===this.name&&(this.name=e.name)}function c(t){var n=e.typeOf(t);try{if(t instanceof u){if(!t.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);g.apply(this,arguments)}else if(t instanceof p){if(!~e.inArray(t.type,["image/jpeg","image/png"]))throw new i.ImageError(i.ImageError.WRONG_FORMAT);m.apply(this,arguments)}else if(-1!==e.inArray(n,["blob","file"]))c.call(this,new d(null,t),arguments[1]);else if("string"===n)/^data:[^;]*;base64,/.test(t)?c.call(this,new p(null,{data:t}),arguments[1]):y.apply(this,arguments);else{if("node"!==n||"img"!==t.nodeName.toLowerCase())throw new i.DOMException(i.DOMException.TYPE_MISMATCH_ERR);c.call(this,t.src,arguments[1])}}catch(e){this.trigger("error",e.code)}}function g(t,i){var n=this.connectRuntime(t.ruid);this.ruid=n.uid,n.exec.call(this,"Image","loadFromImage",t,"undefined"===e.typeOf(i)||i)}function m(t,i){function n(e){a.ruid=e.uid,e.exec.call(a,"Image","loadFromBlob",t)}var a=this;a.name=t.name||"",t.isDetached()?(this.bind("RuntimeInit",function(e,t){n(t)}),i&&"string"==typeof i.required_caps&&(i.required_caps=s.parseCaps(i.required_caps)),this.connectRuntime(e.extend({required_caps:{access_image_binary:!0,resize_image:!0}},i))):n(this.connectRuntime(t.ruid))}function y(e,t){var i,n=this;i=new a,i.open("get",e),i.responseType="blob",i.onprogress=function(e){n.trigger(e)},i.onload=function(){m.call(n,i.response,!0)},i.onerror=function(e){n.trigger(e)},i.onloadend=function(){i.destroy()},i.bind("RuntimeError",function(e,t){n.trigger("RuntimeError",t)}),i.send(null,t)}r.call(this),e.extend(this,{uid:e.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){this.bind("Load Resize",function(){n.call(this)},999),this.convertEventPropsToHandlers(f),c.apply(this,arguments)},downsize:function(t){var n={width:this.width,height:this.height,crop:!1,preserveHeaders:!0};t="object"==typeof t?e.extend(n,t):e.extend(n,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]});try{if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);if(this.width>u.MAX_RESIZE_WIDTH||this.height>u.MAX_RESIZE_HEIGHT)throw new i.ImageError(i.ImageError.MAX_RESOLUTION_ERR);this.getRuntime().exec.call(this,"Image","downsize",t.width,t.height,t.crop,t.preserveHeaders)}catch(e){this.trigger("error",e.code)}},crop:function(e,t,i){this.downsize(e,t,!0,i)},getAsCanvas:function(){if(!l.can("create_canvas"))throw new i.RuntimeError(i.RuntimeError.NOT_SUPPORTED_ERR);return this.connectRuntime(this.ruid).exec.call(this,"Image","getAsCanvas")},getAsBlob:function(e,t){if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);return e||(e="image/jpeg"),"image/jpeg"!==e||t||(t=90),this.getRuntime().exec.call(this,"Image","getAsBlob",e,t)},getAsDataURL:function(e,t){if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);return this.getRuntime().exec.call(this,"Image","getAsDataURL",e,t)},getAsBinaryString:function(e,t){var i=this.getAsDataURL(e,t);return h.atob(i.substring(i.indexOf("base64,")+7))},embed:function(n){function a(){if(l.can("create_canvas")){var t=s.getAsCanvas();if(t)return n.appendChild(t),t=null,s.destroy(),void f.trigger("embedded")}var a=s.getAsDataURL(r,c);if(!a)throw new i.ImageError(i.ImageError.WRONG_FORMAT);if(l.can("use_data_uri_of",a.length))n.innerHTML='<img src="'+a+'" width="'+s.width+'" height="'+s.height+'" />',s.destroy(),f.trigger("embedded");else{var p=new o;p.bind("TransportingComplete",function(){d=f.connectRuntime(this.result.ruid),f.bind("Embedded",function(){e.extend(d.getShimContainer().style,{top:"0px",left:"0px",width:s.width+"px",height:s.height+"px"}),d=null},999),d.exec.call(f,"ImageView","display",this.result.uid,m,y),s.destroy()}),p.transport(h.atob(a.substring(a.indexOf("base64,")+7)),r,e.extend({},g,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:n}))}}var s,r,c,p,d,f=this,g=arguments[1]||{},m=this.width,y=this.height;try{if(!(n=t.get(n)))throw new i.DOMException(i.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new i.DOMException(i.DOMException.INVALID_STATE_ERR);if(this.width>u.MAX_RESIZE_WIDTH||this.height>u.MAX_RESIZE_HEIGHT)throw new i.ImageError(i.ImageError.MAX_RESOLUTION_ERR);if(r=g.type||this.type||"image/jpeg",c=g.quality||90,p="undefined"!==e.typeOf(g.crop)&&g.crop,g.width)m=g.width,y=g.height||m;else{var v=t.getSize(n);v.w&&v.h&&(m=v.w,y=v.h)}return s=new u,s.bind("Resize",function(){a.call(f)}),s.bind("Load",function(){s.downsize(m,y,p,!1)}),s.clone(this,!1),s}catch(e){this.trigger("error",e.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}})}var f=["progress","load","error","resize","embedded"];return u.MAX_RESIZE_WIDTH=6500,u.MAX_RESIZE_HEIGHT=6500,u.prototype=c.instance,u}),n(T,[r,d,f,c],function(e,t,i,n){function a(t){var a=this,o=i.capTest,l=i.capTrue,c=e.extend({access_binary:o(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return a.can("access_binary")&&!!r.Image},display_media:o(n.can("create_canvas")||n.can("use_data_uri_over32kb")),do_cors:o(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:o(function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&("IE"!==n.browser||n.version>9)}()),filter_by_extension:o(function(){return"Chrome"===n.browser&&n.version>=28||"IE"===n.browser&&n.version>=10}()),return_response_headers:l,return_response_type:function(e){return!("json"!==e||!window.JSON)||n.can("return_response_type",e)},return_status_code:l,report_upload_progress:o(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return a.can("access_binary")&&n.can("create_canvas")},select_file:function(){return n.can("use_fileinput")&&window.File},select_folder:function(){return a.can("select_file")&&"Chrome"===n.browser&&n.version>=21},select_multiple:function(){return!(!a.can("select_file")||"Safari"===n.browser&&"Windows"===n.os||"iOS"===n.os&&n.verComp(n.osVersion,"7.0.4","<"))},send_binary_string:o(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:o(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||a.can("send_binary_string")},slice_blob:o(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return a.can("slice_blob")&&a.can("send_multipart")},summon_file_dialog:o(function(){return"Firefox"===n.browser&&n.version>=4||"Opera"===n.browser&&n.version>=12||"IE"===n.browser&&n.version>=10||!!~e.inArray(n.browser,["Chrome","Safari"])}()),upload_filesize:l},arguments[2]);i.call(this,t,arguments[1]||s,c),e.extend(this,{init:function(){this.trigger("Init")},destroy:function(e){return function(){e.call(a),e=a=null}}(this.destroy)}),e.extend(this.getShim(),r)}var s="html5",r={};return i.addConstructor(s,a),r}),n("moxie/runtime/html5/file/Blob",[T,m],function(e,t){function i(){function e(e,t,i){var n;if(!window.File.prototype.slice)return(n=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?n.call(e,t,i):null;try{return e.slice(),e.slice(t,i)}catch(n){return e.slice(t,i-t)}}this.slice=function(){return new t(this.getRuntime().uid,e.apply(this,arguments))}}return e.Blob=i}),n(k,[r],function(e){function t(){this.returnValue=!1}function i(){this.cancelBubble=!0}var n={},a="moxie_"+e.guid(),s=function(s,r,o,l){var c,p;r=r.toLowerCase(),s.addEventListener?(c=o,s.addEventListener(r,c,!1)):s.attachEvent&&(c=function(){var e=window.event;e.target||(e.target=e.srcElement),e.preventDefault=t,e.stopPropagation=i,o(e)},s.attachEvent("on"+r,c)),s[a]||(s[a]=e.guid()),n.hasOwnProperty(s[a])||(n[s[a]]={}),p=n[s[a]],p.hasOwnProperty(r)||(p[r]=[]),p[r].push({func:c,orig:o,key:l})},r=function(t,i,s){var r,o;if(i=i.toLowerCase(),t[a]&&n[t[a]]&&n[t[a]][i]){r=n[t[a]][i];for(var l=r.length-1;l>=0&&(r[l].orig!==s&&r[l].key!==s||(t.removeEventListener?t.removeEventListener(i,r[l].func,!1):t.detachEvent&&t.detachEvent("on"+i,r[l].func),r[l].orig=null,r[l].func=null,r.splice(l,1),s===o));l--);if(r.length||delete n[t[a]][i],e.isEmptyObj(n[t[a]])){delete n[t[a]];try{delete t[a]}catch(e){t[a]=o}}}};return{addEvent:s,removeEvent:r,removeAllEvents:function(t,i){t&&t[a]&&e.each(n[t[a]],function(e,n){r(t,n,i)})}}}),n("moxie/runtime/html5/file/FileInput",[T,r,p,k,l,c],function(e,t,i,n,a,s){function r(){var e,r=[];t.extend(this,{init:function(o){var l,c,p,d,h,u,f=this,g=f.getRuntime();e=o,r=[],p=e.accept.mimes||a.extList2mimes(e.accept,g.can("filter_by_extension")),c=g.getShimContainer(),c.innerHTML='<input id="'+g.uid+'" type="file" style="font-size:999px;opacity:0;"'+(e.multiple&&g.can("select_multiple")?"multiple":"")+(e.directory&&g.can("select_folder")?"webkitdirectory directory":"")+(p?' accept="'+p.join(",")+'"':"")+" />",l=i.get(g.uid),t.extend(l.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),d=i.get(e.browse_button),g.can("summon_file_dialog")&&("static"===i.getStyle(d,"position")&&(d.style.position="relative"),h=parseInt(i.getStyle(d,"z-index"),10)||1,d.style.zIndex=h,c.style.zIndex=h-1,n.addEvent(d,"click",function(e){var t=i.get(g.uid);t&&t.disabled,e.preventDefault()},f.uid)),u=g.can("summon_file_dialog")?d:c,n.addEvent(u,"mouseover",function(){f.trigger("mouseenter")},f.uid),n.addEvent(u,"mouseout",function(){f.trigger("mouseleave")},f.uid),n.addEvent(u,"mousedown",function(){f.trigger("mousedown")},f.uid),n.addEvent(i.get(e.container),"mouseup",function(){f.trigger("mouseup")},f.uid),l.onchange=function i(){if(r=[],e.directory?t.each(this.files,function(e){"."!==e.name&&r.push(e)}):r=[].slice.call(this.files),"IE"!==s.browser&&"IEMobile"!==s.browser)this.value="";else{var n=this.cloneNode(!0);this.parentNode.replaceChild(n,this),n.onchange=i}f.trigger("change")},f.trigger({type:"ready",async:!0}),c=null},getFiles:function(){return r},disable:function(e){var t,n=this.getRuntime();(t=i.get(n.uid))&&(t.disabled=!!e)},destroy:function(){var t=this.getRuntime(),a=t.getShim(),s=t.getShimContainer();n.removeAllEvents(s,this.uid),n.removeAllEvents(e&&i.get(e.container),this.uid),n.removeAllEvents(e&&i.get(e.browse_button),this.uid),s&&(s.innerHTML=""),a.removeInstance(this.uid),r=e=s=a=null}})}return e.FileInput=r}),n("moxie/runtime/html5/file/FileDrop",[T,r,p,k,l],function(e,t,i,n,a){function s(){function e(e){if(!e.dataTransfer||!e.dataTransfer.types)return!1;var i=t.toArray(e.dataTransfer.types||[]);return-1!==t.inArray("Files",i)||-1!==t.inArray("public.file-url",i)||-1!==t.inArray("application/x-moz-file",i)}function s(e){for(var i=[],n=0;n<e.length;n++)[].push.apply(i,e[n].extensions.split(/\s*,\s*/));return-1===t.inArray("*",i)?i:[]}function r(e){if(!u.length)return!0;var i=a.getFileExtension(e.name);return!i||-1!==t.inArray(i,u)}function o(e,i){var n=[];t.each(e,function(e){var t=e.webkitGetAsEntry();if(t)if(t.isFile){var i=e.getAsFile();r(i)&&h.push(i)}else n.push(t)}),n.length?l(n,i):i()}function l(e,i){var n=[];t.each(e,function(e){n.push(function(t){c(e,t)})}),t.inSeries(n,function(){i()})}function c(e,t){e.isFile?e.file(function(e){r(e)&&h.push(e),t()},function(){t()}):e.isDirectory?p(e,t):t()}function p(e,t){function i(e){a.readEntries(function(t){t.length?([].push.apply(n,t),i(e)):e()},e)}var n=[],a=e.createReader();i(function(){l(n,t)})}var d,h=[],u=[];t.extend(this,{init:function(i){var a,l=this;d=i,u=s(d.accept),a=d.container,n.addEvent(a,"dragover",function(t){e(t)&&(t.preventDefault(),t.dataTransfer.dropEffect="copy")},l.uid),n.addEvent(a,"drop",function(i){e(i)&&(i.preventDefault(),h=[],i.dataTransfer.items&&i.dataTransfer.items[0].webkitGetAsEntry?o(i.dataTransfer.items,function(){l.trigger("drop")}):(t.each(i.dataTransfer.files,function(e){r(e)&&h.push(e)}),l.trigger("drop")))},l.uid),n.addEvent(a,"dragenter",function(e){l.trigger("dragenter")},l.uid),n.addEvent(a,"dragleave",function(e){l.trigger("dragleave")},l.uid)},getFiles:function(){return h},destroy:function(){n.removeAllEvents(d&&i.get(d.container),this.uid),h=u=d=null}})}return e.FileDrop=s}),n(E,[T,u,r],function(e,t,i){function n(){function e(e){return t.atob(e.substring(e.indexOf("base64,")+7))}var n,a=!1;i.extend(this,{read:function(e,t){var s=this;n=new window.FileReader,n.addEventListener("progress",function(e){s.trigger(e)}),n.addEventListener("load",function(e){s.trigger(e)}),n.addEventListener("error",function(e){s.trigger(e,n.error)}),n.addEventListener("loadend",function(){n=null}),"function"===i.typeOf(n[e])?(a=!1,n[e](t.getSource())):"readAsBinaryString"===e&&(a=!0,n.readAsDataURL(t.getSource()))},getResult:function(){return n&&n.result?a?e(n.result):n.result:null},abort:function(){n&&n.abort()},destroy:function(){n=null}})}return e.FileReader=n}),n("moxie/runtime/html5/xhr/XMLHttpRequest",[T,r,l,C,y,m,S,d,c],function(e,t,i,n,a,s,r,o,l){function c(){function e(e,t){var i,n,a=this;i=t.getBlob().getSource(),n=new window.FileReader,n.onload=function(){t.append(t.getBlobName(),new s(null,{type:i.type,data:n.result})),f.send.call(a,e,t)},n.readAsBinaryString(i)}function c(){return!window.XMLHttpRequest||"IE"===l.browser&&l.version<8?function(){for(var e=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{return new ActiveXObject(e[t])}catch(e){}}():new window.XMLHttpRequest}function p(e){var t=e.responseXML,i=e.responseText;return"IE"===l.browser&&i&&t&&!t.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(e.getResponseHeader("Content-Type"))&&(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.validateOnParse=!1,t.loadXML(i)),t&&("IE"===l.browser&&0!==t.parseError||!t.documentElement||"parsererror"===t.documentElement.tagName)?null:t}function d(e){var t="----moxieboundary"+(new Date).getTime(),i="--",n="\r\n",a="";if(!this.getRuntime().can("send_binary_string"))throw new o.RuntimeError(o.RuntimeError.NOT_SUPPORTED_ERR);return h.setRequestHeader("Content-Type","multipart/form-data; boundary="+t),e.each(function(e,r){a+=e instanceof s?i+t+n+'Content-Disposition: form-data; name="'+r+'"; filename="'+unescape(encodeURIComponent(e.name||"blob"))+'"'+n+"Content-Type: "+(e.type||"application/octet-stream")+n+n+e.getSource()+n:i+t+n+'Content-Disposition: form-data; name="'+r+'"'+n+n+unescape(encodeURIComponent(e))+n}),a+=i+t+i+n}var h,u,f=this;t.extend(this,{send:function(i,a){var o=this,p="Mozilla"===l.browser&&l.version>=4&&l.version<7,f="Android Browser"===l.browser,g=!1;if(u=i.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),h=c(),h.open(i.method,i.url,i.async,i.user,i.password),a instanceof s)a.isDetached()&&(g=!0),a=a.getSource();else if(a instanceof r){if(a.hasBlob())if(a.getBlob().isDetached())a=d.call(o,a),g=!0;else if((p||f)&&"blob"===t.typeOf(a.getBlob().getSource())&&window.FileReader)return void e.call(o,i,a);if(a instanceof r){var m=new window.FormData;a.each(function(e,t){e instanceof s?m.append(t,e.getSource()):m.append(t,e)}),a=m}}h.upload?(i.withCredentials&&(h.withCredentials=!0),h.addEventListener("load",function(e){o.trigger(e)}),h.addEventListener("error",function(e){o.trigger(e)}),h.addEventListener("progress",function(e){o.trigger(e)}),h.upload.addEventListener("progress",function(e){o.trigger({type:"UploadProgress",loaded:e.loaded,total:e.total})})):h.onreadystatechange=function(){switch(h.readyState){case 1:case 2:break;case 3:var e,t;try{n.hasSameOrigin(i.url)&&(e=h.getResponseHeader("Content-Length")||0),h.responseText&&(t=h.responseText.length)}catch(i){e=t=0}o.trigger({type:"progress",lengthComputable:!!e,total:parseInt(e,10),loaded:t});break;case 4:h.onreadystatechange=function(){},o.trigger(0===h.status?"error":"load")}},t.isEmptyObj(i.headers)||t.each(i.headers,function(e,t){h.setRequestHeader(t,e)}),""!==i.responseType&&"responseType"in h&&(h.responseType="json"!==i.responseType||l.can("return_response_type","json")?i.responseType:"text"),g?h.sendAsBinary?h.sendAsBinary(a):function(){for(var e=new Uint8Array(a.length),t=0;t<a.length;t++)e[t]=255&a.charCodeAt(t);h.send(e.buffer)}():h.send(a),o.trigger("loadstart")},getStatus:function(){try{if(h)return h.status}catch(e){}return 0},getResponse:function(e){var t=this.getRuntime();try{switch(e){case"blob":var n=new a(t.uid,h.response),s=h.getResponseHeader("Content-Disposition");if(s){var r=s.match(/filename=([\'\"'])([^\1]+)\1/);r&&(u=r[2])}return n.name=u,n.type||(n.type=i.getFileMime(u)),n;case"json":return l.can("return_response_type","json")?h.response:200===h.status&&window.JSON?JSON.parse(h.responseText):null;case"document":return p(h);default:return""!==h.responseText?h.responseText:null}}catch(e){return null}},getAllResponseHeaders:function(){try{return h.getAllResponseHeaders()}catch(e){}return""},abort:function(){h&&h.abort()},destroy:function(){f=u=null}})}return e.XMLHttpRequest=c}),n(R,[],function(){return function(){function e(e,t){var i,n=s?0:-8*(t-1),r=0;for(i=0;t>i;i++)r|=a.charCodeAt(e+i)<<Math.abs(n+8*i);return r}function i(e,t,i){i=3===arguments.length?i:a.length-t-1,a=a.substr(0,t)+e+a.substr(i+t)}function n(e,t,n){var a,r="",o=s?0:-8*(n-1);for(a=0;n>a;a++)r+=String.fromCharCode(t>>Math.abs(o+8*a)&255);i(r,e,n)}var a,s=!1;return{II:function(e){return e===t?s:void(s=e)},init:function(e){s=!1,a=e},SEGMENT:function(e,t,n){switch(arguments.length){case 1:return a.substr(e,a.length-e-1);case 2:return a.substr(e,t);case 3:i(n,e,t);break;default:return a}},BYTE:function(t){return e(t,1)},SHORT:function(t){return e(t,2)},LONG:function(i,a){return a===t?e(i,4):void n(i,a,4)},SLONG:function(t){var i=e(t,4);return i>2147483647?i-4294967296:i},STRING:function(t,i){var n="";for(i+=t;i>t;t++)n+=String.fromCharCode(e(t,1));return n}}}}),n(L,[R],function(e){return function t(i){var n,a,s,r=[],o=0;if(n=new e,n.init(i),65496===n.SHORT(0)){for(a=2;a<=i.length;)if((s=n.SHORT(a))>=65488&&65495>=s)a+=2;else{if(65498===s||65497===s)break;o=n.SHORT(a+2)+2,s>=65505&&65519>=s&&r.push({hex:s,name:"APP"+(15&s),start:a,length:o,segment:n.SEGMENT(a,o)}),a+=o}return n.init(null),{headers:r,restore:function(e){var t,i;for(n.init(e),a=65504==n.SHORT(2)?4+n.SHORT(4):2,i=0,t=r.length;t>i;i++)n.SEGMENT(a,0,r[i].segment),a+=r[i].length;return e=n.SEGMENT(),n.init(null),e},strip:function(e){var i,a,s;for(a=new t(e),i=a.headers,a.purge(),n.init(e),s=i.length;s--;)n.SEGMENT(i[s].start,i[s].length,"");return e=n.SEGMENT(),n.init(null),e},get:function(e){for(var t=[],i=0,n=r.length;n>i;i++)r[i].name===e.toUpperCase()&&t.push(r[i].segment);return t},set:function(e,t){var i,n,a,s=[];for("string"==typeof t?s.push(t):s=t,i=n=0,a=r.length;a>i&&(r[i].name===e.toUpperCase()&&(r[i].segment=s[n],r[i].length=s[n].length,n++),!(n>=s.length));i++);},purge:function(){r=[],n.init(null),n=null}}}}}),n(P,[r,R],function(e,i){return function(){function n(e,i){var n,a,s,o,l,d,h,u=r.SHORT(e),f=[],g={};for(n=0;u>n;n++)if(d=e+12*n+2,(s=i[r.SHORT(d)])!==t){switch(o=r.SHORT(d+=2),l=r.LONG(d+=2),d+=4,f=[],o){case 1:case 7:for(l>4&&(d=r.LONG(d)+p.tiffHeader),a=0;l>a;a++)f[a]=r.BYTE(d+a);break;case 2:l>4&&(d=r.LONG(d)+p.tiffHeader),g[s]=r.STRING(d,l-1);continue;case 3:for(l>2&&(d=r.LONG(d)+p.tiffHeader),a=0;l>a;a++)f[a]=r.SHORT(d+2*a);break;case 4:for(l>1&&(d=r.LONG(d)+p.tiffHeader),a=0;l>a;a++)f[a]=r.LONG(d+4*a);break;case 5:for(d=r.LONG(d)+p.tiffHeader,a=0;l>a;a++)f[a]=r.LONG(d+4*a)/r.LONG(d+4*a+4);break;case 9:for(d=r.LONG(d)+p.tiffHeader,a=0;l>a;a++)f[a]=r.SLONG(d+4*a);break;case 10:for(d=r.LONG(d)+p.tiffHeader,a=0;l>a;a++)f[a]=r.SLONG(d+4*a)/r.SLONG(d+4*a+4);break;default:continue}h=1==l?f[0]:f,g[s]=c.hasOwnProperty(s)&&"object"!=typeof h?c[s][h]:h}return g}function a(){var e=p.tiffHeader;return r.II(18761==r.SHORT(e)),42===r.SHORT(e+=2)&&(p.IFD0=p.tiffHeader+r.LONG(e+=2),l=n(p.IFD0,o.tiff),"ExifIFDPointer"in l&&(p.exifIFD=p.tiffHeader+l.ExifIFDPointer,delete l.ExifIFDPointer),"GPSInfoIFDPointer"in l&&(p.gpsIFD=p.tiffHeader+l.GPSInfoIFDPointer,delete l.GPSInfoIFDPointer),!0)}function s(e,t,i){var n,a,s,l=0;if("string"==typeof t){var c=o[e.toLowerCase()];for(var d in c)if(c[d]===t){t=d;break}}n=p[e.toLowerCase()+"IFD"],a=r.SHORT(n);for(var h=0;a>h;h++)if(s=n+12*h+2,r.SHORT(s)==t){l=s+8;break}return!!l&&(r.LONG(l,i),!0)}var r,o,l,c,p={};return r=new i,o={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},c={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",
31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(e){return p={tiffHeader:10},!(e===t||!e.length)&&(r.init(e),65505===r.SHORT(0)&&"EXIF\0"===r.STRING(4,5).toUpperCase()&&a())},TIFF:function(){return l},EXIF:function(){var t;if(t=n(p.exifIFD,o.exif),t.ExifVersion&&"array"===e.typeOf(t.ExifVersion)){for(var i=0,a="";i<t.ExifVersion.length;i++)a+=String.fromCharCode(t.ExifVersion[i]);t.ExifVersion=a}return t},GPS:function(){var t;return t=n(p.gpsIFD,o.gps),t.GPSVersionID&&"array"===e.typeOf(t.GPSVersionID)&&(t.GPSVersionID=t.GPSVersionID.join(".")),t},setExif:function(e,t){return("PixelXDimension"===e||"PixelYDimension"===e)&&s("exif",e,t)},getBinary:function(){return r.SEGMENT()},purge:function(){r.init(null),r=l=null,p={}}}}}),n(W,[r,d,L,R,P],function(e,t,i,n,a){function s(s){function r(){for(var e,t,i=0;i<=l.length;){if((e=c.SHORT(i+=2))>=65472&&65475>=e)return i+=5,{height:c.SHORT(i),width:c.SHORT(i+=2)};t=c.SHORT(i+=2),i+=t-2}return null}function o(){d&&p&&c&&(d.purge(),p.purge(),c.init(null),l=h=p=d=c=null)}var l,c,p,d,h,u;if(l=s,c=new n,c.init(l),65496!==c.SHORT(0))throw new t.ImageError(t.ImageError.WRONG_FORMAT);p=new i(s),d=new a,u=!!d.init(p.get("app1")[0]),h=r.call(this),e.extend(this,{type:"image/jpeg",size:l.length,width:h&&h.width||0,height:h&&h.height||0,setExif:function(t,i){return!!u&&("object"===e.typeOf(t)?e.each(t,function(e,t){d.setExif(t,e)}):d.setExif(t,i),void p.set("app1",d.getBinary()))},writeHeaders:function(){return arguments.length?p.restore(arguments[0]):l=p.restore(l)},stripHeaders:function(e){return p.strip(e)},purge:function(){o.call(this)}}),u&&(this.meta={tiff:d.TIFF(),exif:d.EXIF(),gps:d.GPS()})}return s}),n(A,[d,r,R],function(e,t,i){function n(n){function a(){var e,t;return e=r.call(this,8),"IHDR"==e.type?(t=e.start,{width:l.LONG(t),height:l.LONG(t+=4)}):null}function s(){l&&(l.init(null),o=d=c=p=l=null)}function r(e){var t,i,n,a;return t=l.LONG(e),i=l.STRING(e+=4,4),n=e+=4,a=l.LONG(e+t),{length:t,type:i,start:n,CRC:a}}var o,l,c,p,d;o=n,l=new i,l.init(o),function(){var t=0,i=0,n=[35152,20039,3338,6666];for(i=0;i<n.length;i++,t+=2)if(n[i]!=l.SHORT(t))throw new e.ImageError(e.ImageError.WRONG_FORMAT)}(),d=a.call(this),t.extend(this,{type:"image/png",size:o.length,width:d.width,height:d.height,purge:function(){s.call(this)}}),s.call(this)}return n}),n(N,[r,d,W,A],function(e,t,i,n){return function(a){var s,r=[i,n];s=function(){for(var e=0;e<r.length;e++)try{return new r[e](a)}catch(e){}throw new t.ImageError(t.ImageError.WRONG_FORMAT)}(),e.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(e){return e},stripHeaders:function(e){return e},purge:function(){}}),e.extend(this,s),this.purge=function(){s.purge(),s=null}}}),n(M,[],function(){function e(e,n,a){var s=e.naturalWidth,r=e.naturalHeight,o=a.width,l=a.height,c=a.x||0,p=a.y||0,d=n.getContext("2d");t(e)&&(s/=2,r/=2);var h=1024,u=document.createElement("canvas");u.width=u.height=h;for(var f=u.getContext("2d"),g=i(e,s,r),m=0;r>m;){for(var y=m+h>r?r-m:h,v=0;s>v;){var w=v+h>s?s-v:h;f.clearRect(0,0,h,h),f.drawImage(e,-v,-m);var b=v*o/s+c<<0,x=Math.ceil(w*o/s),C=m*l/r/g+p<<0,_=Math.ceil(y*l/r/g);d.drawImage(u,0,0,w,y,b,C,x,_),v+=h}m+=h}u=f=null}function t(e){var t=e.naturalWidth;if(t*e.naturalHeight>1048576){var i=document.createElement("canvas");i.width=i.height=1;var n=i.getContext("2d");return n.drawImage(e,1-t,0),0===n.getImageData(0,0,1,1).data[3]}return!1}function i(e,t,i){var n=document.createElement("canvas");n.width=1,n.height=i;var a=n.getContext("2d");a.drawImage(e,0,0);for(var s=a.getImageData(0,0,1,i).data,r=0,o=i,l=i;l>r;){0===s[4*(l-1)+3]?o=l:r=l,l=o+r>>1}n=null;var c=l/i;return 0===c?1:c}return{isSubsampled:t,renderTo:e}}),n(O,[T,r,d,u,y,N,M,l,c],function(e,t,i,n,a,s,r,o,l){function c(){function e(){if(!w&&!y)throw new i.ImageError(i.DOMException.INVALID_STATE_ERR);return w||y}function c(e){return n.atob(e.substring(e.indexOf("base64,")+7))}function p(e,t){return"data:"+(t||"")+";base64,"+n.btoa(e)}function d(e){var t=this;y=new Image,y.onerror=function(){m.call(this),t.trigger("error",i.ImageError.WRONG_FORMAT)},y.onload=function(){t.trigger("load")},y.src=/^data:[^;]*;base64,/.test(e)?e:p(e,x.type)}function h(e,t){var n,a=this;return window.FileReader?(n=new FileReader,n.onload=function(){t(this.result)},n.onerror=function(){a.trigger("error",i.ImageError.WRONG_FORMAT)},void n.readAsDataURL(e)):t(e.getAsDataURL())}function u(i,n,a,s){var r,o,l,c,p,d=this,h=0,u=0;if(S=s,p=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==t.inArray(p,[5,6,7,8])){var m=i;i=n,n=m}return o=e(),a?(i=Math.min(i,o.width),n=Math.min(n,o.height),r=Math.max(i/o.width,n/o.height)):r=Math.min(i/o.width,n/o.height),r>1&&!a&&s?void this.trigger("Resize"):(w||(w=document.createElement("canvas")),l=Math.round(o.width*r),c=Math.round(o.height*r),a?(w.width=i,w.height=n,l>i&&(h=Math.round((l-i)/2)),c>n&&(u=Math.round((c-n)/2))):(w.width=l,w.height=c),S||g(w.width,w.height,p),f.call(this,o,w,-h,-u,l,c),this.width=w.width,this.height=w.height,_=!0,void d.trigger("Resize"))}function f(e,t,i,n,a,s){if("iOS"===l.OS)r.renderTo(e,t,{width:a,height:s,x:i,y:n});else{t.getContext("2d").drawImage(e,i,n,a,s)}}function g(e,t,i){switch(i){case 5:case 6:case 7:case 8:w.width=t,w.height=e;break;default:w.width=e,w.height=t}var n=w.getContext("2d");switch(i){case 2:n.translate(e,0),n.scale(-1,1);break;case 3:n.translate(e,t),n.rotate(Math.PI);break;case 4:n.translate(0,t),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-t);break;case 7:n.rotate(.5*Math.PI),n.translate(e,-t),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-e,0)}}function m(){v&&(v.purge(),v=null),b=y=w=x=null,_=!1}var y,v,w,b,x,C=this,_=!1,S=!0;t.extend(this,{loadFromBlob:function(e){var t=this,n=t.getRuntime(),a=!(arguments.length>1)||arguments[1];if(!n.can("access_binary"))throw new i.RuntimeError(i.RuntimeError.NOT_SUPPORTED_ERR);return x=e,e.isDetached()?(b=e.getSource(),void d.call(this,b)):void h.call(this,e.getSource(),function(e){a&&(b=c(e)),d.call(t,e)})},loadFromImage:function(e,t){this.meta=e.meta,x=new a(null,{name:e.name,size:e.size,type:e.type}),d.call(this,t?b=e.getAsBinaryString():e.getAsDataURL())},getInfo:function(){var t=this.getRuntime();return!v&&b&&t.can("access_image_binary")&&(v=new s(b)),{width:e().width||0,height:e().height||0,type:x.type||o.getFileMime(x.name),size:b&&b.length||x.size||0,name:x.name||"",meta:v&&v.meta||this.meta||{}}},downsize:function(){u.apply(this,arguments)},getAsCanvas:function(){return w&&(w.id=this.uid+"_canvas"),w},getAsBlob:function(e,t){return e!==this.type&&u.call(this,this.width,this.height,!1),new a(null,{name:x.name||"",type:e,data:C.getAsBinaryString.call(this,e,t)})},getAsDataURL:function(e){var t=arguments[1]||90;if(!_)return y.src;if("image/jpeg"!==e)return w.toDataURL("image/png");try{return w.toDataURL("image/jpeg",t/100)}catch(e){return w.toDataURL("image/jpeg")}},getAsBinaryString:function(e,t){if(!_)return b||(b=c(C.getAsDataURL(e,t))),b;if("image/jpeg"!==e)b=c(C.getAsDataURL(e,t));else{var i;t||(t=90);try{i=w.toDataURL("image/jpeg",t/100)}catch(e){i=w.toDataURL("image/jpeg")}b=c(i),v&&(b=v.stripHeaders(b),S&&(v.meta&&v.meta.exif&&v.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),b=v.writeHeaders(b)),v.purge(),v=null)}return _=!1,b},destroy:function(){C=null,m.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return e.Image=c}),n(F,[r,c,p,d,f],function(e,t,i,n,a){function s(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(t){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1])}function r(r){var c,p=this;r=e.extend({swf_url:t.swf_url},r),a.call(this,r,o,{access_binary:function(e){return e&&"browser"===p.mode},access_image_binary:function(e){return e&&"browser"===p.mode},display_media:a.capTrue,do_cors:a.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===p.mode},resize_image:a.capTrue,return_response_headers:!1,return_response_type:function(t){return!("json"!==t||!window.JSON)||(!e.arrayDiff(t,["","text","document"])||"browser"===p.mode)},return_status_code:function(t){return"browser"===p.mode||!e.arrayDiff(t,[200,404])},select_file:a.capTrue,select_multiple:a.capTrue,send_binary_string:function(e){return e&&"browser"===p.mode},send_browser_cookies:function(e){return e&&"browser"===p.mode},send_custom_headers:function(e){return e&&"browser"===p.mode},send_multipart:a.capTrue,slice_blob:function(e){return e&&"browser"===p.mode},stream_upload:function(e){return e&&"browser"===p.mode},summon_file_dialog:!1,upload_filesize:function(t){return e.parseSizeStr(t)<=2097152||"client"===p.mode},use_http_method:function(t){return!e.arrayDiff(t,["GET","POST"])}},{access_binary:function(e){return e?"browser":"client"},access_image_binary:function(e){return e?"browser":"client"},report_upload_progress:function(e){return e?"browser":"client"},return_response_type:function(t){return e.arrayDiff(t,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(t){return e.arrayDiff(t,[200,404])?"browser":["client","browser"]},send_binary_string:function(e){return e?"browser":"client"},send_browser_cookies:function(e){return e?"browser":"client"},send_custom_headers:function(e){return e?"browser":"client"},stream_upload:function(e){return e?"client":"browser"},upload_filesize:function(t){return e.parseSizeStr(t)>=2097152?"client":"browser"}},"client"),s()<10&&(this.mode=!1),e.extend(this,{getShim:function(){return i.get(this.uid)},shimExec:function(e,t){var i=[].slice.call(arguments,2);return p.getShim().exec(this.uid,e,t,i)},init:function(){var i,a,s;s=this.getShimContainer(),e.extend(s.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),i='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+r.swf_url+'" ',"IE"===t.browser&&(i+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),i+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+r.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+t.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===t.browser?(a=document.createElement("div"),s.appendChild(a),a.outerHTML=i,a=s=null):s.innerHTML=i,c=setTimeout(function(){p&&!p.initialized&&p.trigger("Error",new n.RuntimeError(n.RuntimeError.NOT_INIT_ERR))},5e3)},destroy:function(e){return function(){e.call(p),clearTimeout(c),r=c=e=p=null}}(this.destroy)},l)}var o="flash",l={};return a.addConstructor(o,r),l}),n(B,[F,m],function(e,t){var i={slice:function(e,i,n,a){var s=this.getRuntime();return 0>i?i=Math.max(e.size+i,0):i>0&&(i=Math.min(i,e.size)),0>n?n=Math.max(e.size+n,0):n>0&&(n=Math.min(n,e.size)),e=s.shimExec.call(this,"Blob","slice",i,n,a||""),e&&(e=new t(s.uid,e)),e}};return e.Blob=i}),n("moxie/runtime/flash/file/FileInput",[F],function(e){var t={init:function(e){this.getRuntime().shimExec.call(this,"FileInput","init",{name:e.name,accept:e.accept,multiple:e.multiple}),this.trigger("ready")}};return e.FileInput=t}),n(z,[F,u],function(e,t){function i(e,i){switch(i){case"readAsText":return t.atob(e,"utf8");case"readAsBinaryString":return t.atob(e);case"readAsDataURL":return e}return null}var n="",a={read:function(e,t){var a=this,s=a.getRuntime();return"readAsDataURL"===e&&(n="data:"+(t.type||"")+";base64,"),a.bind("Progress",function(t,a){a&&(n+=i(a,e))}),s.shimExec.call(this,"FileReader","readAsBase64",t.uid)},getResult:function(){return n},destroy:function(){n=null}};return e.FileReader=a}),n(j,[F,u],function(e,t){function i(e,i){switch(i){case"readAsText":return t.atob(e,"utf8");case"readAsBinaryString":return t.atob(e);case"readAsDataURL":return e}return null}var n={read:function(e,t){var n;return(n=this.getRuntime().shimExec.call(this,"FileReaderSync","readAsBase64",t.uid))?("readAsDataURL"===e&&(n="data:"+(t.type||"")+";base64,"+n),i(n,e,t.type)):null}};return e.FileReaderSync=n}),n(H,[F,r,m,y,_,S,D],function(e,t,i,n,a,s,r){var o={send:function(e,n){function a(){e.transport=p.mode,p.shimExec.call(c,"XMLHttpRequest","send",e,n)}function o(e,t){p.shimExec.call(c,"XMLHttpRequest","appendBlob",e,t.uid),n=null,a()}function l(e,t){var i=new r;i.bind("TransportingComplete",function(){t(this.result)}),i.transport(e.getSource(),e.type,{ruid:p.uid})}var c=this,p=c.getRuntime();if(t.isEmptyObj(e.headers)||t.each(e.headers,function(e,t){p.shimExec.call(c,"XMLHttpRequest","setRequestHeader",t,e.toString())}),n instanceof s){var d;if(n.each(function(e,t){e instanceof i?d=t:p.shimExec.call(c,"XMLHttpRequest","append",t,e)}),n.hasBlob()){var h=n.getBlob();h.isDetached()?l(h,function(e){h.destroy(),o(d,e)}):o(d,h)}else n=null,a()}else n instanceof i?n.isDetached()?l(n,function(e){n.destroy(),n=e.uid,a()}):(n=n.uid,a()):a()},getResponse:function(e){var i,s,r=this.getRuntime();if(s=r.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(s=new n(r.uid,s),"blob"===e)return s;try{if(i=new a,~t.inArray(e,["","text"]))return i.readAsText(s);if("json"===e&&window.JSON)return JSON.parse(i.readAsText(s))}finally{s.destroy()}}return null},abort:function(e){this.getRuntime().shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return e.XMLHttpRequest=o}),n(K,[F,m],function(e,t){var i={getAsBlob:function(e){var i=this.getRuntime(),n=i.shimExec.call(this,"Transporter","getAsBlob",e);return n?new t(i.uid,n):null}};return e.Transporter=i}),n(U,[F,r,D,m,_],function(e,t,i,n,a){var s={loadFromBlob:function(e){function t(e){a.shimExec.call(n,"Image","loadFromBlob",e.uid),n=a=null}var n=this,a=n.getRuntime();if(e.isDetached()){var s=new i;s.bind("TransportingComplete",function(){t(s.result.getSource())}),s.transport(e.getSource(),e.type,{ruid:a.uid})}else t(e.getSource())},loadFromImage:function(e){return this.getRuntime().shimExec.call(this,"Image","loadFromImage",e.uid)},getAsBlob:function(e,t){var i=this.getRuntime(),a=i.shimExec.call(this,"Image","getAsBlob",e,t);return a?new n(i.uid,a):null},getAsDataURL:function(){var e,t=this.getRuntime(),i=t.Image.getAsBlob.apply(this,arguments);return i?(e=new a,e.readAsDataURL(i)):null}};return e.Image=s}),n(V,[r,c,p,d,f],function(e,t,i,n,a){function s(e){var t,i,n,a,s,r=!1,o=null,l=0;try{try{o=new ActiveXObject("AgControl.AgControl"),o.IsVersionSupported(e)&&(r=!0),o=null}catch(o){var c=navigator.plugins["Silverlight Plug-In"];if(c){for(t=c.description,"1.0.30226.2"===t&&(t="2.0.30226.2"),i=t.split(".");i.length>3;)i.pop();for(;i.length<4;)i.push(0);for(n=e.split(".");n.length>4;)n.pop();do{a=parseInt(n[l],10),s=parseInt(i[l],10),l++}while(l<n.length&&a===s);s>=a&&!isNaN(a)&&(r=!0)}}}catch(e){r=!1}return r}function r(r){var c,p=this;r=e.extend({xap_url:t.xap_url},r),a.call(this,r,o,{access_binary:a.capTrue,access_image_binary:a.capTrue,display_media:a.capTrue,do_cors:a.capTrue,drag_and_drop:!1,report_upload_progress:a.capTrue,resize_image:a.capTrue,return_response_headers:function(e){return e&&"client"===p.mode},return_response_type:function(e){return"json"!==e||!!window.JSON},return_status_code:function(t){return"client"===p.mode||!e.arrayDiff(t,[200,404])},select_file:a.capTrue,select_multiple:a.capTrue,send_binary_string:a.capTrue,send_browser_cookies:function(e){return e&&"browser"===p.mode},send_custom_headers:function(e){return e&&"client"===p.mode},send_multipart:a.capTrue,slice_blob:a.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:a.capTrue,use_http_method:function(t){return"client"===p.mode||!e.arrayDiff(t,["GET","POST"])}},{return_response_headers:function(e){return e?"client":"browser"},return_status_code:function(t){return e.arrayDiff(t,[200,404])?"client":["client","browser"]},send_browser_cookies:function(e){return e?"browser":"client"},send_custom_headers:function(e){return e?"client":"browser"},use_http_method:function(t){return e.arrayDiff(t,["GET","POST"])?"client":["client","browser"]}}),s("2.0.31005.0")&&"Opera"!==t.browser||(this.mode=!1),e.extend(this,{getShim:function(){return i.get(this.uid).content.Moxie},shimExec:function(e,t){var i=[].slice.call(arguments,2);return p.getShim().exec(this.uid,e,t,i)},init:function(){var e;e=this.getShimContainer(),e.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+r.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+t.global_event_dispatcher+'"/></object>',c=setTimeout(function(){p&&!p.initialized&&p.trigger("Error",new n.RuntimeError(n.RuntimeError.NOT_INIT_ERR))},"Windows"!==t.OS?1e4:5e3)},destroy:function(e){return function(){e.call(p),clearTimeout(c),r=c=e=p=null}}(this.destroy)},l)}var o="silverlight",l={};return a.addConstructor(o,r),l}),n("moxie/runtime/silverlight/file/Blob",[V,r,B],function(e,t,i){return e.Blob=t.extend({},i)}),n("moxie/runtime/silverlight/file/FileInput",[V],function(e){var t={init:function(e){this.getRuntime().shimExec.call(this,"FileInput","init",function(e){for(var t="",i=0;i<e.length;i++)t+=(""!==t?"|":"")+e[i].title+" | *."+e[i].extensions.replace(/,/g,";*.");return t}(e.accept),e.name,e.multiple),this.trigger("ready")}};return e.FileInput=t}),n("moxie/runtime/silverlight/file/FileDrop",[V,p,k],function(e,t,i){var n={init:function(){var e,n=this,a=n.getRuntime();return e=a.getShimContainer(),i.addEvent(e,"dragover",function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"},n.uid),i.addEvent(e,"dragenter",function(e){e.preventDefault(),t.get(a.uid).dragEnter(e)&&e.stopPropagation()},n.uid),i.addEvent(e,"drop",function(e){e.preventDefault(),t.get(a.uid).dragDrop(e)&&e.stopPropagation()},n.uid),a.shimExec.call(this,"FileDrop","init")}};return e.FileDrop=n}),n("moxie/runtime/silverlight/file/FileReader",[V,r,z],function(e,t,i){return e.FileReader=t.extend({},i)}),n("moxie/runtime/silverlight/file/FileReaderSync",[V,r,j],function(e,t,i){return e.FileReaderSync=t.extend({},i)}),n("moxie/runtime/silverlight/xhr/XMLHttpRequest",[V,r,H],function(e,t,i){return e.XMLHttpRequest=t.extend({},i)}),n("moxie/runtime/silverlight/runtime/Transporter",[V,r,K],function(e,t,i){return e.Transporter=t.extend({},i)}),n("moxie/runtime/silverlight/image/Image",[V,r,U],function(e,t,i){return e.Image=t.extend({},i,{getInfo:function(){var e=this.getRuntime(),i=["tiff","exif","gps"],n={meta:{}},a=e.shimExec.call(this,"Image","getInfo");return a.meta&&t.each(i,function(e){var t,i,s,r,o=a.meta[e];if(o&&o.keys)for(n.meta[e]={},i=0,s=o.keys.length;s>i;i++)t=o.keys[i],(r=o[t])&&(/^(\d|[1-9]\d+)$/.test(r)?r=parseInt(r,10):/^\d*\.\d+$/.test(r)&&(r=parseFloat(r)),n.meta[e][t]=r)}),n.width=parseInt(a.width,10),n.height=parseInt(a.height,10),n.size=parseInt(a.size,10),n.type=a.type,n.name=a.name,n}})}),n(G,[r,d,f,c],function(e,t,i,n){function a(t){var a=this,o=i.capTest,l=i.capTrue;i.call(this,t,s,{access_binary:o(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:o(r.Image&&(n.can("create_canvas")||n.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:o(function(){return"Chrome"===n.browser&&n.version>=28||"IE"===n.browser&&n.version>=10}()),resize_image:function(){return r.Image&&a.can("access_binary")&&n.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(t){return!("json"!==t||!window.JSON)||!!~e.inArray(t,["text","document",""])},return_status_code:function(t){return!e.arrayDiff(t,[200,404])},select_file:function(){return n.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return a.can("select_file")},summon_file_dialog:o(function(){return"Firefox"===n.browser&&n.version>=4||"Opera"===n.browser&&n.version>=12||!!~e.inArray(n.browser,["Chrome","Safari"])}()),upload_filesize:l,use_http_method:function(t){return!e.arrayDiff(t,["GET","POST"])}}),e.extend(this,{init:function(){this.trigger("Init")},destroy:function(e){return function(){e.call(a),e=a=null}}(this.destroy)}),e.extend(this.getShim(),r)}var s="html4",r={};return i.addConstructor(s,a),r}),n("moxie/runtime/html4/file/FileInput",[G,r,p,k,l,c],function(e,t,i,n,a,s){function r(){function e(){var a,p,d,h,u,f,g=this,m=g.getRuntime();f=t.guid("uid_"),a=m.getShimContainer(),r&&(d=i.get(r+"_form"))&&t.extend(d.style,{top:"100%"}),h=document.createElement("form"),h.setAttribute("id",f+"_form"),h.setAttribute("method","post"),h.setAttribute("enctype","multipart/form-data"),h.setAttribute("encoding","multipart/form-data"),t.extend(h.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),u=document.createElement("input"),u.setAttribute("id",f),u.setAttribute("type","file"),u.setAttribute("name",o.name||"Filedata"),u.setAttribute("accept",c.join(",")),t.extend(u.style,{fontSize:"999px",opacity:0}),h.appendChild(u),a.appendChild(h),t.extend(u.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===s.browser&&s.version<10&&t.extend(u.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),u.onchange=function(){var t;this.value&&(t=this.files?this.files[0]:{name:this.value},l=[t],this.onchange=function(){},e.call(g),g.bind("change",function e(){var t,n=i.get(f),a=i.get(f+"_form");g.unbind("change",e),g.files.length&&n&&a&&(t=g.files[0],n.setAttribute("id",t.uid),a.setAttribute("id",t.uid+"_form"),a.setAttribute("target",t.uid+"_iframe")),n=a=null},998),u=h=null,g.trigger("change"))},m.can("summon_file_dialog")&&(p=i.get(o.browse_button),n.removeEvent(p,"click",g.uid),n.addEvent(p,"click",function(e){u&&!u.disabled&&u.click(),e.preventDefault()},g.uid)),r=f,a=d=p=null}var r,o,l=[],c=[];t.extend(this,{init:function(t){var s,r=this,l=r.getRuntime();o=t,c=t.accept.mimes||a.extList2mimes(t.accept,l.can("filter_by_extension")),s=l.getShimContainer(),function(){var e,a,o;e=i.get(t.browse_button),l.can("summon_file_dialog")&&("static"===i.getStyle(e,"position")&&(e.style.position="relative"),a=parseInt(i.getStyle(e,"z-index"),10)||1,e.style.zIndex=a,s.style.zIndex=a-1),o=l.can("summon_file_dialog")?e:s,n.addEvent(o,"mouseover",function(){r.trigger("mouseenter")},r.uid),n.addEvent(o,"mouseout",function(){r.trigger("mouseleave")},r.uid),n.addEvent(o,"mousedown",function(){r.trigger("mousedown")},r.uid),n.addEvent(i.get(t.container),"mouseup",function(){r.trigger("mouseup")},r.uid),e=null}(),e.call(this),s=null,r.trigger({type:"ready",async:!0})},getFiles:function(){return l},disable:function(e){var t;(t=i.get(r))&&(t.disabled=!!e)},destroy:function(){var e=this.getRuntime(),t=e.getShim(),a=e.getShimContainer();n.removeAllEvents(a,this.uid),n.removeAllEvents(o&&i.get(o.container),this.uid),n.removeAllEvents(o&&i.get(o.browse_button),this.uid),a&&(a.innerHTML=""),t.removeInstance(this.uid),r=l=c=o=a=t=null}})}return e.FileInput=r}),n("moxie/runtime/html4/file/FileReader",[G,E],function(e,t){return e.FileReader=t}),n("moxie/runtime/html4/xhr/XMLHttpRequest",[G,r,p,C,d,k,m,S],function(e,t,i,n,a,s,r,o){function l(){function e(e){var t,n,a,r,o=this,l=!1;if(p){if(t=p.id.replace(/_iframe$/,""),n=i.get(t+"_form")){for(a=n.getElementsByTagName("input"),r=a.length;r--;)switch(a[r].getAttribute("type")){case"hidden":a[r].parentNode.removeChild(a[r]);break;case"file":l=!0}a=[],l||n.parentNode.removeChild(n),n=null}setTimeout(function(){s.removeEvent(p,"load",o.uid),p.parentNode&&p.parentNode.removeChild(p);var t=o.getRuntime().getShimContainer();t.children.length||t.parentNode.removeChild(t),t=p=null,e()},1)}}var l,c,p;t.extend(this,{send:function(d,h){var u,f,g,m,y=this,v=y.getRuntime();if(l=c=null,h instanceof o&&h.hasBlob()){if(m=h.getBlob(),u=m.uid,g=i.get(u),!(f=i.get(u+"_form")))throw new a.DOMException(a.DOMException.NOT_FOUND_ERR)}else u=t.guid("uid_"),f=document.createElement("form"),f.setAttribute("id",u+"_form"),f.setAttribute("method",d.method),f.setAttribute("enctype","multipart/form-data"),f.setAttribute("encoding","multipart/form-data"),f.setAttribute("target",u+"_iframe"),v.getShimContainer().appendChild(f);h instanceof o&&h.each(function(e,i){if(e instanceof r)g&&g.setAttribute("name",i);else{var n=document.createElement("input");t.extend(n,{type:"hidden",name:i,value:e}),g?f.insertBefore(n,g):f.appendChild(n)}}),f.setAttribute("action",d.url),function(){var i=v.getShimContainer()||document.body,a=document.createElement("div");a.innerHTML='<iframe id="'+u+'_iframe" name="'+u+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',p=a.firstChild,i.appendChild(p),s.addEvent(p,"load",function(){var i;try{i=p.contentWindow.document||p.contentDocument||window.frames[p.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(i.title)?l=i.title.replace(/^(\d+).*$/,"$1"):(l=200,c=t.trim(i.body.innerHTML),y.trigger({type:"progress",loaded:c.length,total:c.length}),m&&y.trigger({type:"uploadprogress",loaded:m.size||1025,total:m.size||1025}))}catch(t){if(!n.hasSameOrigin(d.url))return void e.call(y,function(){y.trigger("error")});l=404}e.call(y,function(){y.trigger("load")})},y.uid)}(),f.submit(),y.trigger("loadstart")},getStatus:function(){return l},getResponse:function(e){if("json"===e&&"string"===t.typeOf(c)&&window.JSON)try{return JSON.parse(c.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(e){return null}return c},abort:function(){var t=this;p&&p.contentWindow&&(p.contentWindow.stop?p.contentWindow.stop():p.contentWindow.document.execCommand?p.contentWindow.document.execCommand("Stop"):p.src="about:blank"),e.call(this,function(){t.dispatchEvent("abort")})}})}return e.XMLHttpRequest=l}),n("moxie/runtime/html4/image/Image",[G,O],function(e,t){return e.Image=t}),function(i){for(var n=0;n<i.length;n++){for(var a=e,r=i[n],o=r.split(/[.\/]/),l=0;l<o.length-1;++l)a[o[l]]===t&&(a[o[l]]={}),a=a[o[l]];a[o[o.length-1]]=s[r]}}([r,o,l,c,p,d,h,u,f,g,m,y,v,w,b,x,C,_,S,I,D,$,k])}(this),function(e){"use strict";var t={},i=e.moxie.core.utils.Basic.inArray;(function e(n){var a,s;for(a in n)s=typeof n[a],"object"!==s||~i(a,["Exceptions","Env","Mime"])?"function"===s&&(t[a]=n[a]):e(n[a])})(e.moxie),t.Env=e.moxie.core.utils.Env,t.Mime=e.moxie.core.utils.Mime,t.Exceptions=e.moxie.core.Exceptions,e.mOxie=t,e.o||(e.o=t)}(this),function(e,t,i){function n(e){function t(e,t,i){var a={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};a[e]?n[a[e]]=t:i||(n[e]=t)}var i=e.required_features,n={};return"string"==typeof i?r.each(i.split(/\s*,\s*/),function(e){t(e,!0)}):"object"==typeof i?r.each(i,function(e,i){t(i,e)}):!0===i&&(e.chunk_size>0&&(n.slice_blob=!0),!e.resize.enabled&&e.multipart||(n.send_binary_string=!0),r.each(e,function(e,i){t(i,!!e,!0)})),n}var a=e.setTimeout,s={},r={VERSION:"2.1.2",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:t.mimes,ua:t.ua,typeOf:t.typeOf,extend:t.extend,guid:t.guid,get:function(e){var i,n=[];"array"!==t.typeOf(e)&&(e=[e]);for(var a=e.length;a--;)(i=t.get(e[a]))&&n.push(i);return n.length?n:null},each:t.each,getPos:t.getPos,getSize:t.getSize,xmlEncode:function(e){var t={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},i=/[<>&\"\']/g;return e?(""+e).replace(i,function(e){return t[e]?"&"+t[e]+";":e}):e},toArray:t.toArray,inArray:t.inArray,addI18n:t.addI18n,translate:t.translate,isEmptyObj:t.isEmptyObj,hasClass:t.hasClass,addClass:t.addClass,removeClass:t.removeClass,getStyle:t.getStyle,addEvent:t.addEvent,removeEvent:t.removeEvent,removeAllEvents:t.removeAllEvents,cleanName:function(e){var t,i;for(i=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],t=0;t<i.length;t+=2)e=e.replace(i[t],i[t+1]);return e=e.replace(/\s+/g,"_"),e=e.replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(e,t){var i="";return r.each(t,function(e,t){i+=(i?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),i&&(e+=(e.indexOf("?")>0?"&":"?")+i),e},formatSize:function(e){function t(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}if(e===i||/\D/.test(e))return r.translate("N/A");var n=Math.pow(1024,4);return e>n?t(e/n,1)+" "+r.translate("tb"):e>(n/=1024)?t(e/n,1)+" "+r.translate("gb"):e>(n/=1024)?t(e/n,1)+" "+r.translate("mb"):e>1024?Math.round(e/1024)+" "+r.translate("kb"):e+" "+r.translate("b")},parseSize:t.parseSizeStr,predictRuntime:function(e,i){var n,a;return n=new r.Uploader(e),a=t.Runtime.thatCan(n.getOption().required_features,i||e.runtimes),n.destroy(),a},addFileFilter:function(e,t){s[e]=t}};r.addFileFilter("mime_types",function(e,t,i){e.length&&!e.regexp.test(t.name)?(this.trigger("Error",{code:r.FILE_EXTENSION_ERROR,message:r.translate("File extension error."),file:t}),i(!1)):i(!0)}),r.addFileFilter("max_file_size",function(e,t,i){e=r.parseSize(e),void 0!==t.size&&e&&t.size>e?(this.trigger("Error",{code:r.FILE_SIZE_ERROR,message:r.translate("File size error."),file:t}),i(!1)):i(!0)}),r.addFileFilter("prevent_duplicates",function(e,t,i){if(e)for(var n=this.files.length;n--;)if(t.name===this.files[n].name&&t.size===this.files[n].size)return this.trigger("Error",{code:r.FILE_DUPLICATE_ERROR,message:r.translate("Duplicate file error."),file:t}),void i(!1);i(!0)}),r.Uploader=function(e){function o(){var e,t,i=0;if(this.state==r.STARTED){for(t=0;t<k.length;t++)e||k[t].status!=r.QUEUED?i++:(e=k[t],this.trigger("BeforeUpload",e)&&(e.status=r.UPLOADING,this.trigger("UploadFile",e)));i==k.length&&(this.state!==r.STOPPED&&(this.state=r.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",k))}}function l(e){e.percent=e.size>0?Math.ceil(e.loaded/e.size*100):100,c()}function c(){var e,t;for(D.reset(),e=0;e<k.length;e++)t=k[e],t.size!==i?(D.size+=t.origSize,D.loaded+=t.loaded*t.origSize/t.size):D.size=i,t.status==r.DONE?D.uploaded++:t.status==r.FAILED?D.failed++:D.queued++
;D.size===i?D.percent=k.length>0?Math.ceil(D.uploaded/k.length*100):0:(D.bytesPerSec=Math.ceil(D.loaded/((+new Date-I||1)/1e3)),D.percent=D.size>0?Math.ceil(D.loaded/D.size*100):0)}function p(){var e=R[0]||L[0];return!!e&&e.getRuntime().uid}function d(e,i){if(e.ruid){var n=t.Runtime.getInfo(e.ruid);if(n)return n.can(i)}return!1}function h(){this.bind("FilesAdded FilesRemoved",function(e){e.trigger("QueueChanged"),e.refresh()}),this.bind("CancelUpload",b),this.bind("BeforeUpload",m),this.bind("UploadFile",y),this.bind("UploadProgress",v),this.bind("StateChanged",w),this.bind("QueueChanged",c),this.bind("Error",C),this.bind("FileUploaded",x),this.bind("Destroy",_)}function u(e,i){var n=this,a=0,s=[],o={runtime_order:e.runtimes,required_caps:e.required_features,preferred_caps:E,swf_url:e.flash_swf_url,xap_url:e.silverlight_xap_url};r.each(e.runtimes.split(/\s*,\s*/),function(t){e[t]&&(o[t]=e[t])}),e.browse_button&&r.each(e.browse_button,function(i){s.push(function(s){var l=new t.FileInput(r.extend({},o,{accept:e.filters.mime_types,name:e.file_data_name,multiple:e.multi_selection,container:e.container,browse_button:i}));l.onready=function(){var e=t.Runtime.getInfo(this.ruid);t.extend(n.features,{chunks:e.can("slice_blob"),multipart:e.can("send_multipart"),multi_selection:e.can("select_multiple")}),a++,R.push(this),s()},l.onchange=function(){n.addFile(this.files)},l.bind("mouseenter mouseleave mousedown mouseup",function(n){P||(e.browse_button_hover&&("mouseenter"===n.type?t.addClass(i,e.browse_button_hover):"mouseleave"===n.type&&t.removeClass(i,e.browse_button_hover)),e.browse_button_active&&("mousedown"===n.type?t.addClass(i,e.browse_button_active):"mouseup"===n.type&&t.removeClass(i,e.browse_button_active)))}),l.bind("mousedown",function(){n.trigger("Browse")}),l.bind("error runtimeerror",function(){l=null,s()}),l.init()})}),e.drop_element&&r.each(e.drop_element,function(e){s.push(function(i){var s=new t.FileDrop(r.extend({},o,{drop_zone:e}));s.onready=function(){var e=t.Runtime.getInfo(this.ruid);n.features.dragdrop=e.can("drag_and_drop"),a++,L.push(this),i()},s.ondrop=function(){n.addFile(this.files)},s.bind("error runtimeerror",function(){s=null,i()}),s.init()})}),t.inSeries(s,function(){"function"==typeof i&&i(a)})}function f(e,n,a){var s=new t.Image;try{s.onload=function(){if(n.width>this.width&&n.height>this.height&&n.quality===i&&n.preserve_headers&&!n.crop)return this.destroy(),a(e);s.downsize(n.width,n.height,n.crop,n.preserve_headers)},s.onresize=function(){a(this.getAsBlob(e.type,n.quality)),this.destroy()},s.onerror=function(){a(e)},s.load(e)}catch(t){a(e)}}function g(e,i,a){function s(e,t,i){var n=S[e];switch(e){case"max_file_size":"max_file_size"===e&&(S.max_file_size=S.filters.max_file_size=t);break;case"chunk_size":(t=r.parseSize(t))&&(S[e]=t,S.send_file_name=!0);break;case"multipart":S[e]=t,t||(S.send_file_name=!0);break;case"unique_names":S[e]=t,t&&(S.send_file_name=!0);break;case"filters":"array"===r.typeOf(t)&&(t={mime_types:t}),i?r.extend(S.filters,t):S.filters=t,t.mime_types&&(S.filters.mime_types.regexp=function(e){var t=[];return r.each(e,function(e){r.each(e.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?t.push("\\.*"):t.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+t.join("|")+")$","i")}(S.filters.mime_types));break;case"resize":i?r.extend(S.resize,t,{enabled:!0}):S.resize=t;break;case"prevent_duplicates":S.prevent_duplicates=S.filters.prevent_duplicates=!!t;break;case"browse_button":case"drop_element":t=r.get(t);case"container":case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":S[e]=t,i||(l=!0);break;default:S[e]=t}i||o.trigger("OptionChanged",e,t,n)}var o=this,l=!1;"object"==typeof e?r.each(e,function(e,t){s(t,e,a)}):s(e,i,a),a?(S.required_features=n(r.extend({},S)),E=n(r.extend({},S,{required_features:!0}))):l&&(o.trigger("Destroy"),u.call(o,S,function(e){e?(o.runtime=t.Runtime.getInfo(p()).type,o.trigger("Init",{runtime:o.runtime}),o.trigger("PostInit")):o.trigger("Error",{code:r.INIT_ERROR,message:r.translate("Init error.")})}))}function m(e,t){if(e.settings.unique_names){var i=t.name.match(/\.([^.]+)$/),n="part";i&&(n=i[1]),t.target_name=t.id+"."+n}}function y(e,i){function n(){p-- >0?a(s,1e3):(i.loaded=u,e.trigger("Error",{code:r.HTTP_ERROR,message:r.translate("HTTP Error."),file:i,response:$.responseText,status:$.status,responseHeaders:$.getAllResponseHeaders()}))}function s(){var d,f,g,m={};i.status===r.UPLOADING&&e.state!==r.STOPPED&&(e.settings.send_file_name&&(m.name=i.target_name||i.name),c&&h.chunks&&o.size>c?(g=Math.min(c,o.size-u),d=o.slice(u,u+g)):(g=o.size,d=o),c&&h.chunks&&(e.settings.send_chunk_number?(m.chunk=Math.ceil(u/c),m.chunks=Math.ceil(o.size/c)):(m.offset=u,m.total=o.size)),$=new t.XMLHttpRequest,$.upload&&($.upload.onprogress=function(t){i.loaded=Math.min(i.size,u+t.loaded),e.trigger("UploadProgress",i)}),$.onload=function(){if($.status>=400)return void n();p=e.settings.max_retries,g<o.size?(d.destroy(),u+=g,i.loaded=Math.min(u,o.size),e.trigger("ChunkUploaded",i,{offset:i.loaded,total:o.size,response:$.responseText,status:$.status,responseHeaders:$.getAllResponseHeaders()}),"Android Browser"===t.Env.browser&&e.trigger("UploadProgress",i)):i.loaded=i.size,d=f=null,!u||u>=o.size?(i.size!=i.origSize&&(o.destroy(),o=null),e.trigger("UploadProgress",i),i.status=r.DONE,e.trigger("FileUploaded",i,{response:$.responseText,status:$.status,responseHeaders:$.getAllResponseHeaders()})):a(s,1)},$.onerror=function(){n()},$.onloadend=function(){this.destroy(),$=null},e.settings.multipart&&h.multipart?($.open("post",l,!0),r.each(e.settings.headers,function(e,t){$.setRequestHeader(t,e)}),f=new t.FormData,r.each(r.extend(m,e.settings.multipart_params),function(e,t){f.append(t,e)}),f.append(e.settings.file_data_name,d),$.send(f,{runtime_order:e.settings.runtimes,required_caps:e.settings.required_features,preferred_caps:E,swf_url:e.settings.flash_swf_url,xap_url:e.settings.silverlight_xap_url})):(l=r.buildUrl(e.settings.url,r.extend(m,e.settings.multipart_params)),$.open("post",l,!0),$.setRequestHeader("Content-Type","application/octet-stream"),r.each(e.settings.headers,function(e,t){$.setRequestHeader(t,e)}),$.send(d,{runtime_order:e.settings.runtimes,required_caps:e.settings.required_features,preferred_caps:E,swf_url:e.settings.flash_swf_url,xap_url:e.settings.silverlight_xap_url})))}var o,l=e.settings.url,c=e.settings.chunk_size,p=e.settings.max_retries,h=e.features,u=0;i.loaded&&(u=i.loaded=c?c*Math.floor(i.loaded/c):0),o=i.getSource(),e.settings.resize.enabled&&d(o,"send_binary_string")&&~t.inArray(o.type,["image/jpeg","image/png"])?f.call(this,o,e.settings.resize,function(e){o=e,i.size=e.size,s()}):s()}function v(e,t){l(t)}function w(e){if(e.state==r.STARTED)I=+new Date;else if(e.state==r.STOPPED)for(var t=e.files.length-1;t>=0;t--)e.files[t].status==r.UPLOADING&&(e.files[t].status=r.QUEUED,c())}function b(){$&&$.abort()}function x(e){c(),a(function(){o.call(e)},1)}function C(e,t){t.code===r.INIT_ERROR?e.destroy():t.file&&(t.file.status=r.FAILED,l(t.file),e.state==r.STARTED&&(e.trigger("CancelUpload"),a(function(){o.call(e)},1)))}function _(e){e.stop(),r.each(k,function(e){e.destroy()}),k=[],R.length&&(r.each(R,function(e){e.destroy()}),R=[]),L.length&&(r.each(L,function(e){e.destroy()}),L=[]),E={},P=!1,I=$=null,D.reset()}var S,I,D,$,T=r.guid(),k=[],E={},R=[],L=[],P=!1;S={runtimes:t.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_file_name:!0,send_chunk_number:!0},g.call(this,e,null,!0),D=new r.QueueProgress,r.extend(this,{id:T,uid:T,state:r.STOPPED,features:{},runtime:null,files:k,settings:S,total:D,init:function(){var e=this;if("function"==typeof S.preinit?S.preinit(e):r.each(S.preinit,function(t,i){e.bind(i,t)}),h.call(this),!S.browse_button||!S.url)return void this.trigger("Error",{code:r.INIT_ERROR,message:r.translate("Init error.")});u.call(this,S,function(i){"function"==typeof S.init?S.init(e):r.each(S.init,function(t,i){e.bind(i,t)}),i?(e.runtime=t.Runtime.getInfo(p()).type,e.trigger("Init",{runtime:e.runtime}),e.trigger("PostInit")):e.trigger("Error",{code:r.INIT_ERROR,message:r.translate("Init error.")})})},setOption:function(e,t){g.call(this,e,t,!this.runtime)},getOption:function(e){return e?S[e]:S},refresh:function(){R.length&&r.each(R,function(e){e.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=r.STARTED&&(this.state=r.STARTED,this.trigger("StateChanged"),o.call(this))},stop:function(){this.state!=r.STOPPED&&(this.state=r.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){P=arguments[0]===i||arguments[0],R.length&&r.each(R,function(e){e.disable(P)}),this.trigger("DisableBrowse",P)},getFile:function(e){var t;for(t=k.length-1;t>=0;t--)if(k[t].id===e)return k[t]},addFile:function(e,i){function n(e,i){var n=[];t.each(c.settings.filters,function(t,i){s[i]&&n.push(function(n){s[i].call(c,t,e,function(e){n(!e)})})}),t.inSeries(n,i)}function o(e){var s=t.typeOf(e);if(e instanceof t.File){if(!e.ruid&&!e.isDetached()){if(!l)return!1;e.ruid=l,e.connectRuntime(l)}o(new r.File(e))}else e instanceof t.Blob?(o(e.getSource()),e.destroy()):e instanceof r.File?(i&&(e.name=i),d.push(function(t){n(e,function(i){i||(k.push(e),h.push(e),c.trigger("FileFiltered",e)),a(t,1)})})):-1!==t.inArray(s,["file","blob"])?o(new t.File(null,e)):"node"===s&&"filelist"===t.typeOf(e.files)?t.each(e.files,o):"array"===s&&(i=null,t.each(e,o))}var l,c=this,d=[],h=[];l=p(),o(e),d.length&&t.inSeries(d,function(){h.length&&c.trigger("FilesAdded",h)})},removeFile:function(e){for(var t="string"==typeof e?e:e.id,i=k.length-1;i>=0;i--)if(k[i].id===t)return this.splice(i,1)[0]},splice:function(e,t){var n=k.splice(e===i?0:e,t===i?k.length:t),a=!1;return this.state==r.STARTED&&(r.each(n,function(e){if(e.status===r.UPLOADING)return a=!0,!1}),a&&this.stop()),this.trigger("FilesRemoved",n),r.each(n,function(e){e.destroy()}),a&&this.start(),n},bind:function(e,t,i){var n=this;r.Uploader.prototype.bind.call(this,e,function(){var e=[].slice.call(arguments);return e.splice(0,1,n),t.apply(this,e)},0,i)},destroy:function(){this.trigger("Destroy"),S=D=null,this.unbindAll()}})},r.Uploader.prototype=t.EventTarget.instance,r.File=function(){function e(e){r.extend(this,{id:r.guid(),name:e.name||e.fileName,type:e.type||"",size:e.size||e.fileSize,origSize:e.size||e.fileSize,loaded:0,percent:0,status:r.QUEUED,lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var e=this.getSource().getSource();return-1!==t.inArray(t.typeOf(e),["blob","file"])?e:null},getSource:function(){return i[this.id]?i[this.id]:null},destroy:function(){var e=this.getSource();e&&(e.destroy(),delete i[this.id])}}),i[this.id]=e}var i={};return e}(),r.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},e.plupload=r}(window,mOxie),define("libs/plupload/plupload.full.min",function(){}),define("libs/plupload/form-file-uploader",["../../parts/common","utils","./plupload.full.min","../../parts/language"],function(e,t,i,n){function a(e,t){this.uniqueNumber=function(){var e=0;return function(){return++e}}(),this.uploadedImages={},this.uploaderRefs={},this.uploaderFileRefs={},this.formFileDelToken=null,this.plupload=window.plupload,this.parent=t,this.parentPageview=e}return a.prototype={initUploader:function(e,t,i,a,s,r){var o=this;console.debug("init Uploader start.taskId="+i);var l={};this.isShare=s,this.parentPageview.ajax({url:"/oss/policy",type:"GET",success:function(e){l.accessid=e.data.accessid,l.policy=e.data.policy,l.signature=e.data.signature,l.key=e.data.dir,l.success_action_status=201,l.host=e.data.host,window.ossMapdir=e.data.dir}});var c=$(e),p=$(t),d="",h=c.length,u=p.length;if(1!==h&&console.error("init Uploader found picker size!=1 but:"+h),1!==u&&console.error("init Uploader found container size!=1 but:"+u),c.attr("uploader-init"))return d=c.attr("data-uploader-id"),console.info("uploader inited before.uploaderId="+d),d;d="id_"+this.uniqueNumber(),c.attr("uploader-init","true").attr("data-uploader-id",d),p.attr("data-uploader-id",d),this.uploadedImages[d]=[],e.nodeType||(e=e[0]);d=c.attr("data-uploader-id");var f=new this.plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:e.children[0],multi_selection:!0,flash_swf_url:"./Moxie.swf",silverlight_xap_url:"./Moxie.xap",url:"https://oss.aliyuncs.com",filters:{},init:{PostInit:function(){},FilesAdded:function(e,t){var i=o.parent.fileMaxNum-o.parent.fileNum;e.files.length>i&&console.debug("length1:"+e.files.length),e.refresh(),e.settings.browse_button[0].disabled=!0,e.start()},BeforeUpload:function(e,t){var i=(new Date).getTime();if(t.name=i+"_"+t.name,console.debug("当前时间:"+i),r&&-1===t.type.toLowerCase().indexOf("image"))return e.state=o.plupload.FAILED,e.removeFile(t.id),o.parentPageview.showTip({text:"请上传图片类型文件！",duration:1e3}),!1;if(t.size&&t.size>1e8)return e.state=o.plupload.FAILED,e.removeFile(t.id),o.parentPageview.showTip({text:"文件大小超出限制！",duration:1e3}),!1;var n={key:l.key+"_"+t.name,policy:l.policy,OSSAccessKeyId:l.accessid,success_action_status:"200",signature:l.signature};e.setOption({url:l.host,multipart_params:n,fileNumLimit:a})},UploadProgress:function(e,t){o.parentPageview.showLoading({text:"上传中 "+t.percent+"%"}),console.log(t.id+":"+t.name+" 上传%:"+t.percent)},FileUploaded:function(e,t,a){if(e.settings.browse_button[0].disabled=!1,console.log(a),200===a.status){var s={},r=[],c={};c.id=t.id,c.name=t.name,c.url=t.path,c.type=t.type,c.dir=l.key,r.push(c),s.share=o.isShare||"",s.taskId=i<=-1?"":i,s.fileList=r,s.processInstanceId="","myapprove"===o.parentPageview.pageview.params.curPage&&(s.taskId="",s.processInstanceId=o.parent.applyHistory.instData.historicActivityInstances[0].processInstanceId),o.parentPageview.ajax({url:o.getAppServerUrl()+"/file/saveFileModel",data:JSON.stringify(s),type:"POST",dataType:"json",contentType:"application/json",success:function(i){if(o.parentPageview.hideLoading(!0),console.log(t.id+":"+t.name+" 上传完毕"),i.success){o.parentPageview.showTip({text:n.formTips.uploadedSuccess,duration:1e3});var a=i.data;o.uploaderFileRefs[a.id]=t,o.parent.loadFilesData(i.data[0]),o.recordFileUploaded(d,a)}else o.parentPageview.showTip({text:n.formTips.uploadedFailed+"："+i.msg,duration:2e3}),f.removeFile(t),console.log(t.name+"上传失败:"+i.msg);e.removeFile(t.id),e.refresh()}})}else e.fail(a.response),console.error(a.response)},Error:function(e,t){-601===t.code&&(o.parentPageview.showTip({text:n.formTips.uploadedFailed+"：",duration:2e3}),e.settings.browse_button[0].disabled=!1)}}});return f.setOption("fileNumLimit",12),this.uploaderRefs[d]=f,f.me=this,f.init(),d},recordFileUploaded:function(e,t){console.debug("recordFileUploaded:"+e+"--\x3e"+t.id+",type="+t.type);var i=$("div.uploadimg-container[data-uploader-id='"+e+"']");this.showFileInContainer(i,t,e,!0,!0)},showFileInContainer:function(e,t,i,n,a){var s=this,r=e.children(".upload-file-preview").length;r>=12&&(console.error("文件数量已经超过12个,则不再显示"),$("div.choose-file-btn[data-uploader-id='"+i+"']").css("display","none"));var o=t.id;this.uploadedImages[i].push(o);var l=this.createFileShowDiv(t);e.find(".choose-file-btn").before(l),r++,this.updateFileContainerSize(e),this.updateUploaderLimit(i,e.children(".upload-file-preview").length),console.debug("imgLen:"+r),r>=12&&(console.debug("隐藏文件上传按钮"),$("div.choose-file-btn[data-uploader-id='"+i+"']").css("display","none")),n&&s.createFileDelIcon(l,function(){a?s.deleteServerUploadImage(o,function(){s.removeUploadFileInPage(l,i,o,e)}):s.removeUploadFileInPage(l,i,o,e)})},updateUploaderLimit:function(e,t){var i=this.uploaderRefs[e],n=i.getOption("fileNumLimit"),a=12-t;console.info("更新uploader的文件数限制:"+n+"--\x3e"+a+"--\x3e"+i.getOption("fileNumLimit")),a>0&&a<=12?($("div.choose-file-btn[data-uploader-id='"+e+"']").css("display",""),$("div.uploadimg-container[data-uploader-id='"+e+"']").children(":eq(1)").css("display",""),$(".moxie-shim").each(function(){$(this).height(48),$(this).width(48)})):$("div.choose-file-btn[data-uploader-id='"+e+"']").css("display","none")},removeUploadFileInPage:function(e,t,i,n){console.debug("移除页面上的文件:delFileId="+i+",uploaderId="+t),e.remove();var a=this.uploaderRefs[t];n.children(".upload-file-preview").length<a.getOption("fileNumLimit")&&($("div.choose-file-btn[data-uploader-id='"+t+"']").css("display",""),$("div.uploadimg-container[data-uploader-id='"+t+"']").children(":eq(1)").css("display",""));var s=this.uploadedImages[t];console.debug("thisUploaderFiles="+s.length),$.each(s,function(e,n){if(console.debug("loop:"+e+",fileId="+n),i===n){console.debug("删除的文件的idx="+e),console.debug("删除前文件数组="+s),s.splice(e,1),console.debug("删除后文件数组="+s);var a=(this.uploaderRefs[t],this.uploaderFileRefs[i]);return a&&console.debug("清除uploader里记录的文件.uploaderId="+t+",file="+a),!1}}),this.updateFileContainerSize(n),this.updateUploaderLimit(t,n.children(".upload-file-preview").length)},uploadedFileCacheToForm:function(){console.debug("uploadedFileCacheToForm..."),$.each(this.uploadedImages,function(e,t){console.debug("附件toForm :"+e+","+t);var i=t.join(",");$("div.choose-file-btn[data-uploader-id='"+e+"']").find("input.upload-file-store").val(i)})},deleteAllServerUploadImage:function(e,t,i){var n=this,a=[];if($.each(this.uploadedImages,function(e,t){console.debug("删除附件 :"+e+","+t),a=a.concat(t)}),e.length>0){console.info("所有附件id:"+a.join(",")),console.info("过滤掉不能删除的附件id:"+e.join(","));var s=a.filter(function(t){return-1===e.indexOf(t)});console.info("剩下需要删除的附件id:"+s.join(",")),a=s}if(a.length>0){var r=a.join(",");n.deleteServerAttas(r,t,i)}else console.debug("没有附件需要删除"),t&&t()},deleteSubFormServerUploadImages:function(e,t,i,n){var a=this;console.debug("删除子表"+e+"的第"+t+"条记录里的文件.字段名:"+i),a.uploadedFileCacheToForm(),$.each(i,function(i,s){var r=$("input.upload-file-store[name='"+e+"."+s+"']").eq(t),o=r.val();if(console.debug("删除表单域 "+s+"对应的文件="+o),null!==o&&o.length>0){if(n){console.debug("删除服务器里的文件");var l=o.split(",");$.each(l,function(e,t){a.deleteServerUploadImage(t)})}else console.debug("不删除服务器里的文件");var c=r.parents("div.choose-file-btn"),p=c.attr("data-uploader-id");console.debug("删除表单域 "+s+"对应的缓存id="+p+",清空..."),this.uploadedImages[p]=[]}})},deleteServerUploadImage:function(e,t,i){console.debug("delete attach.imgId="+e),this.deleteServerAttas(e,t,i)},deleteServerAttas:function(e,t,i){this.parentPageview.ajax({url:"file/deleteAttachment",data:{fileIds:e,token:this.formFileDelToken},success:function(){console.debug("删除已上传到服务器的临时附件成功"),t&&t()},error:function(){i&&i()}})},updateUploaderSize:function(){console.debug("更新uploader上传插件的大小"),$("div.webuploader-container").css("position","absolute"),$("div.webuploader-pick").removeClass("webuploader-pick").removeClass("webuploader-pick-hover"),$("div[id^='rt_rt_']").css({left:"0px",top:"0px",width:"100%",height:"100%","z-index":10})},getAppServerUrl:function(){var e="";return 0===e.toLowerCase().indexOf("file://")?"//ys.yyuap.com/weixin-mp-prod":e},createFileShowDiv:function(e){var t=this,i=this.getAppServerUrl(),n=e.type?e.type.toLowerCase():"",a=null;if(n.length>6&&"image/"==n.substring(0,6)){console.debug("image file."+e.id+".type="+n);var s=e.aliOSSLimitUrl,r=i+"/static/image/loading.gif",o=document.documentElement.clientWidth,l=(parseInt(o/4),s);console.info(l),this.createPrefetch(s),a=$("<img src='"+r+"' class='tab3-img'></img>");var c=new Image;c.src=l,c.onload=function(){console.debug("litterImg load over. "+this.src),a.attr("src",this.src)},c.onerror=function(){a.attr("src",i+"/static/image/fail.jpg")},this.bindClickEvent(a,function(){$.post(i+"/oss/file?filename="+e.externalUrl,function(e){var e=$.parseJSON(e);t.showImg(e.url)})})}else{var p=e.name;a=$('<a href="'+i+"/file/downloadattachment/"+e.id+'" target="_blank" class="tab3-img font-size-3 tab3-notimg-file"><i class="icon iconfont icon-enclosure"></i><br>'+p+"</a>")}var d=$('<div class="tab3-img-div upload-file-preview"></div>');return d.append(a),d},createPrefetch:function(e){var t='<link rel="prefetch prerender" href="'+e+'">';$("body").append(t)},bindClickEvent:function(e,t){$(e).on("click",function(){t&&t(),t&&t()})},updateFileContainerSize:function(e){console.debug("设置文件显示区域大小");var t=e.children(".upload-file-preview").length;t>0?e.css("height","auto"):e.css("min-height","0");var i=10;i=1===t?10:t>=3?14:7*t,e.css("width",i+"rem"),console.debug("更新文件container的width="+i+"实际结果="+e.css("width"))},createFileDelIcon:function(e,t){var i=$('<i class="upload-icon iconfont icon-delete"></i>');e.append(i),this.bindClickEvent(i,function(){t&&t()})},getAppUrl:function(){var e=location.href,t=e.indexOf("/static/");return-1===t&&(t=e.indexOf("/form/")),e.substring(0,t)},showImg:function(e){var t=this,i=(document.documentElement.clientWidth,this.getAppServerUrl()+"/static/image/loading.gif"),n=location.href.indexOf("/form/"),a=null;-1===n?(console.debug("---------其他界面显示大图"),a='<div class="img-view-bg z-index-newPage-bg bg-opactity"></div>',a+='<div class="img-view-bg z-index-newPage">',a+='\t<div class="img-whole">',a+='\t\t<img src="'+i+'" class="img-view img-filter" title="图片" id="bigImg">',a+=" \t</div>",a+="</div>"):(console.debug("---------\x3e>表单附件上传界面显示缩略图图"),a='<div class="img-view-bg-sl z-index-newPage-bg-sl bg-opactity"></div>',a+='<div class="img-view-bg-sl z-index-newPage">',a+='\t<div class="img-whole-sl">',a+='\t\t<img src="'+i+'" class="img-view-sl img-filter" title="图片" id="bigImg">',a+=" \t</div>",a+="</div>"),$("body").append(a),$("#bigImg").animate({opacity:"1"},500,function(){$(this).on("error",function(){var e=t.getAppServerUrl();$("#bigImg").attr("src",e+"/static/image/fail.jpg")}),$(this).attr("src",e)}),this.bindClickEvent(".img-view-bg",function(){$(".img-view-bg").remove()}),this.bindClickEvent(".img-view-bg-sl",function(){$(".img-view-bg-sl").remove()})}},a}),define("parts/analysis",["./common"],function(e){var t=[];return{getAnalysis_ifroms:function(e){return this.getComponentData(e),t},getComponentData:function(i){var n={};t=[];for(var a=i[0].taskbill.head[0].tabContent.billItemData,s=i[0].taskbill.body[0].tabContent,r=0;r<a.length;r++){var o=a[r];n={},n=this.processContent(o),t.push(n)}n={},n.title=i[0].taskbill.body[0].tabName,n.type="DataTable",n.items=[];for(var l=[],c=0;c<s.length;c++){var p={};p.title=i[0].taskbill.body[0].tabName,p.type="DataTable",p.num=c+1,p.items=[];for(var d=s[c].billItemData,h=0;h<d.length;h++){var u=this.processContent(d[h]);isNaN(u.content-0)||(u.type="Money"),d[h].digest&&!d[h].hasOwnProperty("leavebegintime")&&!d[h].hasOwnProperty("leaveendtime")&&!d[h].hasOwnProperty("leavehour")||d[h].hasOwnProperty("leavebegintimeother")||d[h].hasOwnProperty("leavehourother")?"Money"!==u.type||d[h].hasOwnProperty("leavehourother")||d[h].hasOwnProperty("leavebegintimeother")||l.push(u):p.items.push(u)}n.items.push(p)}if(t.push(n),l&&l.length>0){for(var f={title:"",content:0,type:"Number"},g=0;g<l.length;g++)f.title=l[g].title+"(合计)",f.amount=l[g].amount,l[g].amount&&l[g].amount.dV?(f.type="Money",f.content+=e.sumVal(l[g].amount.dV,2)-0):l[g].type="Number";if(f.content=e.thousandthValue(f.content),t.push(f),f.amount){var m={title:f.title+"大写",content:e.MoneyDX(f.content.replace(/,/g,"")),type:"Money"};t.push(m)}}},processContent:function(t){var i={};t=t||{};var n="",a="";for(var s in t)s.indexOf("itemShowName")>-1&&(a=s);for(var r in t)a&&0===a.indexOf(r)&&(n=r);if(t[n]instanceof Object)if(t[n].hasOwnProperty("year")){var o=[t[n].year,t[n].month,t[n].day];i.content=o.join("-")+" "+(t[n].time?t[n].time:"")}else i.content="";else i.content=t[n];return t.hasOwnProperty("leavehour")&&(i.content+=e.sumVal(t.leavehour.dV,0)-0),n.indexOf("pk_leavetype")>-1&&(i.content=t[n].text),t.hasOwnProperty("amount")&&(i.amount=t.amount),i.title=t[a],i.type="Text",i.digest=t.digest,i}}}),define("logic/detail",["../parts/common","utils","../libs/plupload/form-file-uploader","../parts/analysis","../parts/language"],function(e,t,i,n,a){function s(e){var i=this;this.item=[],this.pageview=e.pageview,this.currentTodoTaskInitAttCnt=0,this.fileMaxNum=50,this.fileNum=0,t.deviceInfo().isAndroid?window.setTimeout(function(){i.loadData()},300):i.loadData()}return s.prototype={onPageResume:function(){this.item=[],this.loadData()},loadData:function(){var e=this;this.pageview.showLoading({text:a.formTips.onLoading,timeout:8e3,reLoadCallBack:function(){e._loadData()}}),e._loadData()},_loadData:function(){var e=this,t={url:"/process/getApply",type:"GET",data:{taskId:this.pageview.params.taskId||"",cuserId:this.pageview.params.cuserId||"",billId:this.pageview.params.billId||"",billType:this.pageview.params.billType||""},success:function(t){var i=JSON.parse(t.data);setTimeout(function(){e.pageview.delegate("userinfo_name",function(t){e.instName=i[0].billtypename,t.setText(e.instName)}),e.pageview.refs.result_text.innerText.html("审批中"),e.pageview.refs.result_text.innerText.css("color","#e7a757"),e.pageview.refs.result_text.$el.show();var t=e.pageview.refs.top_view.components.viewpager;jsonList=n.getAnalysis_ifroms(i),t.curPageViewItem.contentInstance.refs.detail_repeat.bindData(jsonList),e.item.push({label:"同意",id:"",type:"agree"}),e.item.push({label:"驳回",id:"",type:"reject"}),e.initBtn(),e.loadProcessData(),e.pageview.hideLoading(!0)},500)},error:function(t){e.pageview.showTip({text:t.msg,duration:2e3})}};this.pageview.ajax(t)},loadProcessData:function(){var e=this,t={url:"/process/getApprove",type:"GET",data:{taskId:this.pageview.params.taskId||"",cuserId:this.pageview.params.cuserId||"",billId:this.pageview.params.billId||"",billType:this.pageview.params.billType||""},success:function(t){var i=JSON.parse(t.data);e.processInstances=i},error:function(t){e.pageview.showTip({text:t,duration:2e3})}};this.pageview.ajax(t)},initBtn:function(){if(this.item.length>4){for(var e=[],t=[],i=0;i<this.item.length;i++)i>=3?t.push(this.item[i]):e.push(this.item[i]);0===e.length?(this.pageview.refs.buttonGroup.$el.hide(),this.pageview.refs.buttonGroup.$el.css({"background-color":"rgb(247, 247, 247)"}),this.pageview.refs.buttonGroup.$el.css({"border-top":"1px solid #eee"})):(this.pageview.refs.buttonGroup.$el.show(),this.pageview.refs.buttonGroup.$el.css({"border-top":"1px solid #eee"}),this.pageview.refs.bottomToolBar.$el.css({"background-color":"rgb(255, 255, 255)"}),this.pageview.refs.buttonGroup.$el.css({"background-color":"rgb(255, 255, 255)"})),this.pageview.refs.moreRepeat.bindData(t),this.pageview.refs.buttonGroup.bindData(e),this.pageview.refs.bottomToolBar.$el.show(),this.pageview.refs.splitline.$el.show(),this.pageview.refs.moreBtn.$el.show()}else 0===this.item.length?(this.pageview.refs.bottomToolBar.$el.hide(),this.pageview.refs.buttonGroup.$el.css({"background-color":"rgb(247, 247, 247)"}),this.pageview.refs.buttonGroup.$el.css({"border-top":"rgb(247, 247, 247)"})):(this.pageview.refs.bottomToolBar.$el.show(),this.pageview.refs.buttonGroup.$el.css({"background-color":"rgb(255, 255, 255)"}),this.pageview.refs.bottomToolBar.$el.css({"background-color":"rgb(255, 255, 255)"})),this.pageview.refs.buttonGroup.bindData(this.item),this.pageview.refs.splitline.$el.hide(),this.pageview.refs.moreBtn.$el.hide()},viewpager_init:function(e,t){this.viewpager=e},result_logo_init:function(e,t){e.config.defaultSrc=a.iconUrl.agreee},userinfo_name_init:function(e,t){e.config.text=a.formTips.onLoading},segment_init:function(e,t){e.config.items=[{title:a.formTips.formDetail},{title:a.formTips.processDetail},{title:a.formTips.attachment}]},segment_change:function(e,t){var i=this;if(!t.nochange){var n=t.item,a=n.datasource,s=$.trim(a.title);"详情"===s||"Form"===s?(this.initBtn(),this.viewpager.showItem("detailContent_detail",{type:"content"})):"流程"===s||"Process"===s?(this.initBtn(),this.viewpager.showItem("detailProcess_detail",{type:"process",parentThis:this}),i.processInstances&&window.setTimeout(function(){i.viewpager.curPageViewItem.contentInstance.refs.middle_flow_repeat.bindData(i.processInstancesHistory(i.processInstances))},200)):this.viewpager.showItem("detailAttachment_detail",{type:"attachment",parent:this})}},processInstancesHistory:function(e){for(var t=e[0].approvehistorylinelist,i=[],n=e[0].flowhistory,a=0;a<t.length;a++)i.push({activityType:"approveStartEvent",assignee:"",deleteReason:"",dueDate:"",endTime:t[a].handledate||"",memberId:"",name:"",processDefinitionId:"",taskAuditDesc:t[a].action||"",taskComments:t[a].note||"",taskId:"",userName:t[a].handlername||"",currentUserId:""});return n.forEach(function(e,t){"submit"===e.unittype&&i.push({activityType:"startEvent",assignee:"",deleteReason:"",dueDate:"",endTime:e.time,startTime:e.time,memberId:"",name:"",processDefinitionId:"",taskAuditDesc:"",taskComments:e.action,taskId:"",userName:e.personlist[0].name,currentUserId:""})}),i},morePopover_init:function(e,t){this.morePopver=e},moreBtn_click:function(e,t){this.morePopver.show(e)},moreRepeat_itemclick:function(e,t){this.buttonGroupClick(e),this.morePopver.hide()},buttonGroup_itemclick:function(e,t){this.buttonGroupClick(e)},buttonGroupClick:function(e){var t={action:e.datasource.type,taskId:this.pageview.params.taskId||"",cuserId:this.pageview.params.cuserId||"",billId:this.pageview.params.billId||"",billType:this.pageview.params.billType||""};this.pageview.go("deal",t)},initUploader:function(e){var t=this;this.loadToken(function(e){t.token=e});var n=e.$el,a=$(".flow_repeat"),s=this.fileMaxNum;this.fileUploader||(this.fileUploader=new i(this.pageview,this),this.uploaderId=this.fileUploader.initUploader(n,a,this.pageview.params.taskId,s),setTimeout(function(){t.fileUploader.updateUploaderSize()},100))},loadFilesData:function(){this.viewpager.curPageViewItem.contentInstance.pageview.plugin._loadData()},loadToken:function(e){this.pageview.ajax({url:"user/getToken",success:function(t){e(t)},error:function(e){console.error(e)}})}},s}),define("pages/detail",["../logic/detail","../parts/common","utils"],function(e,t,i){return{pluginClass:e,style:{backgroundColor:"#F7F7F7"},root:["top_view","bottomToolBar","morePopover"],components:{top_view:{type:"view",ref:!0,style:{flex:1,background:"#f2f3f4"},root:["userinfo_warp","segment","viewpager"]},userinfo_warp:{type:"view",ref:!0,className:"bottom-half-line",style:{flexDirection:"row",alignItems:"flex-start",background:"#fff",padding:20,zIndex:11},root:["user_icon","userinfo_rightwarp","result_logo","result_text"]},user_icon:{type:"image",ref:!0,src:"./imgs/unknow_person.png",title:"",style:{width:55,height:55,fontSize:18,backgroundColor:"rgba(255, 255, 255,0)",marginLeft:13,marginRight:13,borderRadius:"100%"}},userinfo_rightwarp:{type:"view",style:{flex:1,justifyContent:"center",height:55},root:["userinfo_name"]},result_text:{type:"text",text:"进行中",ref:!0,style:{display:"none",position:"absolute",fontSize:14,right:16,top:17,pointerEvents:"none",maxWidth:68,textAlign:"center"}},result_logo:{type:"image",defaultSrc:"./imgs/agree.png",ref:!0,style:{display:"none",position:"absolute",top:-25,width:160,right:-30,opacity:"1",background:"rgba(255,255,255,0)",transition:"all 150ms ease","-webkit-backface-visibility":"hidden","-webkit-transform-style":"preserve-3d","-webkit-transform":"translate3d(0,0,0)",pointerEvents:"none"}},userinfo_name:{type:"text",ref:!0,text:"加载中...",className:"title-line-clamp",style:{color:"#262626",fontSize:16,paddingRight:80}},segment:{type:"segment_android",ref:!0,items:[{title:"详情"},{title:"流程"},{title:"附件"}],root:["segment_item"],className:"bottom-half-line",style:{height:38,color:"#262626",backgroundColor:"#fff"},itemStyle:{paddingBottom:2}},segment_item:{type:"text",text:"加载中...",
text_bind:"title",selectedClassName:"yy-sgm-item-selected-android",style:{color:"#262626",fontSize:15}},viewpager:{type:"viewpager",className:"detail_viewpager",defaultKey:"detailContent_detail",style:{flex:1}},bottomToolBar:{type:"view",ref:!0,style:{height:46,flexDirection:"row",backgroundColor:"#fff",alignItems:"center"},root:["buttonGroup","splitline","moreBtn"]},splitline:{type:"view",ref:!0,style:{borderLeft:"1px solid rgb(220, 220, 220)",height:14}},buttonGroup:{type:"repeat",ref:!0,root:["toolbarIcon"],className:"top-half-line",style:{flex:1,alignItems:"center",backgroundColor:"rgb(247, 247, 247)",height:46},itemStyle:{flex:1,zIndex:11,justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},splitStyle:{borderLeft:"1px solid #ededed",height:16}},toolbarIcon:{type:"icon",text_bind:"label",style:{flex:1,width:"100%"},iconStyle:{color:"#262626",fontSize:14},textStyle:{color:"#262626",marginLeft:5,width:"100%",textAlign:"center",fontSize:16}},moreBtn:{type:"icon",font:"cap_e90d",ref:!0,className:"top-half-line",iconStyle:{color:"#262626",fontSize:16},style:{display:"none",height:46,width:30,padding:"0 42px",borderTop:"1px solid #eee"}},morePopover:{type:"popover",root:["moreRepeat"],animate:{mode:"2"},bkCoverStyle:{backgroundColor:"rgba(230, 230, 230, 0.2)"},arrowStyle:{backgroundColor:"#fff",zIndex:2,"-webkit-box-shadow":"9px 8px 13px #9C9C9C","box-shadow":"9px 8px 13px #9C9C9C"},style:{"-webkit-box-shadow":"0px 8px 13px #9C9C9C","box-shadow":"0px 8px 13px #9C9C9C",minWidth:88,backgroundColor:"#fff",minHeight:50,height:"auto",borderRadius:"7px"}},moreRepeat:{type:"repeat",ref:!0,root:["moreRepeat_icon"],style:{flexDirection:"column",flex:1},itemStyle:{justifyContent:"center",alignItems:"stretch",height:40,padding:"0 5px"}},moreRepeat_icon:{type:"icon",text:"按钮",text_bind:"label",textStyle:{fontSize:14,color:"#292f33"}}}}}),define("parts/format",[],function(){var e={"application/msword":{ext:"word.png"},"application/docx":{ext:"word.png"},"application/DOCX":{ext:"word.png"},"application/doc":{ext:"word.png"},"application/DOC":{ext:"word.png"},"application/pdf":{ext:"pdf.png"},"application/pgp-signature":{ext:"other.png"},"application/postscript":{ext:"other.png"},"application/rtf":{ext:"other.png"},"application/vnd.ms-excel":{ext:"exc.png"},"application/xlsx":{ext:"exc.png"},"application/XLSX":{ext:"exc.png"},"application/xls":{ext:"exc.png"},"application/XLS":{ext:"exc.png"},"application/vnd.ms-powerpoint":{ext:"ppt.png"},"application/ppt":{ext:"ppt.png"},"application/PPT":{ext:"ppt.png"},"application/pptx":{ext:"ppt.png"},"application/PPTX":{ext:"ppt.png"},"application/zip":{ext:"zipflie.png"},"application/x-shockwave-flash":{ext:"other.png"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{ext:"word.png"},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{ext:"word.png"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{ext:"exc.png"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{ext:"ppt.png"},"application/vnd.openxmlformats-officedocument.presentationml.template":{ext:"other.png"},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{ext:"other.png"},"application/x-javascript":{ext:"other.png"},"application/json":{ext:"other.png"},"audio/mpeg":{ext:"other.png"},"audio/x-wav":{ext:"music.png"},"audio/x-m4a":{ext:"music.png"},"audio/ogg":{ext:"music.png"},"audio/aiff":{ext:"other.png"},"audio/flac":{ext:"other.png"},"audio/aac":{ext:"other.png"},"audio/ac3":{ext:"other.png"},"audio/x-ms-wma":{ext:"other.png"},"image/bmp":{ext:"pic.png"},"image/gif":{ext:"pic.png"},"image/jpeg":{ext:"pic.png"},"image/JPEG":{ext:"pic.png"},"image/jpg":{ext:"pic.png"},"image/JPG":{ext:"pic.png"},"image/photoshop":{ext:"other.png"},"image/png":{ext:"pic.png"},"image/PNG":{ext:"pic.png"},"image/svg+xml":{ext:"other.png"},"image/tiff":{ext:"other.png"},"text/plain":{ext:"text.png"},"text/txt":{ext:"text.png"},"text/html":{ext:"other.png"},"text/css":{ext:"other.png"},"text/csv":{ext:"other.png"},"text/rtf":{ext:"other.png"},"video/mpeg":{ext:"video.png"},"video/quicktime":{ext:"video.png"},"video/mp4":{ext:"video.png"},"video/x-m4v":{ext:"video.png"},"video/x-flv":{ext:"video.png"},"video/x-ms-wmv":{ext:"video.png"},"video/avi":{ext:"video.png"},"video/webm":{ext:"video.png"},"video/3gpp":{ext:"video.png"},"video/3gpp2":{ext:"video.png"},"video/vnd.rn-realvideo":{ext:"video.png"},"video/ogg":{ext:"video.png"},"video/x-matroska":{ext:"video.png"},"application/vnd.oasis.opendocument.formula-template":{ext:"other.png"},"application/octet-stream":{ext:"other.png"},"application/rar":{ext:"zipflie.png"},unknow:{ext:"other.png"},doc:{ext:"word.png"},docx:{ext:"word.png"},xls:{ext:"exc.png"},xlsx:{ext:"exc.png"},xlsm:{ext:"exc.png"},mp4:{ext:"video.png"},video:{ext:"video.png"},mov:{ext:"video.png"},avi:{ext:"video.png"},wmv:{ext:"video.png"},rmvb:{ext:"video.png"},mpeg:{ext:"video.png"},mpg:{ext:"video.png"},mp3:{ext:"audio.png"},wav:{ext:"audio.png"},flac:{ext:"audio.png"},aif:{ext:"audio.png"},wma:{ext:"audio.png"},amr:{ext:"audio.png"},aac:{ext:"audio.png"},rar:{ext:"zipflie.png"},zip:{ext:"zipflie.png"},arj:{ext:"zipflie.png"},gz:{ext:"zipflie.png"},z:{ext:"zipflie.png"},png:{ext:"pic.png"},jpg:{ext:"pic.png"},jpeg:{ext:"pic.png"},bmp:{ext:"pic.png"},pic:{ext:"pic.png"},tif:{ext:"pic.png"},gif:{ext:"pic.png"},text:{ext:"text.png"},txt:{ext:"text.png"},pdf:{ext:"pdf.png"},pptx:{ext:"ppt.png"},ppt:{ext:"ppt.png"}};return{getFormat:function(t){var i=t,n=new RegExp("("+i+")$","gi");if(null!==t&&void 0!==t){var a="";return $.each(e,function(e,t){n.test(e)&&(a=e)}),e[t]||e[a]||e.unknow}return e.unknow}}}),define("logic/detailAttachment",["../parts/common","utils","../../../components/dialog","../parts/language","../parts/format"],function(e,t,i,n,a){function s(e){this.pageview=e.pageview,this._taskId=this.pageview.params.taskId,this.parentThis=this.pageview.viewpagerParams.parent,this.loadData()}return s.prototype={onPageResume:function(){this._loadData()},loadData:function(){var e=this;this.applyHistory=window._applyHistory,this.pageview.showLoading({text:n.formTips.onLoading,timeout:8e3,reLoadCallBack:function(){e._loadData()}}),e._loadData()},_loadData:function(){var e=this,t={url:"/process/getTaskAttachments",type:"GET",data:{taskId:e.parentThis.pageview.params.taskId,cuserId:e.parentThis.pageview.params.cuserId,billId:e.parentThis.pageview.params.billId,billType:e.parentThis.pageview.params.billType},success:function(t){e.pageview.hideLoading(!0),e.pageview.delegate("flow_repeat",function(e){e.bindData(t.data)})},error:function(t){e.pageview.hideLoading(!0);var i=[{name:"测试word文档",status:"审批中",time:"2018-12-05 12:55:30",author:"陈展鹏",type:"png",aliOSSUrl:"https://static.yonyoucloud.com/102136/3160785/201812/7/1544162843134f4e62c39e5228c660471c4397a1cb.jpg"},{name:"八卦图片",status:"审批中",time:"2018-11-12 12:55:30",author:"周武王",type:"application/pdf",aliOSSUrl:"https://ncc-ys-prod-oss.oss-cn-beijing.aliyuncs.com/xcnisnhw/52d5f399-47f7-4ce1-b7bf-6a4d9374cdda/1545881640347_3.%20%E5%91%98%E5%B7%A5%E8%BD%AC%E6%AD%A3%E5%AE%A1%E6%89%B9%E8%A1%A8.pdf"}];e.pageview.delegate("flow_repeat",function(e){e.bindData(i)})}};this.pageview.ajax(t)},list_nodata_text_init:function(e,t){e.config.text=n.formTips.noAttachment},format_image_init:function(e,t){var i=e.datasource.type?e.datasource.type.toLowerCase():"",n=e.datasource.aliOSSUrl?e.datasource.aliOSSUrl.split("."):[],s=n[n.length-1],r=["jpg","jpeg","gif","png","bmp"];i||-1!==$.inArray(s,r)?$.inArray(s,r)>-1&&(i="image/"+s):i="application/"+s,i.indexOf("image")>-1||a.getFormat(i)&&"pic.png"===a.getFormat(i).ext?e.config.src=e.datasource.aliOSSLimitUrl||e.datasource.aliOSSUrl+"?x-oss-process=image/resize,m_fixed,h_60,w_60":e.config.src="./imgs/"+(a.getFormat(i)?a.getFormat(i).ext:a.getFormat("unkonw").ext)},file_size_init:function(e,t){var i=n.formAction.attaContributor;e.config.text=i+e.datasource.author},atta_contributor_click:function(t,a){var s=this;s.deleteDialog=new i({mode:3,wrapper:s.parentThis.pageview.$el,contentText:n.formTips.makeSureDeleteFile,btnDirection:"row",buttons:[{title:n.formAction.cancel,style:{height:45,fontSize:16,color:e.titleColor,borderRight:"1px solid #eee"},onClick:function(){s.deleteDialog.hide()}},{title:n.formAction.confirm,style:{height:45,fontSize:16,color:"#37b7fd"},onClick:function(){s.deleteDialog.hide(),s.pageview.showLoading({text:n.formTips.delete,timeout:8e3}),s.parentThis.fileUploader.deleteServerUploadImage(t.datasource.id,function(e){s.pageview.hideLoading(!0),t.rowInstance.remove(),s.parentThis.fileNum=t.rowInstance.parent.datasource.length,s.pageview.showTip({text:n.formTips.deleteSuccess,duration:1e3})},function(){s.pageview.hideLoading(!0),s.pageview.showTip({text:n.formTips.deleteFail,duration:1e3})})}}]}),s.deleteDialog.show()},title_view_init:function(e,t){e.config.text=e.datasource.name},flow_repeat_itemclick:function(e,t){e.datasource.type&&e.datasource.type;window.open(e.datasource.aliOSSUrl)},downloadFile:function(e,t){window.open(t)},atta_time_init:function(e,i){e.config.text=t.timestampToTimeStr(e.datasource.time)}},s}),define("pages/detailAttachment",["../logic/detailAttachment","../parts/common","utils"],function(e,t,i){return{pluginClass:e,style:{backgroundColor:"#F7F7F7"},root:["flow_repeat"],components:{flow_repeat:{type:"repeat",ref:!0,style:{marginTop:10,background:"#F7F7F7",flexDirection:"column",paddingBottom:20,height:"96%"},itemStyle:{flexDirection:"row",background:"#fff",height:65,borderBottom:"solid 1px #EDEDED"},nodata:"list_nodata",items:[],root:["flow_view"]},list_nodata:{type:"view",root:["list_nodata_img","list_nodata_text"],style:{justifyContent:"center",alignItems:"center",height:"100%"}},list_nodata_img:{type:"image",src:"./imgs/yunshen_nodata.png",style:{w:80,h:80,background:"#f7f7f7",marginBottom:14}},list_nodata_text:{type:"text",text:"暂无内容",style:{fontSize:14,color:"#adadad"}},flow_view:{type:"view",root:["flow_left","flow_middle","flow_right"],style:{flexDirection:"row",flex:1,alignItems:"center",justifyContent:"center"}},flow_left:{type:"view",style:{width:40,justifyContent:"center",display:"flex",height:"100%",marginLeft:12,marginRight:14},root:["format_image"]},format_image:{type:"image",src:"./imgs/exc.png",ref:!0,style:{borderRadius:4}},flow_middle:{type:"view",style:{flex:1,justifyContent:"center"},root:["title_view","file_size"]},title_view:{type:"text",text_bind:"name",numberofline:1,style:{fontSize:16,color:"#262626",display:"block",overflow:"hidden",textOverflow:"ellipsis",paddingBottom:2}},file_size:{type:"text",text:"贡献者：",style:{fontSize:13,color:"#9E9E9E"}},flow_right:{type:"view",style:{width:120,flexDirection:"column",alignItems:"flex-end",justifyContent:"center",paddingRight:12},root:["atta_time","atta_contributor"]},atta_time:{type:"text",text:"00:00",style:{fontSize:13,paddingBottom:3}},atta_contributor:{type:"text",text:"删除",style:{display:"none",fontSize:13,color:"#0093ff"}}}}}),define("parts/analysisContent",["./common","utils","../parts/language"],function(e,t,i){return{getAnalysisContent:function(e,t){var i=e.datasource.type;switch(e.datasource.comHeight&&(e.config.style.height=e.datasource.comHeight+"px",e.config.style.isTextarea=!0),i){case"Money":""!==e.config.text&&"0"!==e.config.text&&"零元整"!==e.config.text?("number"==typeof e.config.text&&(e.config.text=e.config.text+""),e.config.text&&(e.config.text.indexOf("-")>-1&&isNaN(e.config.text[1])?(e.config.style.color="#ff0000",e.config.text=e.config.text.slice(1)+" "):e.config.text=e.config.text+" ")):e.config.text="","red"===e.config.$$datasource.color&&(e.config.style.color="#ff0000");break;case"boolean":var n="1"===e.datasource.content?"是":"否";e.config.text=n;break;case"DateCalculate":e.config.text?e.config.text+="":e.config.text="0 天"}}}}),define("logic/detailContent",["utils","../parts/format","../parts/analysisContent","../../../components/dialog","../parts/language"],function(e,t,i,n,a){function s(e){this.pageview=e.pageview,this.itemNum=1,this.classContent={"alert-none":{"padding-left":"10px",color:"rgb(85, 85, 85)","border-color":"rgb(204, 204, 204)"},"alert-success":{"padding-left":"10px",color:"rgb(60, 118, 61)","background-color":"rgb(223, 240, 216)"},"alert-info":{"padding-left":"10px",color:"rgb(49, 112, 143)","background-color":"rgb(217, 237, 247)"},"alert-warning":{"padding-left":"10px",color:"rgb(138, 109, 59)","background-color":"rgb(252, 248, 227)"},"alert-danger":{"padding-left":"10px",color:"rgb(169, 68, 66)","background-color":"rgb(242, 222, 222)"}}}return s.prototype={detail_repeat_iteminit:function(e,t){"Paragraph"===e.datasource.type?e.$el.css(this.classContent[e.datasource.style]):"DataTable"===e.datasource.type&&window.setTimeout(function(){e.refs.datatable_repeat.bindData(e.datasource.items),e.refs.datatable_repeat.$el.show()},100)},detail_item_content_init:function(e,t){"DataTable"===e.datasource.type&&e.$el.hide(),i.getAnalysisContent(e,this)},detail_item_content_click:function(e,t){},detail_item_title_init:function(e,t){switch(e.datasource.type){case"file":case"File":e.config.style.minHeight=30;break;case"Paragraph":case"Picture":case"DividingLine":case"DataTable":e.$el.hide();break;default:var i=e.datasource.title.length;(e.datasource.content?e.datasource.content.length:0)+i<=24?(e.config.style.width="auto",e.config.style.paddingRight="10"):(e.config.style.width="auto",e.config.style.maxWidth="40%",e.config.style.paddingRight="10"),"Text"===e.datasource.type&&(e.config.style.marginTop="10")}},detail_iamge_init:function(e,t){"Picture"===e.datasource.type?e.config.src=e.datasource.url:e.$el.hide()},detail_DividingLine_init:function(e,t){"DividingLine"!==e.datasource.type?e.$el.hide():e.rowInstance.$el.css({"min-height":"0px","border-bottom":"1px solid rgb(237, 237, 237)"})},detail_view_init:function(e,t){"file"!==e.datasource.type&&"File"!==e.datasource.type||e.$el.css({"flex-direction":"column",width:"100%"})},detail_item_files_init:function(e,t){var i=e;if("file"===e.rowInstance.datasource.type){var n={url:"/process/getInstanceAttachments",type:"POST",data:{fileIds:e.rowInstance.datasource.content||""},success:function(e){0===e.code&&i.bindData(e.data)},error:function(e){}};this.pageview.ajax(n)}else"File"===e.rowInstance.datasource.type?e.rowInstance.datasource.content&&i.bindData(JSON.parse(e.rowInstance.datasource.content)):e.config.style.display="none"},btnAddDoc_click:function(e,t){var i=this.pageview.params.instId,n=window._applyHistory.instData.name,a=window._applyHistory.mainForm,s=a?a.source:"";this.pageview.go("form",{id:i,title:encodeURIComponent(n),source:s,formType:"addFormMore"})},detail_item_files_itemclick:function(e,t){e.datasource.type},detail_files_view_left_init:function(e,i){e.datasource.url||(e.datasource.url=e.datasource.src||e.datasource.url.aliOSSUrl);var n,a=e.datasource.url?e.datasource.url.split("."):[];n=e.datasource.type?e.datasource.type:a.length>0?a[[a.length-1]].toLocaleLowerCase():"unknow",e.datasource.picOnly?e.config.src=e.datasource.src||"./imgs/"+t.getFormat(n).ext:e.config.src="./imgs/"+t.getFormat(n).ext||e.datasource.src},detail_files_view_right_init:function(e,t){e.datasource.picOnly&&e.$el.hide()},detail_repeat_itemclick:function(e,t){},datatable_view_item_content_click:function(e,t){},datatable_view_item_content_init:function(e,t){i.getAnalysisContent(e,this)},datatable_view_title_init:function(e,t){e.config.preText=e.datasource.num},datatable_view_item_title_init:function(e,t){var i=e.datasource.title.length;(e.datasource.content?e.datasource.content.length:0)+i<=24?(e.config.style.width="auto",e.config.style.paddingRight="10"):(e.config.style.width="auto",e.config.style.maxWidth="50%",e.config.style.paddingRight="10")},datatable_view_item_init:function(e,t){e.bindData(e.rowInstance.datasource.items)}},s}),define("pages/detailContent",["../logic/detailContent","../parts/common","utils"],function(e,t,i){return{pluginClass:e,style:{backgroundColor:"#F7F7F7"},root:["detail_repeat"],components:{datatable_repeat:{type:"repeat",ref:!0,root:["datatable_view"],style:{display:"none",width:"100%",backgroundColor:"#fff",flexDirection:"column"},itemStyle:{minHeight:40,flexDirection:"row"},itemClassName:"bottom-half-line"},datatable_view:{type:"view",root:["datatable_view_title","datatable_view_item"],style:{flexDirection:"column",width:"100%"}},datatable_view_title:{type:"text",text_bind:"title",preText:"1",preTextStyle:{backgroundColor:"#F39801",color:"rgb(255, 255, 255)",borderRadius:"50%",fontSize:12,w:15,lineHeight:14,marginRight:4,textAlign:"center"},style:{backgroundColor:"rgb(251,251,251)",color:"#9E9E9E",fontSize:13,paddingLeft:14,height:40}},datatable_view_item:{type:"repeat",root:["datatable_view_item_title","datatable_view_item_content"],style:{display:"inline",width:"100%",backgroundColor:"#fff"},itemStyle:{minHeight:30,flexDirection:"row"}},datatable_view_item_title:{type:"text",text_bind:"title",style:{color:"#9E9E9E",fontSize:13,paddingLeft:14}},datatable_view_item_content:{type:"text",text_bind:"content",style:{color:"#262626",fontSize:13,textAlign:"right",flex:1,paddingRight:12}},detail_repeat:{type:"repeat",ref:!0,root:["detail_view"],style:{display:"inline",width:"100%",backgroundColor:"#fff",marginTop:10},itemStyle:{minHeight:40,flexDirection:"row",widht:"100%"},itemClassName:"bottom-half-line"},detail_view:{type:"view",root:["detail_item_title","detail_item_content","detail_iamge","detail_DividingLine","datatable_repeat"],style:{flexDirection:"row",width:"100%"}},detail_DividingLine:{type:"text",style:{height:1,borderBottom:"1px solid rgb(237, 237, 237)",borderTopColor:"rgb(237, 237, 237)",borderRightColor:"rgb(237, 237, 237)",borderLeftColor:"rgb(237, 237, 237)",marginBottom:10,paddingBottom:10,width:"100%"}},detail_item_title:{type:"text",text:"title:",text_bind:"title",ref:!0,style:{color:"#9E9E9E",fontSize:13,paddingLeft:13,width:80}},detail_item_content:{type:"text",text:"content",text_bind:"content",numberofline:2e3,style:{flex:1,color:"#262626",fontSize:13,padding:12,textAlign:"right"}},detail_iamge:{type:"image",style:{width:"100%"}}}}}),define("logic/detailProcess",["../parts/common","utils","../../../components/dialog","../parts/language"],function(e,t,i,n){function a(e){this.pageview=e.pageview,this.parentThis=this.pageview.viewpagerParams.parentThis}return a.prototype={flow_right_content_right_init:function(e,i){if("startEvent"===e.datasource.activityType){var n=null===e.datasource.endTime?e.datasource.startTime:e.datasource.endTime;if(!n)return;e.config.text=t.timestampToTimeStr(new Date(n).getTime(),!0)}else e.datasource.activityType?this.setAnalysis(e,"time"):e.rowInstance.$el.hide()},flow_right_content_middle_bottom_title_init:function(e,t){"startEvent"===e.datasource.activityType?e.config.text=n.formTips.SubmitApplication:this.setAnalysis(e,"status")},left_round_init:function(e,t){this.setAnalysis(e,"icon")},flow_right_content_left_init:function(e,i){if(!e.datasource.pic){var n=t.getImgTitle(e.datasource.userName);e.setTitle(n),e.config.style.backgroundColor=t.getImgBg(n)}},setAnalysis:function(e,i){if("time"===i)e.datasource.endTime&&-1===e.datasource.endTime.indexOf("9999")?e.config.text=t.timestampToTimeStr(new Date(e.datasource.endTime).getTime(),!0):e.config.text="";else if("status"===i){var a=e.datasource.taskComments?e.datasource.taskComments:"",s=e.datasource.taskAuditDesc||(e.datasource.endTime&&-1===e.datasource.endTime.indexOf("9999")?n.formAction.agree:n.formTips.tasksToProcess);e.config.text=s+" "+a}else"icon"===i&&(e.datasource.endTime||e.datasource.taskAuditDesc?(e.config.iconStyle.color="#56CFAE",e.config.font="cap_e90a"):(e.config.font="cap_e90b",e.config.iconStyle.color="#F39801"))}},a}),define("pages/detailProcess",["../logic/detailProcess","../parts/common","utils"],function(e,t,i){return{pluginClass:e,style:{backgroundColor:"#F7F7F7"},root:["middle_flow_repeat"],components:{middle_flow_repeat:{type:"repeat",ref:!0,style:{background:"rgb(247, 247, 247)",flexDirection:"column"},itemStyle:{flexDirection:"row",background:"rgb(247, 247, 247);"},root:["flow_left","flow_right"]},flow_left:{type:"view",ref:!0,root:["left_line","left_round"],style:{width:24}},left_line:{type:"text",text:" ",ref:!0,style:{borderLeft:"solid 1px #e6e6e6",background:"#e6e6e6",height:"100",position:"absolute",left:22,bottom:22}},left_round:{type:"icon",font:"cap_e90a",ref:!0,iconStyle:{color:"#56CFAE",borderRadius:"50%",fontSize:18,backgroundColor:"#fff"},style:{position:"absolute",right:"-8px",top:42,w:18,borderRadius:"50%",zIndex:11}},flow_right:{type:"view",ref:!0,root:["flow_right_arrow","flow_right_content"],style:{flex:1,left:25,top:20,marginBottom:20,marginRight:48,borderRadius:6,paddingLeft:10,backgroundColor:"#fff",boxShadow:"0px 0px 0px 1px #ededed"}},flow_right_arrow:{type:"text",text:" ",ref:!0,style:{display:"none",position:"absolute",top:20,left:-9,width:0,height:0,borderTop:"10px solid transparent",borderRight:"10px solid #fff",borderBottom:"10px solid transparent"}},flow_right_content:{type:"view",ref:!0,root:["flow_right_content_left","flow_right_content_middle","flow_right_content_right"],style:{flexDirection:"row",alignItems:"flex-start",paddingTop:12,paddingBottom:12,position:"relative"}},flow_right_content_left:{type:"image",src_bind:"pic",src:"pic",title_bind:"userName",style:{w:40,backgroundColor:"#eee",borderRadius:"50%",marginRight:14,top:1}},flow_right_content_middle:{type:"view",root:["flow_right_content_middle_top","flow_right_content_middle_bottom"],style:{flexDirection:"column",flex:1,marginRight:14,top:3}},flow_right_content_middle_top:{type:"text",text_bind:"userName",style:{fontSize:16,lineHeight:16,marginBottom:4,color:"#292F33"}},flow_right_content_middle_bottom:{type:"view",root:["flow_right_content_middle_bottom_title","flow_right_content_middle_bottom_image_repeat"],style:{flexDirection:"column",paddingRight:60}},flow_right_content_middle_bottom_title:{type:"text",text:"状态加载中...",style:{fontSize:14,lineHeight:21,color:"#9E9E9E"}},flow_right_content_middle_bottom_image_repeat:{type:"repeat",ref:!0,root:["flow_right_content_middle_bottom_image_repeat_item"],style:{flexWrap:"wrap"},itemStyle:{margin:"5px 10px 5px 0"}},flow_right_content_middle_bottom_image_repeat_item:{type:"image",src_bind:"pic",style:{w:40}},flow_right_content_right:{type:"text",text_bind:"startTime",style:{fontSize:12,lineHeight:12,height:"100%",marginRight:14,position:"absolute",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-end",right:0,top:0,color:"#ADADAD",zIndex:10}}}}}),define("logic/waitmeapprove",["../parts/common","utils","../parts/language"],function(e,t,i){function n(e){this.pageview=e.pageview,this.countNum=this.pageview.params.countNum,this.loadNum()}return n.prototype={onPageResume:function(){window.changeFormStatus&&this.viewpager.curPageViewItem.contentInstance.refs.listview.loadFirstPageData({parentAnimate:!0})},loadNum:function(){},searchview_init:function(e,t){this.searchview=e,this.searchview.show=!0,window.pageViewTitle?(e.config.style.display="none","commonlist_waitmyapprove"===window.pageViewTitle&&(e.config.style.display="block")):e.config.style.display="block"},segment_item_init:function(e){e.config.text=i.formTips.tasksProcessed;var t=e.datasource.title;"待我审批"!==t&&"Pending"!==t||(this.waitmeapproveLabel=e,void 0!==this.countNum&&null!==this.countNum&&(e.config.text=i.formTips.tasksToProcess))},viewpager_init:function(e,t){this.viewpager=e},segment_change:function(e,t){if(!t.nochange){var i=t.item,n=i.datasource,a=n.title;this.searchview.$el.show(),this.searchview.show=!0,"我已审批"===a||"Approved"===a?this.viewpager.showItem("commonlist_waitmyapprovedone",{type:"done"}):this.viewpager.showItem("commonlist_waitmyapprove",{type:"waiting"})}},searchInput_init:function(e,t){e.config.cancel=i.formAction.cancel},searchInput_cancel:function(e,t){(t.value||this.searchValue)&&(this.searchValue=!1,e.input.val(""),this.viewpager.curPageViewItem.contentInstance.refs.listview.ajaxConfig.data.start=0,this.viewpager.curPageViewItem.contentInstance.refs.listview.ajaxConfig.data.pageNum=1,this.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.keyword="",this.viewpager.curPageViewItem.contentInstance.refs.listview.loadFirstPageData({parentAnimate:!0}))},searchInput_search:function(e,t){t.value&&(this.searchValue=!0),this.viewpager.curPageViewItem.contentInstance.refs.listview.ajaxConfig.data.start=0,this.viewpager.curPageViewItem.contentInstance.refs.listview.ajaxConfig.data.pageNum=1,this.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.categoryIds=null,this.viewpager.curPageViewItem.contentInstance.refs.listview.config.ajaxConfig.data.keyword=t.value,this.viewpager.curPageViewItem.contentInstance.refs.listview.loadFirstPageData({parentAnimate:!0})}},n}),define("pages/waitmeapprove",["../logic/waitmeapprove","../parts/common","utils"],function(e,t,i){return{pluginClass:e,style:{backgroundColor:t.backColor},root:["segment","searchview","viewpager"],components:{segment:{type:"segment_android",ref:!0,items:[{title:"待我审批"},{title:"我已审批"}],root:["segment_item"],className:"bottom-half-line",indicatorStyle:{backgroundColor:"#29B6F6"},style:{height:40,backgroundColor:"#fff"}},segment_item:{type:"text",text:"加载中...",ref:!0,text_bind:"title",selectedClassName:"ar-sgm-item-selected-android",className:"right-half-line",style:{color:"#262626",fontSize:13,textAlign:"center",justifyContent:"center",width:"100%"}},viewpager:{type:"viewpager",defaultKey:"commonlist_waitmyapprove",style:{flex:1}},searchview:{type:"view",root:["searchInput"],style:{width:"100%"}},searchInput:{cancelBtnStyle:{color:"#37B7FD",fontSize:15},style:{backgroundColor:"#fff"},iconStyle:{},placeholder:"搜索标题",font:"ap_e903",ref:!0,type:"simplesearchview"}}}});